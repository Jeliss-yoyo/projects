{"remainingRequest":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\layout\\custom-made.vue?vue&type=style&index=0&id=4bd9329c&scoped=true&lang=css&","dependencies":[{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\layout\\custom-made.vue","mtime":1610602211234},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojY3VzdG9tLW1hZGUgewoJcG9zaXRpb246IHJlbGF0aXZlOwoJaGVpZ2h0OiAxMDAlOwoJb3ZlcmZsb3c6IGhpZGRlbjsKCWJvcmRlcjogMXB4IHNvbGlkIHllbGxvdzsKfQojdmlydHVhbC1zY3JlZW4gewoJYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOwoJcG9zaXRpb246IGFic29sdXRlOwoJdG9wOiA1MCU7CglsZWZ0OiA1MCU7Cn0K"},{"version":3,"sources":["custom-made.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"custom-made.vue","sourceRoot":"src/components/layout","sourcesContent":["<template>\n\t<!-- 可视化定制区域 -->\n\t<div id=\"custom-made\">\n\t\t<!-- 虚拟大屏 -->\n\t\t<div id=\"virtual-screen\">\n\t\t\t<vueResiable></vueResiable>\n\t\t\t<vueResiable :scaleRatio=\"vScale\" @resizing=\"getBoxinfo\"></vueResiable>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport vueResiable from '@/components/resizable/vue-resizable';\n\texport default {\n\t\tname: 'custom-made',\n\t\tcomponents: {\n\t\t\tvueResiable\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t// 当前项目信息\n\t\t\t\tproject: this.$store.state.project,\n\t\t\t\t// custom-made 容器尺寸\n\t\t\t\twrapSize: [],\n\t\t\t\t// 虚拟大屏的尺寸\n\t\t\t\tvScreenSize: [],\n\t\t\t\t// 当前缩放比例\n\t\t\t\tvScale: 1\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tthis.getWrapSize();\n\t\t\tthis.setVirtualScreen();\n\t\t},\n\t\tmethods: {\n\t\t\t// 获取 custom-made 容器尺寸\n\t\t\tgetWrapSize() {\n\t\t\t\tconst wrap = document.querySelector('#custom-made');\n\t\t\t\tconst style = window.getComputedStyle(wrap, null);\n\t\t\t\tthis.wrapSize = [parseFloat(style.width), parseFloat(style.height)];\n\t\t\t},\n\t\t\t// 设置虚拟大屏（根据项目分辨率，以一定的系数进行等比缩放）\n\t\t\tsetVirtualScreen() {\n\t\t\t\tconst [pw, ph] = this.project.resolution;\n\t\t\t\tconst [rw, rh] = this.wrapSize;\n\t\t\t\tlet vsw, vsh, scale;\n\t\t\t\t// 计算最佳的虚拟大屏尺寸以及缩放系数\n\t\t\t\tif (rw / rh <= pw / ph) {\n\t\t\t\t\tvsw = rw;\n\t\t\t\t\tvsh = vsw * ph / pw;\n\t\t\t\t} else {\n\t\t\t\t\tvsh = rh;\n\t\t\t\t\tvsw = vsh * pw / ph;\n\t\t\t\t}\n\t\t\t\tscale = vsw / pw;\n\t\t\t\tthis.vScale = scale;\n\t\t\t\tconst vScreen = document.querySelector('#virtual-screen');\n\t\t\t\tvScreen.style.cssText = `\n\t\t\t\t\twidth: ${ vsw / scale }px; \n\t\t\t\t\theight: ${ vsh / scale }px;\n\t\t\t\t\ttransform: translate(-50%, -50%) scale(${ scale });\n\t\t\t\t`;\n\t\t\t},\n\t\t\tgetBoxinfo(l, t, w, h) {\n\t\t\t\tconsole.log('box:', l, t, w, h);\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t#custom-made {\n\t\tposition: relative;\n\t\theight: 100%;\n\t\toverflow: hidden;\n\t\tborder: 1px solid yellow;\n\t}\n\t#virtual-screen {\n\t\tbackground-color: rgba(255, 255, 255, 0.2);\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t}\n</style>\n"]}]}