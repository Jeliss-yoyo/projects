{"remainingRequest":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\layout\\custom-made.vue?vue&type=style&index=0&id=4bd9329c&scoped=true&lang=css&","dependencies":[{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\layout\\custom-made.vue","mtime":1611057097803},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\css-loader\\dist\\cjs.js","mtime":1607477900108},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1609899827306},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\postcss-loader\\src\\index.js","mtime":1585119192858},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1585119190579},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js","mtime":1609899827306}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2N1c3RvbS1tYWRlIHsKCXBvc2l0aW9uOiByZWxhdGl2ZTsKCWhlaWdodDogMTAwJTsKCW92ZXJmbG93OiBoaWRkZW47Cn0KI3ZpcnR1YWwtc2NyZWVuIHsKCWJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCXRvcDogNTAlOwoJbGVmdDogNTAlOwoJYmFja2dyb3VuZC1zaXplOiAxMDAlIDEwMCU7Cn0KCi5ib3VuY2UtZW50ZXItYWN0aXZlIHsKICBhbmltYXRpb246IGJvdW5jZS1pbiA1czsKfQouYm91bmNlLWxlYXZlLWFjdGl2ZSB7CiAgYW5pbWF0aW9uOiBib3VuY2UtaW4gNXMgcmV2ZXJzZTsKfQpAa2V5ZnJhbWVzIGJvdW5jZS1pbiB7CiAgMCUgewogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDMwKTsKICB9CiAgNTAlIHsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCg2MCk7CiAgfQogIDEwMCUgewogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApOwogIH0KfQo="},{"version":3,"sources":["custom-made.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"custom-made.vue","sourceRoot":"src/components/layout","sourcesContent":["<template>\n\t<!-- 可视化定制区域 -->\n\t<div id=\"custom-made\">\n\t\t<!-- 虚拟大屏 -->\n\t\t<div id=\"virtual-screen\" :style=\"vScreenStyle\" @click.self=\"onClickVScreen\">\n\t\t\t<vueResiable\n\t\t\t\tv-for=\"(ele, k) in slide.elements\" \n\t\t\t\t:key=\"k\"\n\t\t\t\t:scaleRatio=\"vScale\"\n\t\t\t\t:eleId=\"k\"\n\t\t\t\t@resizing=\"getBoxInfo\"\n\t\t\t\t@onSelectElement=\"onClickBox\"\n\t\t\t\t:w=\"+ele.attribute.width\"\n\t\t\t\t:h=\"+ele.attribute.height\"\n\t\t\t\t:x=\"+ele.attribute.left\"\n\t\t\t\t:y=\"+ele.attribute.top\"\n\t\t\t\t:z=\"+ele.attribute.zIndex\"\n\t\t\t\t:bgClr=\"ele.attribute.bgClr\"\n\t\t\t\t:bgImage=\"ele.attribute.bgImage\"\n\t\t\t\t:bgSize=\"ele.attribute.bgSize\"\n\t\t\t>\n\t\t\t\t<component :is=\"ele.component\" :eleId=\"k\" @options=\"getOptions\" />\n\t\t\t</vueResiable>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport vueResiable from '@/components/resizable/vue-resizable';\n\timport { $components } from '@/components/elements/components';\n\t$components.vueResiable = vueResiable;\n\texport default {\n\t\tname: 'custom-made',\n\t\tcomponents: $components,\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t// 当前项目信息\n\t\t\t\tproject: this.$store.state.project,\n\t\t\t\t// custom-made 容器尺寸\n\t\t\t\twrapSize: [],\n\t\t\t\t// 虚拟大屏的尺寸\n\t\t\t\tvScreenSize: [],\n\t\t\t\t// 当前缩放比例\n\t\t\t\tvScale: 1,\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\t_counter: {\n\t\t\t\thandler(n, o){\n\t\t\t\t\t//console.log('设计中心更新');\n\t\t\t\t\tthis.$forceUpdate();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tslide() {\n\t\t\t\treturn this.$store.getters._slide;\n\t\t\t},\n\t\t\tisElement() {\n\t\t\t\treturn this.$store.state.active.isElemChecked;\n\t\t\t},\n\t\t\tcurrentEleId() {\n\t\t\t\treturn this.$store.state.active.eleId;\n\t\t\t},\n\t\t\tvScreenStyle() {\n\t\t\t\treturn `\n\t\t\t\t\tbackground-color: ${ this.slide.bgClr };\n\t\t\t\t\tbackground-image: url(${ this.slide.bgImage });\n\t\t\t\t\tbackground-size: ${ this.slide.bgSize };\n\t\t\t\t`;\n\t\t\t},\n\t\t\t_counter() {\n\t\t\t\treturn this.$store.state.counter;\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tthis.getWrapSize();\n\t\t\tthis.setVirtualScreen();\n\t\t\twindow.$store = this.$store;\n\t\t},\n\t\tmethods: {\n\t\t\t// 获取 custom-made 容器尺寸\n\t\t\tgetWrapSize() {\n\t\t\t\tconst wrap = document.querySelector('#custom-made');\n\t\t\t\tconst style = window.getComputedStyle(wrap, null);\n\t\t\t\tthis.wrapSize = [parseFloat(style.width), parseFloat(style.height)];\n\t\t\t},\n\t\t\t// 设置虚拟大屏（根据项目分辨率，以一定的系数进行等比缩放）\n\t\t\tsetVirtualScreen() {\n\t\t\t\tconst [pw, ph] = this.project.resolution;\n\t\t\t\tconst [rw, rh] = this.wrapSize;\n\t\t\t\tlet vsw, vsh, scale;\n\t\t\t\t// 计算最佳的虚拟大屏尺寸以及缩放系数\n\t\t\t\tif (rw / rh <= pw / ph) {\n\t\t\t\t\tvsw = rw;\n\t\t\t\t\tvsh = vsw * ph / pw;\n\t\t\t\t} else {\n\t\t\t\t\tvsh = rh;\n\t\t\t\t\tvsw = vsh * pw / ph;\n\t\t\t\t}\n\t\t\t\tscale = vsw / pw;\n\t\t\t\tthis.vScale = scale;\n\t\t\t\tconst vScreen = document.querySelector('#virtual-screen');\n\t\t\t\tvScreen.style.cssText = `\n\t\t\t\t\twidth: ${ vsw / scale }px; \n\t\t\t\t\theight: ${ vsh / scale }px;\n\t\t\t\t\ttransform: translate(-50%, -50%) scale(${ scale });\n\t\t\t\t`;\n\t\t\t},\n\t\t\t// 点击元素\n\t\t\tonClickBox(eleId) {\n\t\t\t\t// 两次点击的是否为同一元素\n\t\t\t\tconst isSame = this.currentEleId === eleId;\n\t\t\t\t// 不同则更新\n\t\t\t\t(!this.isElement || !isSame) && this.$store.commit('_active', { eleId });\n\t\t\t},\n\t\t\t// 点击幻灯片\n\t\t\tonClickVScreen() {\n\t\t\t\tthis.isElement && this.$store.commit('_active', {});\n\t\t\t},\n\t\t\t// 目标元素平移变换，属性更新\n\t\t\tgetBoxInfo(left, top, width, height) {\n\t\t\t\tconst attr = { width, height, left, top };\n\t\t\t\tthis.$store.commit('_resizeElement', attr);\n\t\t\t},\n\t\t\t// 组件加载成功后，取得该组件相关属性，提交到 vuex\n\t\t\tgetOptions(eleId, opts) {\n\t\t\t\tthis.$store.commit('_updateElementOption', { eleId, opts });\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t#custom-made {\n\t\tposition: relative;\n\t\theight: 100%;\n\t\toverflow: hidden;\n\t}\n\t#virtual-screen {\n\t\tbackground-color: rgba(255, 255, 255, 0.2);\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tbackground-size: 100% 100%;\n\t}\n\t\n\t.bounce-enter-active {\n\t  animation: bounce-in 5s;\n\t}\n\t.bounce-leave-active {\n\t  animation: bounce-in 5s reverse;\n\t}\n\t@keyframes bounce-in {\n\t  0% {\n\t    transform: translateX(30);\n\t  }\n\t  50% {\n\t    transform: translateX(60);\n\t  }\n\t  100% {\n\t    transform: translateX(0);\n\t  }\n\t}\n</style>\n"]}]}