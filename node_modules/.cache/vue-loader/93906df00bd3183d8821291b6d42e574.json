{"remainingRequest":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\resizable\\vue-resizable.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\resizable\\vue-resizable.vue","mtime":1611052298585},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1585119190579},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\babel-loader\\lib\\index.js","mtime":1607477892317},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1585119190579},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js","mtime":1609899827306}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CgltYXRjaGVzU2VsZWN0b3JUb1BhcmVudEVsZW1lbnRzLAoJZ2V0Q29tcHV0ZWRTaXplLAoJYWRkRXZlbnQsCglyZW1vdmVFdmVudAp9IGZyb20gJ0AvdXRpbHMvcmVzaXphYmxlL2RvbScKaW1wb3J0IHsKCWNvbXB1dGVXaWR0aCwKCWNvbXB1dGVIZWlnaHQsCglyZXN0cmljdFRvQm91bmRzLAoJc25hcFRvR3JpZAp9IGZyb20gJ0AvdXRpbHMvcmVzaXphYmxlL2ZucycKCmNvbnN0IGV2ZW50cyA9IHsKCW1vdXNlOiB7CgkJc3RhcnQ6ICdtb3VzZWRvd24nLAoJCW1vdmU6ICdtb3VzZW1vdmUnLAoJCXN0b3A6ICdtb3VzZXVwJwoJfSwKCXRvdWNoOiB7CgkJc3RhcnQ6ICd0b3VjaHN0YXJ0JywKCQltb3ZlOiAndG91Y2htb3ZlJywKCQlzdG9wOiAndG91Y2hlbmQnCgl9Cn0KCi8vIOemgeatoueUqOaIt+mAieWPlgpjb25zdCB1c2VyU2VsZWN0Tm9uZSA9IHsKCXVzZXJTZWxlY3Q6ICdub25lJywKCU1velVzZXJTZWxlY3Q6ICdub25lJywKCVdlYmtpdFVzZXJTZWxlY3Q6ICdub25lJywKCU1zVXNlclNlbGVjdDogJ25vbmUnCn0KLy8g55So5oi36YCJ5Lit6Ieq5YqoCmNvbnN0IHVzZXJTZWxlY3RBdXRvID0gewoJdXNlclNlbGVjdDogJ2F1dG8nLAoJTW96VXNlclNlbGVjdDogJ2F1dG8nLAoJV2Via2l0VXNlclNlbGVjdDogJ2F1dG8nLAoJTXNVc2VyU2VsZWN0OiAnYXV0bycKfQoKbGV0IGV2ZW50c0ZvciA9IGV2ZW50cy5tb3VzZQoKZXhwb3J0IGRlZmF1bHQgewoJcmVwbGFjZTogdHJ1ZSwKCW5hbWU6ICd2dWUtcmVzaXphYmxlJywKCXByb3BzOiB7CgkJY2xhc3NOYW1lOiB7CgkJCXR5cGU6IFN0cmluZywKCQkJZGVmYXVsdDogJ3ZkcicKCQl9LAoJCWNsYXNzTmFtZURyYWdnYWJsZTogewoJCQl0eXBlOiBTdHJpbmcsCgkJCWRlZmF1bHQ6ICdkcmFnZ2FibGUnCgkJfSwKCQljbGFzc05hbWVSZXNpemFibGU6IHsKCQkJdHlwZTogU3RyaW5nLAoJCQlkZWZhdWx0OiAncmVzaXphYmxlJwoJCX0sCgkJY2xhc3NOYW1lRHJhZ2dpbmc6IHsKCQkJdHlwZTogU3RyaW5nLAoJCQlkZWZhdWx0OiAnZHJhZ2dpbmcnCgkJfSwKCQljbGFzc05hbWVSZXNpemluZzogewoJCQl0eXBlOiBTdHJpbmcsCgkJCWRlZmF1bHQ6ICdyZXNpemluZycKCQl9LAoJCWNsYXNzTmFtZUFjdGl2ZTogewoJCQl0eXBlOiBTdHJpbmcsCgkJCWRlZmF1bHQ6ICdhY3RpdmUnCgkJfSwKCQljbGFzc05hbWVIYW5kbGU6IHsKCQkJdHlwZTogU3RyaW5nLAoJCQlkZWZhdWx0OiAnaGFuZGxlJwoJCX0sCgkJZGlzYWJsZVVzZXJTZWxlY3Q6IHsKCQkJdHlwZTogQm9vbGVhbiwKCQkJZGVmYXVsdDogdHJ1ZQoJCX0sCgkJZW5hYmxlTmF0aXZlRHJhZzogewoJCQl0eXBlOiBCb29sZWFuLAoJCQlkZWZhdWx0OiBmYWxzZQoJCX0sCgkJcHJldmVudERlYWN0aXZhdGlvbjogewoJCQl0eXBlOiBCb29sZWFuLAoJCQlkZWZhdWx0OiBmYWxzZQoJCX0sCgkJYWN0aXZlOiB7CgkJCXR5cGU6IEJvb2xlYW4sCgkJCWRlZmF1bHQ6IGZhbHNlCgkJfSwKCQlkcmFnZ2FibGU6IHsKCQkJdHlwZTogQm9vbGVhbiwKCQkJZGVmYXVsdDogdHJ1ZQoJCX0sCgkJcmVzaXphYmxlOiB7CgkJCXR5cGU6IEJvb2xlYW4sCgkJCWRlZmF1bHQ6IHRydWUKCQl9LAoJCS8vIOmUgeWumuWuvemrmOavlAoJCWxvY2tBc3BlY3RSYXRpbzogewoJCQl0eXBlOiBCb29sZWFuLAoJCQlkZWZhdWx0OiBmYWxzZQoJCX0sCgkJdzogewoJCQl0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAoJCQlkZWZhdWx0OiAyMDAsCgkJCXZhbGlkYXRvcjogKHZhbCkgPT4gewoJCQkJaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7CgkJCQkJcmV0dXJuIHZhbCA+IDAKCQkJCX0KCQkJCXJldHVybiB2YWwgPT09ICdhdXRvJwoJCQl9CgkJfSwKCQloOiB7CgkJCXR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCgkJCWRlZmF1bHQ6IDIwMCwKCQkJdmFsaWRhdG9yOiAodmFsKSA9PiB7CgkJCQlpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHsKCQkJCQlyZXR1cm4gdmFsID4gMAoJCQkJfQoJCQkJcmV0dXJuIHZhbCA9PT0gJ2F1dG8nCgkJCX0KCQl9LAoJCW1pbldpZHRoOiB7CgkJCXR5cGU6IE51bWJlciwKCQkJZGVmYXVsdDogMTAsCgkJCXZhbGlkYXRvcjogKHZhbCkgPT4gdmFsID49IDAKCQl9LAoJCW1pbkhlaWdodDogewoJCQl0eXBlOiBOdW1iZXIsCgkJCWRlZmF1bHQ6IDEwLAoJCQl2YWxpZGF0b3I6ICh2YWwpID0+IHZhbCA+PSAwCgkJfSwKCQltYXhXaWR0aDogewoJCQl0eXBlOiBOdW1iZXIsCgkJCWRlZmF1bHQ6IG51bGwsCgkJCXZhbGlkYXRvcjogKHZhbCkgPT4gdmFsID49IDAKCQl9LAoJCW1heEhlaWdodDogewoJCQl0eXBlOiBOdW1iZXIsCgkJCWRlZmF1bHQ6IG51bGwsCgkJCXZhbGlkYXRvcjogKHZhbCkgPT4gdmFsID49IDAKCQl9LAoJCXg6IHsKCQkJdHlwZTogTnVtYmVyLAoJCQlkZWZhdWx0OiAwCgkJfSwKCQl5OiB7CgkJCXR5cGU6IE51bWJlciwKCQkJZGVmYXVsdDogMAoJCX0sCgkJejogewoJCQl0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAoJCQlkZWZhdWx0OiAnYXV0bycsCgkJCXZhbGlkYXRvcjogKHZhbCkgPT4gKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gdmFsID09PSAnYXV0bycgOiB2YWwgPj0gMCkKCQl9LAoJCWJnQ2xyOiB7CgkJCXR5cGU6IFN0cmluZywKCQkJZGVmYXVsdDogJ3JnYmEoMCwgMCwgMCwgMCknCgkJfSwKCQliZ0ltYWdlOiB7CgkJCXR5cGU6IFN0cmluZywKCQkJZGVmYXVsdDogJycKCQl9LAoJCWJnU2l6ZTogewoJCQl0eXBlOiBTdHJpbmcsCgkJCWRlZmF1bHQ6ICcnCgkJfSwKCQkvLyDnu4Tku7blhoXlrrnvvIjnu4Tku7ZJRO+8iQoJCWVsZUlkOiB7CgkJCXR5cGU6IFN0cmluZywKCQkJZGVmYXVsdDogJycKCQl9LAoJCWhhbmRsZXM6IHsKCQkJdHlwZTogQXJyYXksCgkJCWRlZmF1bHQ6ICgpID0+IFsndGwnLCAndG0nLCAndHInLCAnbXInLCAnYnInLCAnYm0nLCAnYmwnLCAnbWwnXSwKCQkJdmFsaWRhdG9yOiAodmFsKSA9PiB7CgkJCQljb25zdCBzID0gbmV3IFNldChbJ3RsJywgJ3RtJywgJ3RyJywgJ21yJywgJ2JyJywgJ2JtJywgJ2JsJywgJ21sJ10pCgoJCQkJcmV0dXJuIG5ldyBTZXQodmFsLmZpbHRlcihoID0+IHMuaGFzKGgpKSkuc2l6ZSA9PT0gdmFsLmxlbmd0aAoJCQl9CgkJfSwKCQlkcmFnSGFuZGxlOiB7CgkJCXR5cGU6IFN0cmluZywKCQkJZGVmYXVsdDogbnVsbAoJCX0sCgkJZHJhZ0NhbmNlbDogewoJCQl0eXBlOiBTdHJpbmcsCgkJCWRlZmF1bHQ6IG51bGwKCQl9LAoJCWF4aXM6IHsKCQkJdHlwZTogU3RyaW5nLAoJCQlkZWZhdWx0OiAnYm90aCcsCgkJCXZhbGlkYXRvcjogKHZhbCkgPT4gWyd4JywgJ3knLCAnYm90aCddLmluY2x1ZGVzKHZhbCkKCQl9LAoJCWdyaWQ6IHsKCQkJdHlwZTogQXJyYXksCgkJCWRlZmF1bHQ6ICgpID0+IFsxLCAxXQoJCX0sCgkJcGFyZW50OiB7CgkJCXR5cGU6IFtCb29sZWFuLCBTdHJpbmddLAoJCQlkZWZhdWx0OiBmYWxzZQoJCX0sCgkJb25EcmFnU3RhcnQ6IHsKCQkJdHlwZTogRnVuY3Rpb24sCgkJCWRlZmF1bHQ6ICgpID0+IHRydWUKCQl9LAoJCW9uRHJhZzogewoJCQl0eXBlOiBGdW5jdGlvbiwKCQkJZGVmYXVsdDogKCkgPT4gdHJ1ZQoJCX0sCgkJb25SZXNpemVTdGFydDogewoJCQl0eXBlOiBGdW5jdGlvbiwKCQkJZGVmYXVsdDogKCkgPT4gdHJ1ZQoJCX0sCgkJb25SZXNpemU6IHsKCQkJdHlwZTogRnVuY3Rpb24sCgkJCWRlZmF1bHQ6ICgpID0+IHRydWUKCQl9LAoJCS8vIOWGsueqgeajgOa1iwoJCWlzQ29uZmxpY3RDaGVjazogewoJCQl0eXBlOiBCb29sZWFuLAoJCQlkZWZhdWx0OiBmYWxzZQoJCX0sCgkJLy8g5YWD57Sg5a+56b2QCgkJc25hcDogewoJCQl0eXBlOiBCb29sZWFuLAoJCQlkZWZhdWx0OiBmYWxzZQoJCX0sCgkJLy8g5b2T6LCD55So5a+56b2Q5pe277yM55So5p2l6K6+572u57uE5Lu25LiO57uE5Lu25LmL6Ze055qE5a+56b2Q6Led56a777yM5Lul5YOP57Sg5Li65Y2V5L2NCgkJc25hcFRvbGVyYW5jZTogewoJCQl0eXBlOiBOdW1iZXIsCgkJCWRlZmF1bHQ6IDUsCgkJCXZhbGlkYXRvcjogZnVuY3Rpb24odmFsKSB7CgkJCQlyZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcicKCQkJfQoJCX0sCgkJLy8g57yp5pS+5q+U5L6LCgkJc2NhbGVSYXRpbzogewoJCQl0eXBlOiBOdW1iZXIsCgkJCWRlZmF1bHQ6IDEsCgkJCXZhbGlkYXRvcjogKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcicKCQl9LAoJCS8vIGhhbmRsZeaYr+WQpue8qeaUvgoJCWhhbmRsZUluZm86IHsKCQkJdHlwZTogT2JqZWN0LAoJCQlkZWZhdWx0OiAoKSA9PiB7CgkJCQlyZXR1cm4gewoJCQkJCXNpemU6IDYsCgkJCQkJb2Zmc2V0OiAtNSwKCQkJCQlzd2l0Y2g6IHRydWUKCQkJCX0KCQkJfQoJCX0KCX0sCgoJZGF0YTogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHsKCQkJbGVmdDogdGhpcy54LAoJCQl0b3A6IHRoaXMueSwKCQkJcmlnaHQ6IG51bGwsCgkJCWJvdHRvbTogbnVsbCwKCgkJCXdpZHRoOiBudWxsLAoJCQloZWlnaHQ6IG51bGwsCgkJCXdpZHRoVG91Y2hlZDogZmFsc2UsCgkJCWhlaWdodFRvdWNoZWQ6IGZhbHNlLAoJCQlhc3BlY3RGYWN0b3I6IG51bGwsCgoJCQlwYXJlbnRXaWR0aDogbnVsbCwKCQkJcGFyZW50SGVpZ2h0OiBudWxsLAoKCQkJbWluVzogdGhpcy5taW5XaWR0aCwKCQkJbWluSDogdGhpcy5taW5IZWlnaHQsCgoJCQltYXhXOiB0aGlzLm1heFdpZHRoLAoJCQltYXhIOiB0aGlzLm1heEhlaWdodCwKCgkJCWhhbmRsZTogbnVsbCwKCQkJZW5hYmxlZDogdGhpcy5hY3RpdmUsCgkJCXJlc2l6aW5nOiBmYWxzZSwKCQkJZHJhZ2dpbmc6IGZhbHNlLAoJCQl6SW5kZXg6IHRoaXMuegoJCX0KCX0sCgoJY3JlYXRlZDogZnVuY3Rpb24oKSB7CgkJLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIOaXoOaViOeahHByb3DvvJptaW5XaWR0aOS4jeiDveWkp+S6jm1heFdpZHRoCgkJaWYgKHRoaXMubWF4V2lkdGggJiYgdGhpcy5taW5XaWR0aCA+IHRoaXMubWF4V2lkdGgpIGNvbnNvbGUud2FybigKCQkJJ1tWZHIgd2Fybl06IEludmFsaWQgcHJvcDogbWluV2lkdGggY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiBtYXhXaWR0aCcpCgkJLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIOaXoOaViHByb3DvvJptaW5IZWlnaHTkuI3og73lpKfkuo5tYXhIZWlnaHQnCgkJaWYgKHRoaXMubWF4V2lkdGggJiYgdGhpcy5taW5IZWlnaHQgPiB0aGlzLm1heEhlaWdodCkgY29uc29sZS53YXJuKAoJCQknW1ZkciB3YXJuXTogSW52YWxpZCBwcm9wOiBtaW5IZWlnaHQgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiBtYXhIZWlnaHQnKQoKCQl0aGlzLnJlc2V0Qm91bmRzQW5kTW91c2VTdGF0ZSgpCgl9LAoJbW91bnRlZDogZnVuY3Rpb24oKSB7CgkJaWYgKCF0aGlzLmVuYWJsZU5hdGl2ZURyYWcpIHsKCQkJdGhpcy4kZWwub25kcmFnc3RhcnQgPSAoKSA9PiBmYWxzZQoJCX0KCgkJY29uc3QgW3BhcmVudFdpZHRoLCBwYXJlbnRIZWlnaHRdID0gdGhpcy5nZXRQYXJlbnRTaXplKCkKCgkJdGhpcy5wYXJlbnRXaWR0aCA9IHBhcmVudFdpZHRoCgkJdGhpcy5wYXJlbnRIZWlnaHQgPSBwYXJlbnRIZWlnaHQKCQljb25zdCBbd2lkdGgsIGhlaWdodF0gPSBnZXRDb21wdXRlZFNpemUodGhpcy4kZWwpCgkJdGhpcy5hc3BlY3RGYWN0b3IgPSAodGhpcy53ICE9PSAnYXV0bycgPyB0aGlzLncgOiB3aWR0aCkgLyAodGhpcy5oICE9PSAnYXV0bycgPyB0aGlzLmggOiBoZWlnaHQpCgkJdGhpcy53aWR0aCA9IHRoaXMudyAhPT0gJ2F1dG8nID8gdGhpcy53IDogd2lkdGgKCQl0aGlzLmhlaWdodCA9IHRoaXMuaCAhPT0gJ2F1dG8nID8gdGhpcy5oIDogaGVpZ2h0CgkJdGhpcy5yaWdodCA9IHRoaXMucGFyZW50V2lkdGggLSB0aGlzLndpZHRoIC0gdGhpcy5sZWZ0CgkJdGhpcy5ib3R0b20gPSB0aGlzLnBhcmVudEhlaWdodCAtIHRoaXMuaGVpZ2h0IC0gdGhpcy50b3AKCgkJdGhpcy5zZXR0aW5nQXR0cmlidXRlKCkKCgkJYWRkRXZlbnQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAnbW91c2Vkb3duJywgdGhpcy5kZXNlbGVjdCkKCQlhZGRFdmVudChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsICd0b3VjaGVuZCB0b3VjaGNhbmNlbCcsIHRoaXMuZGVzZWxlY3QpCgoJCWFkZEV2ZW50KHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuY2hlY2tQYXJlbnRTaXplKQoJfSwKCWJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uKCkgewoJCXJlbW92ZUV2ZW50KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgJ21vdXNlZG93bicsIHRoaXMuZGVzZWxlY3QpCgkJcmVtb3ZlRXZlbnQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlVXApCgkJcmVtb3ZlRXZlbnQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAnbW91c2Vtb3ZlJywgdGhpcy5tb3ZlKQoJCXJlbW92ZUV2ZW50KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgJ3RvdWNobW92ZScsIHRoaXMubW92ZSkKCQlyZW1vdmVFdmVudChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsICdtb3VzZXVwJywgdGhpcy5oYW5kbGVVcCkKCQlyZW1vdmVFdmVudChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsICd0b3VjaGVuZCB0b3VjaGNhbmNlbCcsIHRoaXMuZGVzZWxlY3QpCgoJCXJlbW92ZUV2ZW50KHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuY2hlY2tQYXJlbnRTaXplKQoJfSwKCgltZXRob2RzOiB7CgkJLy8g6YeN572u6L6555WM5ZKM6byg5qCH54q25oCBCgkJcmVzZXRCb3VuZHNBbmRNb3VzZVN0YXRlKCkgewoJCQl0aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbiA9IHsKCQkJCW1vdXNlWDogMCwKCQkJCW1vdXNlWTogMCwKCQkJCXg6IDAsCgkJCQl5OiAwLAoJCQkJdzogMCwKCQkJCWg6IDAKCQkJfQoKCQkJdGhpcy5ib3VuZHMgPSB7CgkJCQltaW5MZWZ0OiBudWxsLAoJCQkJbWF4TGVmdDogbnVsbCwKCQkJCW1pblJpZ2h0OiBudWxsLAoJCQkJbWF4UmlnaHQ6IG51bGwsCgkJCQltaW5Ub3A6IG51bGwsCgkJCQltYXhUb3A6IG51bGwsCgkJCQltaW5Cb3R0b206IG51bGwsCgkJCQltYXhCb3R0b206IG51bGwKCQkJfQoJCX0sCgkJLy8g5qOA5p+l54i25YWD57Sg5aSn5bCPCgkJY2hlY2tQYXJlbnRTaXplKCkgewoJCQlpZiAodGhpcy5wYXJlbnQpIHsKCQkJCWNvbnN0IFtuZXdQYXJlbnRXaWR0aCwgbmV3UGFyZW50SGVpZ2h0XSA9IHRoaXMuZ2V0UGFyZW50U2l6ZSgpCgkJCQkvLyDkv67lpI3niLblhYPntKDmlLnlj5jlpKflsI/lkI7vvIznu4Tku7ZyZXNpemluZ+aXtua0u+WKqOW8guW4uAoJCQkJdGhpcy5yaWdodCA9IG5ld1BhcmVudFdpZHRoIC0gdGhpcy53aWR0aCAtIHRoaXMubGVmdAoJCQkJdGhpcy5ib3R0b20gPSBuZXdQYXJlbnRIZWlnaHQgLSB0aGlzLmhlaWdodCAtIHRoaXMudG9wCgoJCQkJdGhpcy5wYXJlbnRXaWR0aCA9IG5ld1BhcmVudFdpZHRoCgkJCQl0aGlzLnBhcmVudEhlaWdodCA9IG5ld1BhcmVudEhlaWdodAoJCQl9CgkJfSwKCQkvLyDojrflj5bniLblhYPntKDlpKflsI8KCQlnZXRQYXJlbnRTaXplKCkgewoJCQlpZiAodGhpcy5wYXJlbnQgPT09IHRydWUpIHsKCQkJCWNvbnN0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy4kZWwucGFyZW50Tm9kZSwgbnVsbCkKCQkJCXJldHVybiBbCgkJCQkJcGFyc2VJbnQoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnd2lkdGgnKSwgMTApLAoJCQkJCXBhcnNlSW50KHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2hlaWdodCcpLCAxMCkKCQkJCV0KCQkJfQoJCQlpZiAodHlwZW9mIHRoaXMucGFyZW50ID09PSAnc3RyaW5nJykgewoJCQkJY29uc3QgcGFyZW50Tm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5wYXJlbnQpCgkJCQlpZiAoIShwYXJlbnROb2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7CgkJCQkJdGhyb3cgbmV3IEVycm9yKGBUaGUgc2VsZWN0b3IgJHt0aGlzLnBhcmVudH0gZG9lcyBub3QgbWF0Y2ggYW55IGVsZW1lbnRgKQoJCQkJfQoJCQkJcmV0dXJuIFtwYXJlbnROb2RlLm9mZnNldFdpZHRoLCBwYXJlbnROb2RlLm9mZnNldEhlaWdodF0KCQkJfQoKCQkJcmV0dXJuIFtudWxsLCBudWxsXQoJCX0sCgkJLy8g5YWD57Sg6Kem5pG45oyJ5LiLCgkJZWxlbWVudFRvdWNoRG93bihlKSB7CgkJCWV2ZW50c0ZvciA9IGV2ZW50cy50b3VjaAoKCQkJdGhpcy5lbGVtZW50RG93bihlKQoJCX0sCgkJZWxlbWVudE1vdXNlRG93bihlKSB7CgkJCS8vIG1vdXNlZG93bkZuCgkJCXRoaXMuJGVtaXQoJ29uU2VsZWN0RWxlbWVudCcsIHRoaXMuZWxlSWQpCgkJCQoJCQlldmVudHNGb3IgPSBldmVudHMubW91c2UKCQkJdGhpcy5lbGVtZW50RG93bihlKQoJCX0sCgkJLy8g5YWD57Sg5oyJ5LiLCgkJZWxlbWVudERvd24oZSkgewoJCQlpZiAoZSBpbnN0YW5jZW9mIE1vdXNlRXZlbnQgJiYgZS53aGljaCAhPT0gMSkgewoJCQkJcmV0dXJuCgkJCX0KCgkJCWNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudAoJCQkKCQkJaWYgKHRoaXMuJGVsLmNvbnRhaW5zKHRhcmdldCkpIHsKCQkJCWlmICh0aGlzLm9uRHJhZ1N0YXJ0KGUpID09PSBmYWxzZSkgewoJCQkJCXJldHVybgoJCQkJfQoKCQkJCWlmICgKCQkJCQkodGhpcy5kcmFnSGFuZGxlICYmICFtYXRjaGVzU2VsZWN0b3JUb1BhcmVudEVsZW1lbnRzKHRhcmdldCwgdGhpcy5kcmFnSGFuZGxlLCB0aGlzLiRlbCkpIHx8CgkJCQkJKHRoaXMuZHJhZ0NhbmNlbCAmJiBtYXRjaGVzU2VsZWN0b3JUb1BhcmVudEVsZW1lbnRzKHRhcmdldCwgdGhpcy5kcmFnQ2FuY2VsLCB0aGlzLiRlbCkpCgkJCQkpIHsKCQkJCQl0aGlzLmRyYWdnaW5nID0gZmFsc2UKCgkJCQkJcmV0dXJuCgkJCQl9CgoJCQkJaWYgKCF0aGlzLmVuYWJsZWQpIHsKCQkJCQl0aGlzLmVuYWJsZWQgPSB0cnVlCgoJCQkJCXRoaXMuJGVtaXQoJ2FjdGl2YXRlZCcpCgkJCQkJdGhpcy4kZW1pdCgndXBkYXRlOmFjdGl2ZScsIHRydWUpCgkJCQl9CgoJCQkJaWYgKHRoaXMuZHJhZ2dhYmxlKSB7CgkJCQkJdGhpcy5kcmFnZ2luZyA9IHRydWUKCQkJCX0KCgkJCQl0aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbi5tb3VzZVggPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0ucGFnZVggOiBlLnBhZ2VYCgkJCQl0aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbi5tb3VzZVkgPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0ucGFnZVkgOiBlLnBhZ2VZCgoJCQkJdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24ubGVmdCA9IHRoaXMubGVmdAoJCQkJdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24ucmlnaHQgPSB0aGlzLnJpZ2h0CgkJCQl0aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbi50b3AgPSB0aGlzLnRvcAoJCQkJdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24uYm90dG9tID0gdGhpcy5ib3R0b20KCQkJCXRoaXMubW91c2VDbGlja1Bvc2l0aW9uLncgPSB0aGlzLndpZHRoCgkJCQl0aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbi5oID0gdGhpcy5oZWlnaHQKCgkJCQlpZiAodGhpcy5wYXJlbnQpIHsKCQkJCQl0aGlzLmJvdW5kcyA9IHRoaXMuY2FsY0RyYWdMaW1pdHMoKQoJCQkJfQoKCQkJCWFkZEV2ZW50KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgZXZlbnRzRm9yLm1vdmUsIHRoaXMubW92ZSkKCQkJCWFkZEV2ZW50KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgZXZlbnRzRm9yLnN0b3AsIHRoaXMuaGFuZGxlVXApCgkJCX0KCQl9LAoJCS8vIOiuoeeul+enu+WKqOiMg+WbtAoJCWNhbGNEcmFnTGltaXRzKCkgewoJCQlyZXR1cm4gewoJCQkJbWluTGVmdDogdGhpcy5sZWZ0ICUgdGhpcy5ncmlkWzBdLAoJCQkJbWF4TGVmdDogTWF0aC5mbG9vcigodGhpcy5wYXJlbnRXaWR0aCAtIHRoaXMud2lkdGggLSB0aGlzLmxlZnQpIC8gdGhpcy5ncmlkWzBdKSAqIHRoaXMuZ3JpZFswXSArIHRoaXMubGVmdCwKCQkJCW1pblJpZ2h0OiB0aGlzLnJpZ2h0ICUgdGhpcy5ncmlkWzBdLAoJCQkJbWF4UmlnaHQ6IE1hdGguZmxvb3IoKHRoaXMucGFyZW50V2lkdGggLSB0aGlzLndpZHRoIC0gdGhpcy5yaWdodCkgLyB0aGlzLmdyaWRbMF0pICogdGhpcy5ncmlkWzBdICsgdGhpcy5yaWdodCwKCQkJCW1pblRvcDogdGhpcy50b3AgJSB0aGlzLmdyaWRbMV0sCgkJCQltYXhUb3A6IE1hdGguZmxvb3IoKHRoaXMucGFyZW50SGVpZ2h0IC0gdGhpcy5oZWlnaHQgLSB0aGlzLnRvcCkgLyB0aGlzLmdyaWRbMV0pICogdGhpcy5ncmlkWzFdICsgdGhpcy50b3AsCgkJCQltaW5Cb3R0b206IHRoaXMuYm90dG9tICUgdGhpcy5ncmlkWzFdLAoJCQkJbWF4Qm90dG9tOiBNYXRoLmZsb29yKCh0aGlzLnBhcmVudEhlaWdodCAtIHRoaXMuaGVpZ2h0IC0gdGhpcy5ib3R0b20pIC8gdGhpcy5ncmlkWzFdKSAqIHRoaXMuZ3JpZFsxXSArIHRoaXMuYm90dG9tCgkJCX0KCQl9LAoJCS8vIOWPlua2iAoJCWRlc2VsZWN0KGUpIHsKCQkJY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50CgkJCWNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cCh0aGlzLmNsYXNzTmFtZSArICctKFt0cm1ibF17Mn0pJywgJycpCgoJCQlpZiAoIXRoaXMuJGVsLmNvbnRhaW5zKHRhcmdldCkgJiYgIXJlZ2V4LnRlc3QodGFyZ2V0LmNsYXNzTmFtZSkpIHsKCQkJCWlmICh0aGlzLmVuYWJsZWQgJiYgIXRoaXMucHJldmVudERlYWN0aXZhdGlvbikgewoJCQkJCXRoaXMuZW5hYmxlZCA9IGZhbHNlCgoJCQkJCXRoaXMuJGVtaXQoJ2RlYWN0aXZhdGVkJykKCQkJCQl0aGlzLiRlbWl0KCd1cGRhdGU6YWN0aXZlJywgZmFsc2UpCgkJCQl9CgoJCQkJcmVtb3ZlRXZlbnQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBldmVudHNGb3IubW92ZSwgdGhpcy5oYW5kbGVSZXNpemUpCgkJCX0KCgkJCXRoaXMucmVzZXRCb3VuZHNBbmRNb3VzZVN0YXRlKCkKCQl9LAoJCS8vIOaOp+WItuafhOinpuaRuOaMieS4iwoJCWhhbmRsZVRvdWNoRG93bihoYW5kbGUsIGUpIHsKCQkJZXZlbnRzRm9yID0gZXZlbnRzLnRvdWNoCgoJCQl0aGlzLmhhbmRsZURvd24oaGFuZGxlLCBlKQoJCX0sCgkJLy8g5o6n5Yi25p+E5oyJ5LiLCgkJaGFuZGxlRG93bihoYW5kbGUsIGUpIHsKCQkJaWYgKGUgaW5zdGFuY2VvZiBNb3VzZUV2ZW50ICYmIGUud2hpY2ggIT09IDEpIHsKCQkJCXJldHVybgoJCQl9CgoJCQlpZiAodGhpcy5vblJlc2l6ZVN0YXJ0KGhhbmRsZSwgZSkgPT09IGZhbHNlKSB7CgkJCQlyZXR1cm4KCQkJfQoKCQkJaWYgKGUuc3RvcFByb3BhZ2F0aW9uKSBlLnN0b3BQcm9wYWdhdGlvbigpCgoJCQkvLyBIZXJlIHdlIGF2b2lkIGEgZGFuZ2Vyb3VzIHJlY3Vyc2lvbiBieSBmYWtpbmcKCQkJLy8gY29ybmVyIGhhbmRsZXMgYXMgbWlkZGxlIGhhbmRsZXMKCQkJaWYgKHRoaXMubG9ja0FzcGVjdFJhdGlvICYmICFoYW5kbGUuaW5jbHVkZXMoJ20nKSkgewoJCQkJdGhpcy5oYW5kbGUgPSAnbScgKyBoYW5kbGUuc3Vic3RyaW5nKDEpCgkJCX0gZWxzZSB7CgkJCQl0aGlzLmhhbmRsZSA9IGhhbmRsZQoJCQl9CgoJCQl0aGlzLnJlc2l6aW5nID0gdHJ1ZQoKCQkJdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24ubW91c2VYID0gZS50b3VjaGVzID8gZS50b3VjaGVzWzBdLnBhZ2VYIDogZS5wYWdlWAoJCQl0aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbi5tb3VzZVkgPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0ucGFnZVkgOiBlLnBhZ2VZCgkJCXRoaXMubW91c2VDbGlja1Bvc2l0aW9uLmxlZnQgPSB0aGlzLmxlZnQKCQkJdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24ucmlnaHQgPSB0aGlzLnJpZ2h0CgkJCXRoaXMubW91c2VDbGlja1Bvc2l0aW9uLnRvcCA9IHRoaXMudG9wCgkJCXRoaXMubW91c2VDbGlja1Bvc2l0aW9uLmJvdHRvbSA9IHRoaXMuYm90dG9tCgkJCXRoaXMubW91c2VDbGlja1Bvc2l0aW9uLncgPSB0aGlzLndpZHRoCgkJCXRoaXMubW91c2VDbGlja1Bvc2l0aW9uLmggPSB0aGlzLmhlaWdodAoKCQkJdGhpcy5ib3VuZHMgPSB0aGlzLmNhbGNSZXNpemVMaW1pdHMoKQoKCQkJYWRkRXZlbnQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBldmVudHNGb3IubW92ZSwgdGhpcy5oYW5kbGVSZXNpemUpCgkJCWFkZEV2ZW50KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgZXZlbnRzRm9yLnN0b3AsIHRoaXMuaGFuZGxlVXApCgkJfSwKCQkvLyDorqHnrpfosIPmlbTlpKflsI/ojIPlm7QKCQljYWxjUmVzaXplTGltaXRzKCkgewoJCQlsZXQgbWluVyA9IHRoaXMubWluVwoJCQlsZXQgbWluSCA9IHRoaXMubWluSAoJCQlsZXQgbWF4VyA9IHRoaXMubWF4VwoJCQlsZXQgbWF4SCA9IHRoaXMubWF4SAoKCQkJY29uc3QgYXNwZWN0RmFjdG9yID0gdGhpcy5hc3BlY3RGYWN0b3IKCQkJY29uc3QgW2dyaWRYLCBncmlkWV0gPSB0aGlzLmdyaWQKCQkJY29uc3Qgd2lkdGggPSB0aGlzLndpZHRoCgkJCWNvbnN0IGhlaWdodCA9IHRoaXMuaGVpZ2h0CgkJCWNvbnN0IGxlZnQgPSB0aGlzLmxlZnQKCQkJY29uc3QgdG9wID0gdGhpcy50b3AKCQkJY29uc3QgcmlnaHQgPSB0aGlzLnJpZ2h0CgkJCWNvbnN0IGJvdHRvbSA9IHRoaXMuYm90dG9tCgoJCQlpZiAodGhpcy5sb2NrQXNwZWN0UmF0aW8pIHsKCQkJCWlmIChtaW5XIC8gbWluSCA+IGFzcGVjdEZhY3RvcikgewoJCQkJCW1pbkggPSBtaW5XIC8gYXNwZWN0RmFjdG9yCgkJCQl9IGVsc2UgewoJCQkJCW1pblcgPSBhc3BlY3RGYWN0b3IgKiBtaW5ICgkJCQl9CgoJCQkJaWYgKG1heFcgJiYgbWF4SCkgewoJCQkJCW1heFcgPSBNYXRoLm1pbihtYXhXLCBhc3BlY3RGYWN0b3IgKiBtYXhIKQoJCQkJCW1heEggPSBNYXRoLm1pbihtYXhILCBtYXhXIC8gYXNwZWN0RmFjdG9yKQoJCQkJfSBlbHNlIGlmIChtYXhXKSB7CgkJCQkJbWF4SCA9IG1heFcgLyBhc3BlY3RGYWN0b3IKCQkJCX0gZWxzZSBpZiAobWF4SCkgewoJCQkJCW1heFcgPSBhc3BlY3RGYWN0b3IgKiBtYXhICgkJCQl9CgkJCX0KCgkJCW1heFcgPSBtYXhXIC0gKG1heFcgJSBncmlkWCkKCQkJbWF4SCA9IG1heEggLSAobWF4SCAlIGdyaWRZKQoKCQkJY29uc3QgbGltaXRzID0gewoJCQkJbWluTGVmdDogbnVsbCwKCQkJCW1heExlZnQ6IG51bGwsCgkJCQltaW5Ub3A6IG51bGwsCgkJCQltYXhUb3A6IG51bGwsCgkJCQltaW5SaWdodDogbnVsbCwKCQkJCW1heFJpZ2h0OiBudWxsLAoJCQkJbWluQm90dG9tOiBudWxsLAoJCQkJbWF4Qm90dG9tOiBudWxsCgkJCX0KCgkJCWlmICh0aGlzLnBhcmVudCkgewoJCQkJbGltaXRzLm1pbkxlZnQgPSBsZWZ0ICUgZ3JpZFgKCQkJCWxpbWl0cy5tYXhMZWZ0ID0gbGVmdCArIE1hdGguZmxvb3IoKHdpZHRoIC0gbWluVykgLyBncmlkWCkgKiBncmlkWAoJCQkJbGltaXRzLm1pblRvcCA9IHRvcCAlIGdyaWRZCgkJCQlsaW1pdHMubWF4VG9wID0gdG9wICsgTWF0aC5mbG9vcigoaGVpZ2h0IC0gbWluSCkgLyBncmlkWSkgKiBncmlkWQoJCQkJbGltaXRzLm1pblJpZ2h0ID0gcmlnaHQgJSBncmlkWAoJCQkJbGltaXRzLm1heFJpZ2h0ID0gcmlnaHQgKyBNYXRoLmZsb29yKCh3aWR0aCAtIG1pblcpIC8gZ3JpZFgpICogZ3JpZFgKCQkJCWxpbWl0cy5taW5Cb3R0b20gPSBib3R0b20gJSBncmlkWQoJCQkJbGltaXRzLm1heEJvdHRvbSA9IGJvdHRvbSArIE1hdGguZmxvb3IoKGhlaWdodCAtIG1pbkgpIC8gZ3JpZFkpICogZ3JpZFkKCgkJCQlpZiAobWF4VykgewoJCQkJCWxpbWl0cy5taW5MZWZ0ID0gTWF0aC5tYXgobGltaXRzLm1pbkxlZnQsIHRoaXMucGFyZW50V2lkdGggLSByaWdodCAtIG1heFcpCgkJCQkJbGltaXRzLm1pblJpZ2h0ID0gTWF0aC5tYXgobGltaXRzLm1pblJpZ2h0LCB0aGlzLnBhcmVudFdpZHRoIC0gbGVmdCAtIG1heFcpCgkJCQl9CgoJCQkJaWYgKG1heEgpIHsKCQkJCQlsaW1pdHMubWluVG9wID0gTWF0aC5tYXgobGltaXRzLm1pblRvcCwgdGhpcy5wYXJlbnRIZWlnaHQgLSBib3R0b20gLSBtYXhIKQoJCQkJCWxpbWl0cy5taW5Cb3R0b20gPSBNYXRoLm1heChsaW1pdHMubWluQm90dG9tLCB0aGlzLnBhcmVudEhlaWdodCAtIHRvcCAtIG1heEgpCgkJCQl9CgoJCQkJaWYgKHRoaXMubG9ja0FzcGVjdFJhdGlvKSB7CgkJCQkJbGltaXRzLm1pbkxlZnQgPSBNYXRoLm1heChsaW1pdHMubWluTGVmdCwgbGVmdCAtIHRvcCAqIGFzcGVjdEZhY3RvcikKCQkJCQlsaW1pdHMubWluVG9wID0gTWF0aC5tYXgobGltaXRzLm1pblRvcCwgdG9wIC0gbGVmdCAvIGFzcGVjdEZhY3RvcikKCQkJCQlsaW1pdHMubWluUmlnaHQgPSBNYXRoLm1heChsaW1pdHMubWluUmlnaHQsIHJpZ2h0IC0gYm90dG9tICogYXNwZWN0RmFjdG9yKQoJCQkJCWxpbWl0cy5taW5Cb3R0b20gPSBNYXRoLm1heChsaW1pdHMubWluQm90dG9tLCBib3R0b20gLSByaWdodCAvIGFzcGVjdEZhY3RvcikKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWxpbWl0cy5taW5MZWZ0ID0gbnVsbAoJCQkJbGltaXRzLm1heExlZnQgPSBsZWZ0ICsgTWF0aC5mbG9vcigod2lkdGggLSBtaW5XKSAvIGdyaWRYKSAqIGdyaWRYCgkJCQlsaW1pdHMubWluVG9wID0gbnVsbAoJCQkJbGltaXRzLm1heFRvcCA9IHRvcCArIE1hdGguZmxvb3IoKGhlaWdodCAtIG1pbkgpIC8gZ3JpZFkpICogZ3JpZFkKCQkJCWxpbWl0cy5taW5SaWdodCA9IG51bGwKCQkJCWxpbWl0cy5tYXhSaWdodCA9IHJpZ2h0ICsgTWF0aC5mbG9vcigod2lkdGggLSBtaW5XKSAvIGdyaWRYKSAqIGdyaWRYCgkJCQlsaW1pdHMubWluQm90dG9tID0gbnVsbAoJCQkJbGltaXRzLm1heEJvdHRvbSA9IGJvdHRvbSArIE1hdGguZmxvb3IoKGhlaWdodCAtIG1pbkgpIC8gZ3JpZFkpICogZ3JpZFkKCgkJCQlpZiAobWF4VykgewoJCQkJCWxpbWl0cy5taW5MZWZ0ID0gLShyaWdodCArIG1heFcpCgkJCQkJbGltaXRzLm1pblJpZ2h0ID0gLShsZWZ0ICsgbWF4VykKCQkJCX0KCgkJCQlpZiAobWF4SCkgewoJCQkJCWxpbWl0cy5taW5Ub3AgPSAtKGJvdHRvbSArIG1heEgpCgkJCQkJbGltaXRzLm1pbkJvdHRvbSA9IC0odG9wICsgbWF4SCkKCQkJCX0KCgkJCQlpZiAodGhpcy5sb2NrQXNwZWN0UmF0aW8gJiYgKG1heFcgJiYgbWF4SCkpIHsKCQkJCQlsaW1pdHMubWluTGVmdCA9IE1hdGgubWluKGxpbWl0cy5taW5MZWZ0LCAtKHJpZ2h0ICsgbWF4VykpCgkJCQkJbGltaXRzLm1pblRvcCA9IE1hdGgubWluKGxpbWl0cy5taW5Ub3AsIC0obWF4SCArIGJvdHRvbSkpCgkJCQkJbGltaXRzLm1pblJpZ2h0ID0gTWF0aC5taW4obGltaXRzLm1pblJpZ2h0LCAtbGVmdCAtIG1heFcpCgkJCQkJbGltaXRzLm1pbkJvdHRvbSA9IE1hdGgubWluKGxpbWl0cy5taW5Cb3R0b20sIC10b3AgLSBtYXhIKQoJCQkJfQoJCQl9CgoJCQlyZXR1cm4gbGltaXRzCgkJfSwKCQkvLyDnp7vliqgKCQltb3ZlKGUpIHsKCQkJaWYgKHRoaXMucmVzaXppbmcpIHsKCQkJCXRoaXMuaGFuZGxlUmVzaXplKGUpCgkJCX0gZWxzZSBpZiAodGhpcy5kcmFnZ2luZykgewoJCQkJdGhpcy5oYW5kbGVEcmFnKGUpCgkJCX0KCQl9LAoJCS8vIOWFg+e0oOenu+WKqAoJCWFzeW5jIGhhbmRsZURyYWcoZSkgewoJCQljb25zdCBheGlzID0gdGhpcy5heGlzCgkJCWNvbnN0IGdyaWQgPSB0aGlzLmdyaWQKCQkJY29uc3QgYm91bmRzID0gdGhpcy5ib3VuZHMKCQkJY29uc3QgbW91c2VDbGlja1Bvc2l0aW9uID0gdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24KCgkJCWNvbnN0IHRtcERlbHRhWCA9IGF4aXMgJiYgYXhpcyAhPT0gJ3knID8gbW91c2VDbGlja1Bvc2l0aW9uLm1vdXNlWCAtIChlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0ucGFnZVggOiBlLnBhZ2VYKSA6CgkJCQkwCgkJCWNvbnN0IHRtcERlbHRhWSA9IGF4aXMgJiYgYXhpcyAhPT0gJ3gnID8gbW91c2VDbGlja1Bvc2l0aW9uLm1vdXNlWSAtIChlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0ucGFnZVkgOiBlLnBhZ2VZKSA6CgkJCQkwCgoJCQljb25zdCBbZGVsdGFYLCBkZWx0YVldID0gc25hcFRvR3JpZChncmlkLCB0bXBEZWx0YVgsIHRtcERlbHRhWSwgdGhpcy5zY2FsZVJhdGlvKQoKCQkJY29uc3QgbGVmdCA9IHJlc3RyaWN0VG9Cb3VuZHMobW91c2VDbGlja1Bvc2l0aW9uLmxlZnQgLSBkZWx0YVgsIGJvdW5kcy5taW5MZWZ0LCBib3VuZHMubWF4TGVmdCkKCQkJY29uc3QgdG9wID0gcmVzdHJpY3RUb0JvdW5kcyhtb3VzZUNsaWNrUG9zaXRpb24udG9wIC0gZGVsdGFZLCBib3VuZHMubWluVG9wLCBib3VuZHMubWF4VG9wKQoJCQlpZiAodGhpcy5vbkRyYWcobGVmdCwgdG9wKSA9PT0gZmFsc2UpIHsKCQkJCXJldHVybgoJCQl9CgkJCWNvbnN0IHJpZ2h0ID0gcmVzdHJpY3RUb0JvdW5kcyhtb3VzZUNsaWNrUG9zaXRpb24ucmlnaHQgKyBkZWx0YVgsIGJvdW5kcy5taW5SaWdodCwgYm91bmRzLm1heFJpZ2h0KQoJCQljb25zdCBib3R0b20gPSByZXN0cmljdFRvQm91bmRzKG1vdXNlQ2xpY2tQb3NpdGlvbi5ib3R0b20gKyBkZWx0YVksIGJvdW5kcy5taW5Cb3R0b20sIGJvdW5kcy5tYXhCb3R0b20pCgkJCXRoaXMubGVmdCA9IGxlZnQKCQkJdGhpcy50b3AgPSB0b3AKCQkJdGhpcy5yaWdodCA9IHJpZ2h0CgkJCXRoaXMuYm90dG9tID0gYm90dG9tCgkJCS8vIHJlc2l6aW5nRm4KCQkJdGhpcy4kZW1pdCgncmVzaXppbmcnLCB0aGlzLmxlZnQsIHRoaXMudG9wLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCkKCgkJCWF3YWl0IHRoaXMuc25hcENoZWNrKCkKCQkJdGhpcy4kZW1pdCgnZHJhZ2dpbmcnLCB0aGlzLmxlZnQsIHRoaXMudG9wKQoJCX0sCgkJbW92ZUhvcml6b250YWxseSh2YWwpIHsKCQkJY29uc3QgW2RlbHRhWCwgX10gPSBzbmFwVG9HcmlkKHRoaXMuZ3JpZCwgdmFsLCB0aGlzLnRvcCwgdGhpcy5zY2FsZSkKCQkJY29uc3QgbGVmdCA9IHJlc3RyaWN0VG9Cb3VuZHMoZGVsdGFYLCB0aGlzLmJvdW5kcy5taW5MZWZ0LCB0aGlzLmJvdW5kcy5tYXhMZWZ0KQoJCQl0aGlzLmxlZnQgPSBsZWZ0CgkJCXRoaXMucmlnaHQgPSB0aGlzLnBhcmVudFdpZHRoIC0gdGhpcy53aWR0aCAtIGxlZnQKCQl9LAoJCW1vdmVWZXJ0aWNhbGx5KHZhbCkgewoJCQljb25zdCBbXywgZGVsdGFZXSA9IHNuYXBUb0dyaWQodGhpcy5ncmlkLCB0aGlzLmxlZnQsIHZhbCwgdGhpcy5zY2FsZSkKCQkJY29uc3QgdG9wID0gcmVzdHJpY3RUb0JvdW5kcyhkZWx0YVksIHRoaXMuYm91bmRzLm1pblRvcCwgdGhpcy5ib3VuZHMubWF4VG9wKQoJCQl0aGlzLnRvcCA9IHRvcAoJCQl0aGlzLmJvdHRvbSA9IHRoaXMucGFyZW50SGVpZ2h0IC0gdGhpcy5oZWlnaHQgLSB0b3AKCQl9LAoJCS8vIOaOp+WItuafhOenu+WKqAoJCWhhbmRsZVJlc2l6ZShlKSB7CgkJCWxldCBsZWZ0ID0gdGhpcy5sZWZ0CgkJCWxldCB0b3AgPSB0aGlzLnRvcAoJCQlsZXQgcmlnaHQgPSB0aGlzLnJpZ2h0CgkJCWxldCBib3R0b20gPSB0aGlzLmJvdHRvbQoKCQkJY29uc3QgbW91c2VDbGlja1Bvc2l0aW9uID0gdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24KCQkJY29uc3QgbG9ja0FzcGVjdFJhdGlvID0gdGhpcy5sb2NrQXNwZWN0UmF0aW8KCQkJY29uc3QgYXNwZWN0RmFjdG9yID0gdGhpcy5hc3BlY3RGYWN0b3IKCQkJCgkJCWNvbnN0IHRtcERlbHRhWCA9IG1vdXNlQ2xpY2tQb3NpdGlvbi5tb3VzZVggLSAoZS50b3VjaGVzID8gZS50b3VjaGVzWzBdLnBhZ2VYIDogZS5wYWdlWCkKCQkJY29uc3QgdG1wRGVsdGFZID0gbW91c2VDbGlja1Bvc2l0aW9uLm1vdXNlWSAtIChlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0ucGFnZVkgOiBlLnBhZ2VZKQoKCQkJaWYgKCF0aGlzLndpZHRoVG91Y2hlZCAmJiB0bXBEZWx0YVgpIHsKCQkJCXRoaXMud2lkdGhUb3VjaGVkID0gdHJ1ZQoJCQl9CgkJCWlmICghdGhpcy5oZWlnaHRUb3VjaGVkICYmIHRtcERlbHRhWSkgewoJCQkJdGhpcy5oZWlnaHRUb3VjaGVkID0gdHJ1ZQoJCQl9CgkJCWNvbnN0IFtkZWx0YVgsIGRlbHRhWV0gPSBzbmFwVG9HcmlkKHRoaXMuZ3JpZCwgdG1wRGVsdGFYLCB0bXBEZWx0YVksIHRoaXMuc2NhbGVSYXRpbykKCgkJCWlmICh0aGlzLmhhbmRsZS5pbmNsdWRlcygnYicpKSB7CgkJCQlib3R0b20gPSByZXN0cmljdFRvQm91bmRzKAoJCQkJCW1vdXNlQ2xpY2tQb3NpdGlvbi5ib3R0b20gKyBkZWx0YVksCgkJCQkJdGhpcy5ib3VuZHMubWluQm90dG9tLAoJCQkJCXRoaXMuYm91bmRzLm1heEJvdHRvbQoJCQkJKQoJCQkJaWYgKHRoaXMubG9ja0FzcGVjdFJhdGlvICYmIHRoaXMucmVzaXppbmdPblkpIHsKCQkJCQlyaWdodCA9IHRoaXMucmlnaHQgLSAodGhpcy5ib3R0b20gLSBib3R0b20pICogYXNwZWN0RmFjdG9yCgkJCQl9CgkJCX0gZWxzZSBpZiAodGhpcy5oYW5kbGUuaW5jbHVkZXMoJ3QnKSkgewoJCQkJdG9wID0gcmVzdHJpY3RUb0JvdW5kcygKCQkJCQltb3VzZUNsaWNrUG9zaXRpb24udG9wIC0gZGVsdGFZLAoJCQkJCXRoaXMuYm91bmRzLm1pblRvcCwKCQkJCQl0aGlzLmJvdW5kcy5tYXhUb3AKCQkJCSkKCQkJCWlmICh0aGlzLmxvY2tBc3BlY3RSYXRpbyAmJiB0aGlzLnJlc2l6aW5nT25ZKSB7CgkJCQkJbGVmdCA9IHRoaXMubGVmdCAtICh0aGlzLnRvcCAtIHRvcCkgKiBhc3BlY3RGYWN0b3IKCQkJCX0KCQkJfQoKCQkJaWYgKHRoaXMuaGFuZGxlLmluY2x1ZGVzKCdyJykpIHsKCQkJCXJpZ2h0ID0gcmVzdHJpY3RUb0JvdW5kcygKCQkJCQltb3VzZUNsaWNrUG9zaXRpb24ucmlnaHQgKyBkZWx0YVgsCgkJCQkJdGhpcy5ib3VuZHMubWluUmlnaHQsCgkJCQkJdGhpcy5ib3VuZHMubWF4UmlnaHQKCQkJCSkKCQkJCWlmICh0aGlzLmxvY2tBc3BlY3RSYXRpbyAmJiB0aGlzLnJlc2l6aW5nT25YKSB7CgkJCQkJYm90dG9tID0gdGhpcy5ib3R0b20gLSAodGhpcy5yaWdodCAtIHJpZ2h0KSAvIGFzcGVjdEZhY3RvcgoJCQkJfQoJCQl9IGVsc2UgaWYgKHRoaXMuaGFuZGxlLmluY2x1ZGVzKCdsJykpIHsKCQkJCWxlZnQgPSByZXN0cmljdFRvQm91bmRzKAoJCQkJCW1vdXNlQ2xpY2tQb3NpdGlvbi5sZWZ0IC0gZGVsdGFYLAoJCQkJCXRoaXMuYm91bmRzLm1pbkxlZnQsCgkJCQkJdGhpcy5ib3VuZHMubWF4TGVmdAoJCQkJKQoJCQkJaWYgKHRoaXMubG9ja0FzcGVjdFJhdGlvICYmIHRoaXMucmVzaXppbmdPblgpIHsKCQkJCQl0b3AgPSB0aGlzLnRvcCAtICh0aGlzLmxlZnQgLSBsZWZ0KSAvIGFzcGVjdEZhY3RvcgoJCQkJfQoJCQl9CgoJCQljb25zdCB3aWR0aCA9IGNvbXB1dGVXaWR0aCh0aGlzLnBhcmVudFdpZHRoLCBsZWZ0LCByaWdodCkKCQkJY29uc3QgaGVpZ2h0ID0gY29tcHV0ZUhlaWdodCh0aGlzLnBhcmVudEhlaWdodCwgdG9wLCBib3R0b20pCgkJCWlmICh0aGlzLm9uUmVzaXplKHRoaXMuaGFuZGxlLCBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpID09PSBmYWxzZSkgewoJCQkJcmV0dXJuCgkJCX0KCQkJdGhpcy5sZWZ0ID0gbGVmdAoJCQl0aGlzLnRvcCA9IHRvcAoJCQl0aGlzLnJpZ2h0ID0gcmlnaHQKCQkJdGhpcy5ib3R0b20gPSBib3R0b20KCQkJdGhpcy53aWR0aCA9IHdpZHRoCgkJCXRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkJCS8vIHJlc2l6aW5nRm4KCQkJdGhpcy4kZW1pdCgncmVzaXppbmcnLCB0aGlzLmxlZnQsIHRoaXMudG9wLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCkKCQl9LAoJCWNoYW5nZVdpZHRoKHZhbCkgewoJCQljb25zdCBbbmV3V2lkdGgsIF9dID0gc25hcFRvR3JpZCh0aGlzLmdyaWQsIHZhbCwgMCwgdGhpcy5zY2FsZSkKCQkJbGV0IHJpZ2h0ID0gcmVzdHJpY3RUb0JvdW5kcygKCQkJCSh0aGlzLnBhcmVudFdpZHRoIC0gbmV3V2lkdGggLSB0aGlzLmxlZnQpLAoJCQkJdGhpcy5ib3VuZHMubWluUmlnaHQsCgkJCQl0aGlzLmJvdW5kcy5tYXhSaWdodAoJCQkpCgkJCWxldCBib3R0b20gPSB0aGlzLmJvdHRvbQoJCQlpZiAodGhpcy5sb2NrQXNwZWN0UmF0aW8pIHsKCQkJCWJvdHRvbSA9IHRoaXMuYm90dG9tIC0gKHRoaXMucmlnaHQgLSByaWdodCkgLyB0aGlzLmFzcGVjdEZhY3RvcgoJCQl9CgkJCWNvbnN0IHdpZHRoID0gY29tcHV0ZVdpZHRoKHRoaXMucGFyZW50V2lkdGgsIHRoaXMubGVmdCwgcmlnaHQpCgkJCWNvbnN0IGhlaWdodCA9IGNvbXB1dGVIZWlnaHQodGhpcy5wYXJlbnRIZWlnaHQsIHRoaXMudG9wLCBib3R0b20pCgkJCXRoaXMucmlnaHQgPSByaWdodAoJCQl0aGlzLmJvdHRvbSA9IGJvdHRvbQoJCQl0aGlzLndpZHRoID0gd2lkdGgKCQkJdGhpcy5oZWlnaHQgPSBoZWlnaHQKCQl9LAoJCWNoYW5nZUhlaWdodCh2YWwpIHsKCQkJY29uc3QgW18sIG5ld0hlaWdodF0gPSBzbmFwVG9HcmlkKHRoaXMuZ3JpZCwgMCwgdmFsLCB0aGlzLnNjYWxlKQoJCQlsZXQgYm90dG9tID0gcmVzdHJpY3RUb0JvdW5kcygKCQkJCSh0aGlzLnBhcmVudEhlaWdodCAtIG5ld0hlaWdodCAtIHRoaXMudG9wKSwKCQkJCXRoaXMuYm91bmRzLm1pbkJvdHRvbSwKCQkJCXRoaXMuYm91bmRzLm1heEJvdHRvbQoJCQkpCgkJCWxldCByaWdodCA9IHRoaXMucmlnaHQKCQkJaWYgKHRoaXMubG9ja0FzcGVjdFJhdGlvKSB7CgkJCQlyaWdodCA9IHRoaXMucmlnaHQgLSAodGhpcy5ib3R0b20gLSBib3R0b20pICogdGhpcy5hc3BlY3RGYWN0b3IKCQkJfQoJCQljb25zdCB3aWR0aCA9IGNvbXB1dGVXaWR0aCh0aGlzLnBhcmVudFdpZHRoLCB0aGlzLmxlZnQsIHJpZ2h0KQoJCQljb25zdCBoZWlnaHQgPSBjb21wdXRlSGVpZ2h0KHRoaXMucGFyZW50SGVpZ2h0LCB0aGlzLnRvcCwgYm90dG9tKQoJCQl0aGlzLnJpZ2h0ID0gcmlnaHQKCQkJdGhpcy5ib3R0b20gPSBib3R0b20KCQkJdGhpcy53aWR0aCA9IHdpZHRoCgkJCXRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkJfSwKCQkvLyDku47mjqfliLbmn4Tmnb7lvIAKCQlhc3luYyBoYW5kbGVVcChlKSB7CgkJCXRoaXMuaGFuZGxlID0gbnVsbAoKCQkJLy8g5Yid5aeL5YyW6L6F5Yqp57q/5pWw5o2uCgkJCWNvbnN0IHRlbUFyciA9IG5ldyBBcnJheSgzKS5maWxsKHsKCQkJCWRpc3BsYXk6IGZhbHNlLAoJCQkJcG9zaXRpb246ICcnLAoJCQkJb3JpZ2luOiAnJywKCQkJCWxpbmVMZW5ndGg6ICcnCgkJCX0pCgkJCWNvbnN0IHJlZkxpbmUgPSB7CgkJCQl2TGluZTogW10sCgkJCQloTGluZTogW10KCQkJfQoJCQlmb3IgKGxldCBpIGluIHJlZkxpbmUpIHsKCQkJCXJlZkxpbmVbaV0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRlbUFycikpCgkJCX0KCgkJCWlmICh0aGlzLnJlc2l6aW5nKSB7CgkJCQl0aGlzLnJlc2l6aW5nID0gZmFsc2UKCQkJCWF3YWl0IHRoaXMuY29uZmxpY3RDaGVjaygpCgkJCQl0aGlzLiRlbWl0KCdyZWZMaW5lUGFyYW1zJywgcmVmTGluZSkKCQkJCXRoaXMuJGVtaXQoJ3Jlc2l6ZXN0b3AnLCB0aGlzLmxlZnQsIHRoaXMudG9wLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCkKCQkJfQoJCQlpZiAodGhpcy5kcmFnZ2luZykgewoJCQkJdGhpcy5kcmFnZ2luZyA9IGZhbHNlCgkJCQlhd2FpdCB0aGlzLmNvbmZsaWN0Q2hlY2soKQoJCQkJdGhpcy4kZW1pdCgncmVmTGluZVBhcmFtcycsIHJlZkxpbmUpCgkJCQl0aGlzLiRlbWl0KCdkcmFnc3RvcCcsIHRoaXMubGVmdCwgdGhpcy50b3ApCgkJCX0KCQkJdGhpcy5yZXNldEJvdW5kc0FuZE1vdXNlU3RhdGUoKQoJCQlyZW1vdmVFdmVudChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGV2ZW50c0Zvci5tb3ZlLCB0aGlzLmhhbmRsZVJlc2l6ZSkKCQl9LAoJCS8vIOaWsOWinuaWueazlSDihpPihpPihpMKCQkvLyDorr7nva7lsZ7mgKcKCQlzZXR0aW5nQXR0cmlidXRlKCkgewoJCQkvLyDorr7nva7lhrLnqoHmo4DmtYsKCQkJdGhpcy4kZWwuc2V0QXR0cmlidXRlKCdkYXRhLWlzLWNoZWNrJywgYCR7dGhpcy5pc0NvbmZsaWN0Q2hlY2t9YCkKCQkJLy8g6K6+572u5a+56b2Q5YWD57SgCgkJCXRoaXMuJGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1pcy1zbmFwJywgYCR7dGhpcy5zbmFwfWApCgkJfSwKCQkvLyDlhrLnqoHmo4DmtYsKCQljb25mbGljdENoZWNrKCkgewoJCQljb25zdCB0b3AgPSB0aGlzLnRvcAoJCQljb25zdCBsZWZ0ID0gdGhpcy5sZWZ0CgkJCWNvbnN0IHdpZHRoID0gdGhpcy53aWR0aAoJCQljb25zdCBoZWlnaHQgPSB0aGlzLmhlaWdodAoKCQkJaWYgKHRoaXMuaXNDb25mbGljdENoZWNrKSB7CgkJCQljb25zdCBub2RlcyA9IHRoaXMuJGVsLnBhcmVudE5vZGUuY2hpbGROb2RlcyAvLyDojrflj5blvZPliY3niLboioLngrnkuIvmiYDmnInlrZDoioLngrkKCQkJCWZvciAobGV0IGl0ZW0gb2Ygbm9kZXMpIHsKCQkJCQlpZiAoaXRlbS5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCAmJiAhaXRlbS5jbGFzc05hbWUuaW5jbHVkZXModGhpcy5jbGFzc05hbWVBY3RpdmUpICYmIGl0ZW0uZ2V0QXR0cmlidXRlKAoJCQkJCQkJJ2RhdGEtaXMtY2hlY2snKSAhPT0gbnVsbCAmJiBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1pcy1jaGVjaycpICE9PSAnZmFsc2UnKSB7CgkJCQkJCWNvbnN0IHR3ID0gaXRlbS5vZmZzZXRXaWR0aAoJCQkJCQljb25zdCB0aCA9IGl0ZW0ub2Zmc2V0SGVpZ2h0CgkJCQkJCS8vIOato+WImeiOt+WPlmxlZnTkuI5yaWdodAoJCQkJCQlsZXQgW3RsLCB0dF0gPSB0aGlzLmZvcm1hdFRyYW5zZm9ybVZhbChpdGVtLnN0eWxlLnRyYW5zZm9ybSkKCgkJCQkJCS8vIOW3puS4iuinkuS4juWPs+S4i+inkumHjeWPoAoJCQkJCQljb25zdCB0ZkFuZEJyID0gKHRvcCA+PSB0dCAmJiBsZWZ0ID49IHRsICYmIHR0ICsgdGggPiB0b3AgJiYgdGwgKyB0dyA+IGxlZnQpIHx8ICh0b3AgPD0gdHQgJiYgbGVmdCA8IHRsICYmIHRvcCArCgkJCQkJCQloZWlnaHQgPiB0dCAmJiBsZWZ0ICsgd2lkdGggPiB0bCkKCQkJCQkJLy8g5Y+z5LiK6KeS5LiO5bem5LiL6KeS6YeN5Y+gCgkJCQkJCWNvbnN0IGJyQW5kVGYgPSAobGVmdCA8PSB0bCAmJiB0b3AgPj0gdHQgJiYgbGVmdCArIHdpZHRoID4gdGwgJiYgdG9wIDwgdHQgKyB0aCkgfHwgKHRvcCA8IHR0ICYmIGxlZnQgPiB0bCAmJiB0b3AgKwoJCQkJCQkJaGVpZ2h0ID4gdHQgJiYgbGVmdCA8IHRsICsgdHcpCgkJCQkJCS8vIOS4i+i+ueS4juS4iui+uemHjeWPoAoJCQkJCQljb25zdCBiQW5kVCA9ICh0b3AgPD0gdHQgJiYgbGVmdCA+PSB0bCAmJiB0b3AgKyBoZWlnaHQgPiB0dCAmJiBsZWZ0IDwgdGwgKyB0dykgfHwgKHRvcCA+PSB0dCAmJiBsZWZ0IDw9IHRsICYmCgkJCQkJCQl0b3AgPCB0dCArIHRoICYmIGxlZnQgPiB0bCArIHR3KQoJCQkJCQkvLyDkuIrovrnkuI7kuIvovrnph43lj6DvvIjlrr3luqbkuI3kuIDmoLfvvIkKCQkJCQkJY29uc3QgdEFuZEIgPSAodG9wIDw9IHR0ICYmIGxlZnQgPj0gdGwgJiYgdG9wICsgaGVpZ2h0ID4gdHQgJiYgbGVmdCA8IHRsICsgdHcpIHx8ICh0b3AgPj0gdHQgJiYgbGVmdCA8PSB0bCAmJgoJCQkJCQkJdG9wIDwgdHQgKyB0aCAmJiBsZWZ0ID4gdGwgKyB0dykKCQkJCQkJLy8g5bem6L655LiO5Y+z6L656YeN5Y+gCgkJCQkJCWNvbnN0IGxBbmRSID0gKGxlZnQgPj0gdGwgJiYgdG9wID49IHR0ICYmIGxlZnQgPCB0bCArIHR3ICYmIHRvcCA8IHR0ICsgdGgpIHx8ICh0b3AgPiB0dCAmJiBsZWZ0IDw9IHRsICYmIGxlZnQgKwoJCQkJCQkJd2lkdGggPiB0bCAmJiB0b3AgPCB0dCArIHRoKQoJCQkJCQkvLyDlt6bovrnkuI7lj7Povrnph43lj6DvvIjpq5jluqbkuI3kuIDmoLfvvIkKCQkJCQkJY29uc3QgckFuZEwgPSAodG9wIDw9IHR0ICYmIGxlZnQgPj0gdGwgJiYgdG9wICsgaGVpZ2h0ID4gdHQgJiYgbGVmdCA8IHRsICsgdHcpIHx8ICh0b3AgPj0gdHQgJiYgbGVmdCA8PSB0bCAmJgoJCQkJCQkJdG9wIDwgdHQgKyB0aCAmJiBsZWZ0ICsgd2lkdGggPiB0bCkKCgkJCQkJCS8vIOWmguaenOWGsueqge+8jOWwseWwhuWbnumAgOWIsOenu+WKqOWJjeeahOS9jee9rgoJCQkJCQlpZiAodGZBbmRCciB8fCBickFuZFRmIHx8IGJBbmRUIHx8IHRBbmRCIHx8IGxBbmRSIHx8IHJBbmRMKSB7CgkJCQkJCQl0aGlzLnRvcCA9IHRoaXMubW91c2VDbGlja1Bvc2l0aW9uLnRvcAoJCQkJCQkJdGhpcy5sZWZ0ID0gdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24ubGVmdAoJCQkJCQkJdGhpcy5yaWdodCA9IHRoaXMubW91c2VDbGlja1Bvc2l0aW9uLnJpZ2h0CgkJCQkJCQl0aGlzLmJvdHRvbSA9IHRoaXMubW91c2VDbGlja1Bvc2l0aW9uLmJvdHRvbQoJCQkJCQkJdGhpcy53aWR0aCA9IHRoaXMubW91c2VDbGlja1Bvc2l0aW9uLncKCQkJCQkJCXRoaXMuaGVpZ2h0ID0gdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24uaAoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfSwKCQkvLyDmo4DmtYvlr7npvZDlhYPntKAKCQlhc3luYyBzbmFwQ2hlY2soKSB7CgkJCWxldCB3aWR0aCA9IHRoaXMud2lkdGgKCQkJbGV0IGhlaWdodCA9IHRoaXMuaGVpZ2h0CgkJCWlmICh0aGlzLnNuYXApIHsKCQkJCWxldCBhY3RpdmVMZWZ0ID0gdGhpcy5sZWZ0CgkJCQlsZXQgYWN0aXZlUmlnaHQgPSB0aGlzLmxlZnQgKyB3aWR0aAoJCQkJbGV0IGFjdGl2ZVRvcCA9IHRoaXMudG9wCgkJCQlsZXQgYWN0aXZlQm90dG9tID0gdGhpcy50b3AgKyBoZWlnaHQKCgkJCQkvLyDliJ3lp4vljJbovoXliqnnur/mlbDmja4KCQkJCWNvbnN0IHRlbUFyciA9IG5ldyBBcnJheSgzKS5maWxsKHsKCQkJCQlkaXNwbGF5OiBmYWxzZSwKCQkJCQlwb3NpdGlvbjogJycsCgkJCQkJb3JpZ2luOiAnJywKCQkJCQlsaW5lTGVuZ3RoOiAnJwoJCQkJfSkKCQkJCWNvbnN0IHJlZkxpbmUgPSB7CgkJCQkJdkxpbmU6IFtdLAoJCQkJCWhMaW5lOiBbXQoJCQkJfQoJCQkJZm9yIChsZXQgaSBpbiByZWZMaW5lKSB7CgkJCQkJcmVmTGluZVtpXSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGVtQXJyKSkKCQkJCX0KCgkJCQkvLyDojrflj5blvZPliY3niLboioLngrnkuIvmiYDmnInlrZDoioLngrkKCQkJCWNvbnN0IG5vZGVzID0gdGhpcy4kZWwucGFyZW50Tm9kZS5jaGlsZE5vZGVzCgoJCQkJbGV0IHRlbSA9IHsKCQkJCQl2YWx1ZTogewoJCQkJCQl4OiBbCgkJCQkJCQlbXSwKCQkJCQkJCVtdLAoJCQkJCQkJW10KCQkJCQkJXSwKCQkJCQkJeTogWwoJCQkJCQkJW10sCgkJCQkJCQlbXSwKCQkJCQkJCVtdCgkJCQkJCV0KCQkJCQl9LAoJCQkJCWRpc3BsYXk6IFtdLAoJCQkJCXBvc2l0aW9uOiBbXQoJCQkJfQoJCQkJY29uc3QgewoJCQkJCWdyb3VwV2lkdGgsCgkJCQkJZ3JvdXBIZWlnaHQsCgkJCQkJZ3JvdXBMZWZ0LAoJCQkJCWdyb3VwVG9wLAoJCQkJCWJsbgoJCQkJfSA9IGF3YWl0IHRoaXMuZ2V0QWN0aXZlQWxsKG5vZGVzKQoJCQkJaWYgKCFibG4pIHsKCQkJCQl3aWR0aCA9IGdyb3VwV2lkdGgKCQkJCQloZWlnaHQgPSBncm91cEhlaWdodAoJCQkJCWFjdGl2ZUxlZnQgPSBncm91cExlZnQKCQkJCQlhY3RpdmVSaWdodCA9IGdyb3VwTGVmdCArIGdyb3VwV2lkdGgKCQkJCQlhY3RpdmVUb3AgPSBncm91cFRvcAoJCQkJCWFjdGl2ZUJvdHRvbSA9IGdyb3VwVG9wICsgZ3JvdXBIZWlnaHQKCQkJCX0KCQkJCWZvciAobGV0IGl0ZW0gb2Ygbm9kZXMpIHsKCQkJCQlpZiAoaXRlbS5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCAmJiAhaXRlbS5jbGFzc05hbWUuaW5jbHVkZXModGhpcy5jbGFzc05hbWVBY3RpdmUpICYmIGl0ZW0uZ2V0QXR0cmlidXRlKAoJCQkJCQkJJ2RhdGEtaXMtc25hcCcpICE9PSBudWxsICYmIGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWlzLXNuYXAnKSAhPT0gJ2ZhbHNlJykgewoJCQkJCQljb25zdCB3ID0gaXRlbS5vZmZzZXRXaWR0aAoJCQkJCQljb25zdCBoID0gaXRlbS5vZmZzZXRIZWlnaHQKCQkJCQkJY29uc3QgW2wsIHRdID0gdGhpcy5mb3JtYXRUcmFuc2Zvcm1WYWwoaXRlbS5zdHlsZS50cmFuc2Zvcm0pCgkJCQkJCWNvbnN0IHIgPSBsICsgdyAvLyDlr7npvZDnm67moIdyaWdodAoJCQkJCQljb25zdCBiID0gdCArIGggLy8g5a+56b2Q55uu5qCH55qEYm90dG9tCgoJCQkJCQljb25zdCBoYyA9IE1hdGguYWJzKChhY3RpdmVUb3AgKyBoZWlnaHQgLyAyKSAtICh0ICsgaCAvIDIpKSA8PSB0aGlzLnNuYXBUb2xlcmFuY2UgLy8g5rC05bmz5Lit57q/CgkJCQkJCWNvbnN0IHZjID0gTWF0aC5hYnMoKGFjdGl2ZUxlZnQgKyB3aWR0aCAvIDIpIC0gKGwgKyB3IC8gMikpIDw9IHRoaXMuc25hcFRvbGVyYW5jZSAvLyDlnoLnm7TkuK3nur8KCgkJCQkJCWNvbnN0IHRzID0gTWF0aC5hYnModCAtIGFjdGl2ZUJvdHRvbSkgPD0gdGhpcy5zbmFwVG9sZXJhbmNlIC8vIOS7juS4iuWIsOS4iwoJCQkJCQljb25zdCBUUyA9IE1hdGguYWJzKGIgLSBhY3RpdmVCb3R0b20pIDw9IHRoaXMuc25hcFRvbGVyYW5jZSAvLyDku47kuIrliLDkuIsKCQkJCQkJY29uc3QgYnMgPSBNYXRoLmFicyh0IC0gYWN0aXZlVG9wKSA8PSB0aGlzLnNuYXBUb2xlcmFuY2UgLy8g5LuO5LiL5Yiw5LiKCgkJCQkJCWNvbnN0IEJTID0gTWF0aC5hYnMoYiAtIGFjdGl2ZVRvcCkgPD0gdGhpcy5zbmFwVG9sZXJhbmNlIC8vIOS7juS4i+WIsOS4igoKCQkJCQkJY29uc3QgbHMgPSBNYXRoLmFicyhsIC0gYWN0aXZlUmlnaHQpIDw9IHRoaXMuc25hcFRvbGVyYW5jZSAvLyDlpJblt6YKCQkJCQkJY29uc3QgTFMgPSBNYXRoLmFicyhyIC0gYWN0aXZlUmlnaHQpIDw9IHRoaXMuc25hcFRvbGVyYW5jZSAvLyDlpJblt6YKCQkJCQkJY29uc3QgcnMgPSBNYXRoLmFicyhsIC0gYWN0aXZlTGVmdCkgPD0gdGhpcy5zbmFwVG9sZXJhbmNlIC8vIOWkluWPswoJCQkJCQljb25zdCBSUyA9IE1hdGguYWJzKHIgLSBhY3RpdmVMZWZ0KSA8PSB0aGlzLnNuYXBUb2xlcmFuY2UgLy8g5aSW5Y+zCgoJCQkJCQl0ZW1bJ2Rpc3BsYXknXSA9IFt0cywgVFMsIGJzLCBCUywgaGMsIGhjLCBscywgTFMsIHJzLCBSUywgdmMsIHZjXQoJCQkJCQl0ZW1bJ3Bvc2l0aW9uJ10gPSBbdCwgYiwgdCwgYiwgdCArIGggLyAyLCB0ICsgaCAvIDIsIGwsIHIsIGwsIHIsIGwgKyB3IC8gMiwgbCArIHcgLyAyXQoKCQkJCQkJaWYgKHRzKSB7CgkJCQkJCQlpZiAoYmxuKSB7CgkJCQkJCQkJdGhpcy50b3AgPSB0IC0gaGVpZ2h0CgkJCQkJCQkJdGhpcy5ib3R0b20gPSB0aGlzLnBhcmVudEhlaWdodCAtIHRoaXMudG9wIC0gaGVpZ2h0CgkJCQkJCQl9CgkJCQkJCQl0ZW0udmFsdWUueVswXS5wdXNoKGwsIHIsIGFjdGl2ZUxlZnQsIGFjdGl2ZVJpZ2h0KQoJCQkJCQl9CgkJCQkJCWlmIChicykgewoJCQkJCQkJaWYgKGJsbikgewoJCQkJCQkJCXRoaXMudG9wID0gdAoJCQkJCQkJCXRoaXMuYm90dG9tID0gdGhpcy5wYXJlbnRIZWlnaHQgLSB0aGlzLnRvcCAtIGhlaWdodAoJCQkJCQkJfQoJCQkJCQkJdGVtLnZhbHVlLnlbMF0ucHVzaChsLCByLCBhY3RpdmVMZWZ0LCBhY3RpdmVSaWdodCkKCQkJCQkJfQoJCQkJCQlpZiAoVFMpIHsKCQkJCQkJCWlmIChibG4pIHsKCQkJCQkJCQl0aGlzLnRvcCA9IGIgLSBoZWlnaHQKCQkJCQkJCQl0aGlzLmJvdHRvbSA9IHRoaXMucGFyZW50SGVpZ2h0IC0gdGhpcy50b3AgLSBoZWlnaHQKCQkJCQkJCX0KCQkJCQkJCXRlbS52YWx1ZS55WzFdLnB1c2gobCwgciwgYWN0aXZlTGVmdCwgYWN0aXZlUmlnaHQpCgkJCQkJCX0KCQkJCQkJaWYgKEJTKSB7CgkJCQkJCQlpZiAoYmxuKSB7CgkJCQkJCQkJdGhpcy50b3AgPSBiCgkJCQkJCQkJdGhpcy5ib3R0b20gPSB0aGlzLnBhcmVudEhlaWdodCAtIHRoaXMudG9wIC0gaGVpZ2h0CgkJCQkJCQl9CgkJCQkJCQl0ZW0udmFsdWUueVsxXS5wdXNoKGwsIHIsIGFjdGl2ZUxlZnQsIGFjdGl2ZVJpZ2h0KQoJCQkJCQl9CgoJCQkJCQlpZiAobHMpIHsKCQkJCQkJCWlmIChibG4pIHsKCQkJCQkJCQl0aGlzLmxlZnQgPSBsIC0gd2lkdGgKCQkJCQkJCQl0aGlzLnJpZ2h0ID0gdGhpcy5wYXJlbnRXaWR0aCAtIHRoaXMubGVmdCAtIHdpZHRoCgkJCQkJCQl9CgkJCQkJCQl0ZW0udmFsdWUueFswXS5wdXNoKHQsIGIsIGFjdGl2ZVRvcCwgYWN0aXZlQm90dG9tKQoJCQkJCQl9CgkJCQkJCWlmIChycykgewoJCQkJCQkJaWYgKGJsbikgewoJCQkJCQkJCXRoaXMubGVmdCA9IGwKCQkJCQkJCQl0aGlzLnJpZ2h0ID0gdGhpcy5wYXJlbnRXaWR0aCAtIHRoaXMubGVmdCAtIHdpZHRoCgkJCQkJCQl9CgkJCQkJCQl0ZW0udmFsdWUueFswXS5wdXNoKHQsIGIsIGFjdGl2ZVRvcCwgYWN0aXZlQm90dG9tKQoJCQkJCQl9CgkJCQkJCWlmIChMUykgewoJCQkJCQkJaWYgKGJsbikgewoJCQkJCQkJCXRoaXMubGVmdCA9IHIgLSB3aWR0aAoJCQkJCQkJCXRoaXMucmlnaHQgPSB0aGlzLnBhcmVudFdpZHRoIC0gdGhpcy5sZWZ0IC0gd2lkdGgKCQkJCQkJCX0KCQkJCQkJCXRlbS52YWx1ZS54WzFdLnB1c2godCwgYiwgYWN0aXZlVG9wLCBhY3RpdmVCb3R0b20pCgkJCQkJCX0KCQkJCQkJaWYgKFJTKSB7CgkJCQkJCQlpZiAoYmxuKSB7CgkJCQkJCQkJdGhpcy5sZWZ0ID0gcgoJCQkJCQkJCXRoaXMucmlnaHQgPSB0aGlzLnBhcmVudFdpZHRoIC0gdGhpcy5sZWZ0IC0gd2lkdGgKCQkJCQkJCX0KCQkJCQkJCXRlbS52YWx1ZS54WzFdLnB1c2godCwgYiwgYWN0aXZlVG9wLCBhY3RpdmVCb3R0b20pCgkJCQkJCX0KCgkJCQkJCWlmIChoYykgewoJCQkJCQkJaWYgKGJsbikgewoJCQkJCQkJCXRoaXMudG9wID0gdCArIGggLyAyIC0gaGVpZ2h0IC8gMgoJCQkJCQkJCXRoaXMuYm90dG9tID0gdGhpcy5wYXJlbnRIZWlnaHQgLSB0aGlzLnRvcCAtIGhlaWdodAoJCQkJCQkJfQoJCQkJCQkJdGVtLnZhbHVlLnlbMl0ucHVzaChsLCByLCBhY3RpdmVMZWZ0LCBhY3RpdmVSaWdodCkKCQkJCQkJfQoJCQkJCQlpZiAodmMpIHsKCQkJCQkJCWlmIChibG4pIHsKCQkJCQkJCQl0aGlzLmxlZnQgPSBsICsgdyAvIDIgLSB3aWR0aCAvIDIKCQkJCQkJCQl0aGlzLnJpZ2h0ID0gdGhpcy5wYXJlbnRXaWR0aCAtIHRoaXMubGVmdCAtIHdpZHRoCgkJCQkJCQl9CgkJCQkJCQl0ZW0udmFsdWUueFsyXS5wdXNoKHQsIGIsIGFjdGl2ZVRvcCwgYWN0aXZlQm90dG9tKQoJCQkJCQl9CgkJCQkJCS8vIOi+heWKqee6v+WdkOagh+S4juaYr+WQpuaYvuekuihkaXNwbGF5KeWvueW6lOeahOaVsOe7hCzmmJPkuo7lvqrnjq/pgY3ljoYKCQkJCQkJY29uc3QgYXJyVGVtID0gWzAsIDEsIDAsIDEsIDIsIDIsIDAsIDEsIDAsIDEsIDIsIDJdCgkJCQkJCWZvciAobGV0IGkgPSAwOyBpIDw9IGFyclRlbS5sZW5ndGg7IGkrKykgewoJCQkJCQkJLy8g5YmNNuS4ulnovoXliqnnur8s5ZCONuS4uljovoXliqnnur8KCQkJCQkJCWNvbnN0IHhvcnkgPSBpIDwgNiA/ICd5JyA6ICd4JwoJCQkJCQkJY29uc3QgaG9ydiA9IGkgPCA2ID8gJ2hMaW5lJyA6ICd2TGluZScKCQkJCQkJCWlmICh0ZW0uZGlzcGxheVtpXSkgewoJCQkJCQkJCWNvbnN0IHsKCQkJCQkJCQkJb3JpZ2luLAoJCQkJCQkJCQlsZW5ndGgKCQkJCQkJCQl9ID0gdGhpcy5jYWxjTGluZVZhbHVlcyh0ZW0udmFsdWVbeG9yeV1bYXJyVGVtW2ldXSkKCQkJCQkJCQlyZWZMaW5lW2hvcnZdW2FyclRlbVtpXV0uZGlzcGxheSA9IHRlbS5kaXNwbGF5W2ldCgkJCQkJCQkJcmVmTGluZVtob3J2XVthcnJUZW1baV1dLnBvc2l0aW9uID0gdGVtLnBvc2l0aW9uW2ldICsgJ3B4JwoJCQkJCQkJCXJlZkxpbmVbaG9ydl1bYXJyVGVtW2ldXS5vcmlnaW4gPSBvcmlnaW4KCQkJCQkJCQlyZWZMaW5lW2hvcnZdW2FyclRlbVtpXV0ubGluZUxlbmd0aCA9IGxlbmd0aAoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJdGhpcy4kZW1pdCgncmVmTGluZVBhcmFtcycsIHJlZkxpbmUpCgkJCX0KCQl9LAoJCWNhbGNMaW5lVmFsdWVzKGFycikgewoJCQljb25zdCBsZW5ndGggPSBNYXRoLm1heCguLi5hcnIpIC0gTWF0aC5taW4oLi4uYXJyKSArICdweCcKCQkJY29uc3Qgb3JpZ2luID0gTWF0aC5taW4oLi4uYXJyKSArICdweCcKCQkJcmV0dXJuIHsKCQkJCWxlbmd0aCwKCQkJCW9yaWdpbgoJCQl9CgkJfSwKCQlhc3luYyBnZXRBY3RpdmVBbGwobm9kZXMpIHsKCQkJY29uc3QgYWN0aXZlQWxsID0gW10KCQkJY29uc3QgWEFycmF5ID0gW10KCQkJY29uc3QgWUFycmF5ID0gW10KCQkJbGV0IGdyb3VwV2lkdGggPSAwCgkJCWxldCBncm91cEhlaWdodCA9IDAKCQkJbGV0IGdyb3VwTGVmdCA9IDAKCQkJbGV0IGdyb3VwVG9wID0gMAoJCQlmb3IgKGxldCBpdGVtIG9mIG5vZGVzKSB7CgkJCQlpZiAoaXRlbS5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCAmJiBpdGVtLmNsYXNzTmFtZS5pbmNsdWRlcyh0aGlzLmNsYXNzTmFtZUFjdGl2ZSkpIHsKCQkJCQlhY3RpdmVBbGwucHVzaChpdGVtKQoJCQkJfQoJCQl9CgkJCWNvbnN0IEFsbExlbmd0aCA9IGFjdGl2ZUFsbC5sZW5ndGgKCQkJaWYgKEFsbExlbmd0aCA+IDEpIHsKCQkJCWZvciAobGV0IGkgb2YgYWN0aXZlQWxsKSB7CgkJCQkJY29uc3QgbCA9IGkub2Zmc2V0TGVmdAoJCQkJCWNvbnN0IHIgPSBsICsgaS5vZmZzZXRXaWR0aAoJCQkJCWNvbnN0IHQgPSBpLm9mZnNldFRvcAoJCQkJCWNvbnN0IGIgPSB0ICsgaS5vZmZzZXRIZWlnaHQKCQkJCQlYQXJyYXkucHVzaCh0LCBiKQoJCQkJCVlBcnJheS5wdXNoKGwsIHIpCgkJCQl9CgkJCQlncm91cFdpZHRoID0gTWF0aC5tYXgoLi4uWUFycmF5KSAtIE1hdGgubWluKC4uLllBcnJheSkKCQkJCWdyb3VwSGVpZ2h0ID0gTWF0aC5tYXgoLi4uWEFycmF5KSAtIE1hdGgubWluKC4uLlhBcnJheSkKCQkJCWdyb3VwTGVmdCA9IE1hdGgubWluKC4uLllBcnJheSkKCQkJCWdyb3VwVG9wID0gTWF0aC5taW4oLi4uWEFycmF5KQoJCQl9CgkJCWNvbnN0IGJsbiA9IEFsbExlbmd0aCA9PT0gMQoJCQlyZXR1cm4gewoJCQkJZ3JvdXBXaWR0aCwKCQkJCWdyb3VwSGVpZ2h0LAoJCQkJZ3JvdXBMZWZ0LAoJCQkJZ3JvdXBUb3AsCgkJCQlibG4KCQkJfQoJCX0sCgkJLy8g5q2j5YiZ6I635Y+WbGVmdOS4jnRvcAoJCWZvcm1hdFRyYW5zZm9ybVZhbChzdHJpbmcpIHsKCQkJbGV0IFtsZWZ0LCB0b3BdID0gc3RyaW5nLnJlcGxhY2UoL1teMC05XC0sXS9nLCAnJykuc3BsaXQoJywnKQoJCQlpZiAodG9wID09PSB1bmRlZmluZWQpIHRvcCA9IDAKCQkJcmV0dXJuIFsrbGVmdCwgK3RvcF0KCQl9Cgl9LAoJY29tcHV0ZWQ6IHsKCQloYW5kbGVTdHlsZSgpIHsKCQkJcmV0dXJuIChzdGljaykgPT4gewoJCQkJaWYgKCF0aGlzLmhhbmRsZUluZm8uc3dpdGNoKSByZXR1cm4gewoJCQkJCWRpc3BsYXk6IHRoaXMuZW5hYmxlZCA/ICdibG9jaycgOiAnbm9uZScKCQkJCX0KCgkJCQljb25zdCBzaXplID0gKHRoaXMuaGFuZGxlSW5mby5zaXplIC8gdGhpcy5zY2FsZVJhdGlvKS50b0ZpeGVkKDIpCgkJCQljb25zdCBvZmZzZXQgPSAodGhpcy5oYW5kbGVJbmZvLm9mZnNldCAvIHRoaXMuc2NhbGVSYXRpbykudG9GaXhlZCgyKQoJCQkJY29uc3QgY2VudGVyID0gKHNpemUgLyAyKS50b0ZpeGVkKDIpCgoJCQkJY29uc3Qgc3R5bGVNYXAgPSB7CgkJCQkJdGw6IHsKCQkJCQkJdG9wOiBgJHtvZmZzZXR9cHhgLAoJCQkJCQlsZWZ0OiBgJHtvZmZzZXR9cHhgCgkJCQkJfSwKCQkJCQl0bTogewoJCQkJCQl0b3A6IGAke29mZnNldH1weGAsCgkJCQkJCWxlZnQ6IGBjYWxjKDUwJSAtICR7Y2VudGVyfXB4KWAKCQkJCQl9LAoJCQkJCXRyOiB7CgkJCQkJCXRvcDogYCR7b2Zmc2V0fXB4YCwKCQkJCQkJcmlnaHQ6IGAke29mZnNldH1weGAKCQkJCQl9LAoJCQkJCW1yOiB7CgkJCQkJCXRvcDogYGNhbGMoNTAlIC0gJHtjZW50ZXJ9cHgpYCwKCQkJCQkJcmlnaHQ6IGAke29mZnNldH1weGAKCQkJCQl9LAoJCQkJCWJyOiB7CgkJCQkJCWJvdHRvbTogYCR7b2Zmc2V0fXB4YCwKCQkJCQkJcmlnaHQ6IGAke29mZnNldH1weGAKCQkJCQl9LAoJCQkJCWJtOiB7CgkJCQkJCWJvdHRvbTogYCR7b2Zmc2V0fXB4YCwKCQkJCQkJcmlnaHQ6IGBjYWxjKDUwJSAtICR7Y2VudGVyfXB4KWAKCQkJCQl9LAoJCQkJCWJsOiB7CgkJCQkJCWJvdHRvbTogYCR7b2Zmc2V0fXB4YCwKCQkJCQkJbGVmdDogYCR7b2Zmc2V0fXB4YAoJCQkJCX0sCgkJCQkJbWw6IHsKCQkJCQkJdG9wOiBgY2FsYyg1MCUgLSAke2NlbnRlcn1weClgLAoJCQkJCQlsZWZ0OiBgJHtvZmZzZXR9cHhgCgkJCQkJfQoJCQkJfQoJCQkJY29uc3Qgc3RpY2tTdHlsZSA9IHsKCQkJCQl3aWR0aDogYCR7c2l6ZX1weGAsCgkJCQkJaGVpZ2h0OiBgJHtzaXplfXB4YCwKCQkJCQl0b3A6IHN0eWxlTWFwW3N0aWNrXS50b3AsCgkJCQkJbGVmdDogc3R5bGVNYXBbc3RpY2tdLmxlZnQsCgkJCQkJcmlnaHQ6IHN0eWxlTWFwW3N0aWNrXS5yaWdodCwKCQkJCQlib3R0b206IHN0eWxlTWFwW3N0aWNrXS5ib3R0b20KCQkJCX0KCQkJCXN0aWNrU3R5bGUuZGlzcGxheSA9IHRoaXMuZW5hYmxlZCA/ICdibG9jaycgOiAnbm9uZScKCQkJCXJldHVybiBzdGlja1N0eWxlCgkJCX0KCQl9LAoJCXN0eWxlKCkgewoJCQlyZXR1cm4gewoJCQkJdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7dGhpcy5sZWZ0fXB4LCAke3RoaXMudG9wfXB4KWAsCgkJCQl3aWR0aDogdGhpcy5jb21wdXRlZFdpZHRoLAoJCQkJaGVpZ2h0OiB0aGlzLmNvbXB1dGVkSGVpZ2h0LAoJCQkJJ2JhY2tncm91bmQtY29sb3InOiB0aGlzLmJnQ2xyLAoJCQkJJ2JhY2tncm91bmQtaW1hZ2UnOiBgdXJsKCR7IHRoaXMuYmdJbWFnZSB9KWAsCgkJCQknYmFja2dyb3VuZC1zaXplJzogdGhpcy5iZ1NpemUgfHwgJzEwMCUgMTAwJScsCgkJCQl6SW5kZXg6IHRoaXMuekluZGV4LAoJCQkJLi4uKHRoaXMuZHJhZ2dpbmcgJiYgdGhpcy5kaXNhYmxlVXNlclNlbGVjdCA/IHVzZXJTZWxlY3ROb25lIDogdXNlclNlbGVjdEF1dG8pCgkJCX0KCQl9LAoJCS8vIOaOp+WItuafhOaYvuekuuS4juWQpgoJCWFjdHVhbEhhbmRsZXMoKSB7CgkJCWlmICghdGhpcy5yZXNpemFibGUpIHJldHVybiBbXQoKCQkJcmV0dXJuIHRoaXMuaGFuZGxlcwoJCX0sCgkJY29tcHV0ZWRXaWR0aCgpIHsKCQkJaWYgKHRoaXMudyA9PT0gJ2F1dG8nKSB7CgkJCQlpZiAoIXRoaXMud2lkdGhUb3VjaGVkKSB7CgkJCQkJcmV0dXJuICdhdXRvJwoJCQkJfQoJCQl9CgkJCXJldHVybiB0aGlzLndpZHRoICsgJ3B4JwoJCX0sCgkJY29tcHV0ZWRIZWlnaHQoKSB7CgkJCWlmICh0aGlzLmggPT09ICdhdXRvJykgewoJCQkJaWYgKCF0aGlzLmhlaWdodFRvdWNoZWQpIHsKCQkJCQlyZXR1cm4gJ2F1dG8nCgkJCQl9CgkJCX0KCQkJcmV0dXJuIHRoaXMuaGVpZ2h0ICsgJ3B4JwoJCX0sCgkJcmVzaXppbmdPblgoKSB7CgkJCXJldHVybiAoQm9vbGVhbih0aGlzLmhhbmRsZSkgJiYgKHRoaXMuaGFuZGxlLmluY2x1ZGVzKCdsJykgfHwgdGhpcy5oYW5kbGUuaW5jbHVkZXMoJ3InKSkpCgkJfSwKCQlyZXNpemluZ09uWSgpIHsKCQkJcmV0dXJuIChCb29sZWFuKHRoaXMuaGFuZGxlKSAmJiAodGhpcy5oYW5kbGUuaW5jbHVkZXMoJ3QnKSB8fCB0aGlzLmhhbmRsZS5pbmNsdWRlcygnYicpKSkKCQl9LAoJCWlzQ29ybmVySGFuZGxlKCkgewoJCQlyZXR1cm4gKEJvb2xlYW4odGhpcy5oYW5kbGUpICYmIFsndGwnLCAndHInLCAnYnInLCAnYmwnXS5pbmNsdWRlcyh0aGlzLmhhbmRsZSkpCgkJfQoJfSwKCgl3YXRjaDogewoJCWFjdGl2ZSh2YWwpIHsKCQkJdGhpcy5lbmFibGVkID0gdmFsCgoJCQlpZiAodmFsKSB7CgkJCQl0aGlzLiRlbWl0KCdhY3RpdmF0ZWQnKQoJCQl9IGVsc2UgewoJCQkJdGhpcy4kZW1pdCgnZGVhY3RpdmF0ZWQnKQoJCQl9CgkJfSwKCQl6KHZhbCkgewoJCQlpZiAodmFsID49IDAgfHwgdmFsID09PSAnYXV0bycpIHsKCQkJCXRoaXMuekluZGV4ID0gdmFsCgkJCX0KCQl9LAoJCXgodmFsKSB7CgkJCWlmICh0aGlzLnJlc2l6aW5nIHx8IHRoaXMuZHJhZ2dpbmcpIHsKCQkJCXJldHVybgoJCQl9CgoJCQlpZiAodGhpcy5wYXJlbnQpIHsKCQkJCXRoaXMuYm91bmRzID0gdGhpcy5jYWxjRHJhZ0xpbWl0cygpCgkJCX0KCgkJCXRoaXMubW92ZUhvcml6b250YWxseSh2YWwpCgkJfSwKCQl5KHZhbCkgewoJCQlpZiAodGhpcy5yZXNpemluZyB8fCB0aGlzLmRyYWdnaW5nKSB7CgkJCQlyZXR1cm4KCQkJfQoKCQkJaWYgKHRoaXMucGFyZW50KSB7CgkJCQl0aGlzLmJvdW5kcyA9IHRoaXMuY2FsY0RyYWdMaW1pdHMoKQoJCQl9CgoJCQl0aGlzLm1vdmVWZXJ0aWNhbGx5KHZhbCkKCQl9LAoJCWxvY2tBc3BlY3RSYXRpbyh2YWwpIHsKCQkJaWYgKHZhbCkgewoJCQkJdGhpcy5hc3BlY3RGYWN0b3IgPSB0aGlzLndpZHRoIC8gdGhpcy5oZWlnaHQKCQkJfSBlbHNlIHsKCQkJCXRoaXMuYXNwZWN0RmFjdG9yID0gdW5kZWZpbmVkCgkJCX0KCQl9LAoJCW1pbldpZHRoKHZhbCkgewoJCQlpZiAodmFsID4gMCAmJiB2YWwgPD0gdGhpcy53aWR0aCkgewoJCQkJdGhpcy5taW5XID0gdmFsCgkJCX0KCQl9LAoJCW1pbkhlaWdodCh2YWwpIHsKCQkJaWYgKHZhbCA+IDAgJiYgdmFsIDw9IHRoaXMuaGVpZ2h0KSB7CgkJCQl0aGlzLm1pbkggPSB2YWwKCQkJfQoJCX0sCgkJbWF4V2lkdGgodmFsKSB7CgkJCXRoaXMubWF4VyA9IHZhbAoJCX0sCgkJbWF4SGVpZ2h0KHZhbCkgewoJCQl0aGlzLm1heEggPSB2YWwKCQl9LAoJCXcodmFsKSB7CgkJCWlmICh0aGlzLnJlc2l6aW5nIHx8IHRoaXMuZHJhZ2dpbmcpIHsKCQkJCXJldHVybgoJCQl9CgoJCQlpZiAodGhpcy5wYXJlbnQpIHsKCQkJCXRoaXMuYm91bmRzID0gdGhpcy5jYWxjUmVzaXplTGltaXRzKCkKCQkJfQoKCQkJdGhpcy5jaGFuZ2VXaWR0aCh2YWwpCgkJfSwKCQloKHZhbCkgewoJCQlpZiAodGhpcy5yZXNpemluZyB8fCB0aGlzLmRyYWdnaW5nKSB7CgkJCQlyZXR1cm4KCQkJfQoKCQkJaWYgKHRoaXMucGFyZW50KSB7CgkJCQl0aGlzLmJvdW5kcyA9IHRoaXMuY2FsY1Jlc2l6ZUxpbWl0cygpCgkJCX0KCgkJCXRoaXMuY2hhbmdlSGVpZ2h0KHZhbCkKCQl9Cgl9Cn0K"},{"version":3,"sources":["vue-resizable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"vue-resizable.vue","sourceRoot":"src/components/resizable","sourcesContent":["<template>\r\n\t<div :style=\"style\" :class=\"[{\r\n\t\t  [classNameActive]: enabled,\r\n\t\t  [classNameDragging]: dragging,\r\n\t\t  [classNameResizing]: resizing,\r\n\t\t  [classNameDraggable]: draggable,\r\n\t\t  [classNameResizable]: resizable\r\n\t\t}, className]\"\r\n\t\t@mousedown.stop=\"elementMouseDown\"\n\t\t@touchstart=\"elementTouchDown\"\n\t>\r\n\t\t<div \n\t\t\tv-for=\"handle in actualHandles\" \n\t\t\t:key=\"handle\" \n\t\t\t:class=\"[classNameHandle, classNameHandle + '-' + handle]\" \n\t\t\t:style=\"handleStyle(handle)\"\r\n\t\t\t@mousedown.stop.prevent=\"handleDown(handle, $event)\" \n\t\t\t@touchstart.stop.prevent=\"handleTouchDown(handle, $event)\"\n\t\t>\r\n\t\t\t<slot :name=\"handle\"></slot>\r\n\t\t</div>\r\n\t\t<slot></slot>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmatchesSelectorToParentElements,\r\n\t\tgetComputedSize,\r\n\t\taddEvent,\r\n\t\tremoveEvent\r\n\t} from '@/utils/resizable/dom'\r\n\timport {\r\n\t\tcomputeWidth,\r\n\t\tcomputeHeight,\r\n\t\trestrictToBounds,\r\n\t\tsnapToGrid\r\n\t} from '@/utils/resizable/fns'\r\n\r\n\tconst events = {\r\n\t\tmouse: {\r\n\t\t\tstart: 'mousedown',\r\n\t\t\tmove: 'mousemove',\r\n\t\t\tstop: 'mouseup'\r\n\t\t},\r\n\t\ttouch: {\r\n\t\t\tstart: 'touchstart',\r\n\t\t\tmove: 'touchmove',\r\n\t\t\tstop: 'touchend'\r\n\t\t}\r\n\t}\r\n\r\n\t// 禁止用户选取\r\n\tconst userSelectNone = {\r\n\t\tuserSelect: 'none',\r\n\t\tMozUserSelect: 'none',\r\n\t\tWebkitUserSelect: 'none',\r\n\t\tMsUserSelect: 'none'\r\n\t}\r\n\t// 用户选中自动\r\n\tconst userSelectAuto = {\r\n\t\tuserSelect: 'auto',\r\n\t\tMozUserSelect: 'auto',\r\n\t\tWebkitUserSelect: 'auto',\r\n\t\tMsUserSelect: 'auto'\r\n\t}\r\n\r\n\tlet eventsFor = events.mouse\r\n\r\n\texport default {\r\n\t\treplace: true,\r\n\t\tname: 'vue-resizable',\r\n\t\tprops: {\r\n\t\t\tclassName: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'vdr'\r\n\t\t\t},\r\n\t\t\tclassNameDraggable: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'draggable'\r\n\t\t\t},\r\n\t\t\tclassNameResizable: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'resizable'\r\n\t\t\t},\r\n\t\t\tclassNameDragging: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'dragging'\r\n\t\t\t},\r\n\t\t\tclassNameResizing: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'resizing'\r\n\t\t\t},\r\n\t\t\tclassNameActive: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'active'\r\n\t\t\t},\r\n\t\t\tclassNameHandle: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'handle'\r\n\t\t\t},\r\n\t\t\tdisableUserSelect: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tenableNativeDrag: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tpreventDeactivation: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tactive: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tdraggable: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tresizable: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t// 锁定宽高比\r\n\t\t\tlockAspectRatio: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tw: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 200,\r\n\t\t\t\tvalidator: (val) => {\r\n\t\t\t\t\tif (typeof val === 'number') {\r\n\t\t\t\t\t\treturn val > 0\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn val === 'auto'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\th: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 200,\r\n\t\t\t\tvalidator: (val) => {\r\n\t\t\t\t\tif (typeof val === 'number') {\r\n\t\t\t\t\t\treturn val > 0\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn val === 'auto'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tminWidth: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 10,\r\n\t\t\t\tvalidator: (val) => val >= 0\r\n\t\t\t},\r\n\t\t\tminHeight: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 10,\r\n\t\t\t\tvalidator: (val) => val >= 0\r\n\t\t\t},\r\n\t\t\tmaxWidth: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: null,\r\n\t\t\t\tvalidator: (val) => val >= 0\r\n\t\t\t},\r\n\t\t\tmaxHeight: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: null,\r\n\t\t\t\tvalidator: (val) => val >= 0\r\n\t\t\t},\r\n\t\t\tx: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\ty: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tz: {\r\n\t\t\t\ttype: [String, Number],\r\n\t\t\t\tdefault: 'auto',\r\n\t\t\t\tvalidator: (val) => (typeof val === 'string' ? val === 'auto' : val >= 0)\r\n\t\t\t},\n\t\t\tbgClr: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: 'rgba(0, 0, 0, 0)'\n\t\t\t},\n\t\t\tbgImage: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\tbgSize: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\t// 组件内容（组件ID）\n\t\t\teleId: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: ''\n\t\t\t},\r\n\t\t\thandles: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: () => ['tl', 'tm', 'tr', 'mr', 'br', 'bm', 'bl', 'ml'],\r\n\t\t\t\tvalidator: (val) => {\r\n\t\t\t\t\tconst s = new Set(['tl', 'tm', 'tr', 'mr', 'br', 'bm', 'bl', 'ml'])\r\n\r\n\t\t\t\t\treturn new Set(val.filter(h => s.has(h))).size === val.length\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdragHandle: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: null\r\n\t\t\t},\r\n\t\t\tdragCancel: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: null\r\n\t\t\t},\r\n\t\t\taxis: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'both',\r\n\t\t\t\tvalidator: (val) => ['x', 'y', 'both'].includes(val)\r\n\t\t\t},\r\n\t\t\tgrid: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: () => [1, 1]\r\n\t\t\t},\r\n\t\t\tparent: {\r\n\t\t\t\ttype: [Boolean, String],\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tonDragStart: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: () => true\r\n\t\t\t},\r\n\t\t\tonDrag: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: () => true\r\n\t\t\t},\r\n\t\t\tonResizeStart: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: () => true\r\n\t\t\t},\r\n\t\t\tonResize: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: () => true\r\n\t\t\t},\r\n\t\t\t// 冲突检测\r\n\t\t\tisConflictCheck: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\t// 元素对齐\r\n\t\t\tsnap: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\t// 当调用对齐时，用来设置组件与组件之间的对齐距离，以像素为单位\r\n\t\t\tsnapTolerance: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 5,\r\n\t\t\t\tvalidator: function(val) {\r\n\t\t\t\t\treturn typeof val === 'number'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 缩放比例\r\n\t\t\tscaleRatio: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 1,\r\n\t\t\t\tvalidator: (val) => typeof val === 'number'\r\n\t\t\t},\r\n\t\t\t// handle是否缩放\r\n\t\t\thandleInfo: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: () => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tsize: 6,\r\n\t\t\t\t\t\toffset: -5,\r\n\t\t\t\t\t\tswitch: true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdata: function() {\r\n\t\t\treturn {\r\n\t\t\t\tleft: this.x,\r\n\t\t\t\ttop: this.y,\r\n\t\t\t\tright: null,\r\n\t\t\t\tbottom: null,\r\n\r\n\t\t\t\twidth: null,\r\n\t\t\t\theight: null,\r\n\t\t\t\twidthTouched: false,\r\n\t\t\t\theightTouched: false,\r\n\t\t\t\taspectFactor: null,\r\n\r\n\t\t\t\tparentWidth: null,\r\n\t\t\t\tparentHeight: null,\r\n\r\n\t\t\t\tminW: this.minWidth,\r\n\t\t\t\tminH: this.minHeight,\r\n\r\n\t\t\t\tmaxW: this.maxWidth,\r\n\t\t\t\tmaxH: this.maxHeight,\r\n\r\n\t\t\t\thandle: null,\r\n\t\t\t\tenabled: this.active,\r\n\t\t\t\tresizing: false,\r\n\t\t\t\tdragging: false,\r\n\t\t\t\tzIndex: this.z\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcreated: function() {\r\n\t\t\t// eslint-disable-next-line 无效的prop：minWidth不能大于maxWidth\r\n\t\t\tif (this.maxWidth && this.minWidth > this.maxWidth) console.warn(\r\n\t\t\t\t'[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth')\r\n\t\t\t// eslint-disable-next-line 无效prop：minHeight不能大于maxHeight'\r\n\t\t\tif (this.maxWidth && this.minHeight > this.maxHeight) console.warn(\r\n\t\t\t\t'[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight')\r\n\r\n\t\t\tthis.resetBoundsAndMouseState()\r\n\t\t},\r\n\t\tmounted: function() {\r\n\t\t\tif (!this.enableNativeDrag) {\r\n\t\t\t\tthis.$el.ondragstart = () => false\r\n\t\t\t}\r\n\r\n\t\t\tconst [parentWidth, parentHeight] = this.getParentSize()\r\n\r\n\t\t\tthis.parentWidth = parentWidth\r\n\t\t\tthis.parentHeight = parentHeight\r\n\t\t\tconst [width, height] = getComputedSize(this.$el)\r\n\t\t\tthis.aspectFactor = (this.w !== 'auto' ? this.w : width) / (this.h !== 'auto' ? this.h : height)\r\n\t\t\tthis.width = this.w !== 'auto' ? this.w : width\r\n\t\t\tthis.height = this.h !== 'auto' ? this.h : height\r\n\t\t\tthis.right = this.parentWidth - this.width - this.left\r\n\t\t\tthis.bottom = this.parentHeight - this.height - this.top\r\n\r\n\t\t\tthis.settingAttribute()\r\n\r\n\t\t\taddEvent(document.documentElement, 'mousedown', this.deselect)\r\n\t\t\taddEvent(document.documentElement, 'touchend touchcancel', this.deselect)\r\n\r\n\t\t\taddEvent(window, 'resize', this.checkParentSize)\r\n\t\t},\r\n\t\tbeforeDestroy: function() {\r\n\t\t\tremoveEvent(document.documentElement, 'mousedown', this.deselect)\r\n\t\t\tremoveEvent(document.documentElement, 'touchstart', this.handleUp)\r\n\t\t\tremoveEvent(document.documentElement, 'mousemove', this.move)\r\n\t\t\tremoveEvent(document.documentElement, 'touchmove', this.move)\r\n\t\t\tremoveEvent(document.documentElement, 'mouseup', this.handleUp)\r\n\t\t\tremoveEvent(document.documentElement, 'touchend touchcancel', this.deselect)\r\n\r\n\t\t\tremoveEvent(window, 'resize', this.checkParentSize)\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t// 重置边界和鼠标状态\r\n\t\t\tresetBoundsAndMouseState() {\r\n\t\t\t\tthis.mouseClickPosition = {\r\n\t\t\t\t\tmouseX: 0,\r\n\t\t\t\t\tmouseY: 0,\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t\tw: 0,\r\n\t\t\t\t\th: 0\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.bounds = {\r\n\t\t\t\t\tminLeft: null,\r\n\t\t\t\t\tmaxLeft: null,\r\n\t\t\t\t\tminRight: null,\r\n\t\t\t\t\tmaxRight: null,\r\n\t\t\t\t\tminTop: null,\r\n\t\t\t\t\tmaxTop: null,\r\n\t\t\t\t\tminBottom: null,\r\n\t\t\t\t\tmaxBottom: null\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 检查父元素大小\r\n\t\t\tcheckParentSize() {\r\n\t\t\t\tif (this.parent) {\r\n\t\t\t\t\tconst [newParentWidth, newParentHeight] = this.getParentSize()\r\n\t\t\t\t\t// 修复父元素改变大小后，组件resizing时活动异常\r\n\t\t\t\t\tthis.right = newParentWidth - this.width - this.left\r\n\t\t\t\t\tthis.bottom = newParentHeight - this.height - this.top\r\n\r\n\t\t\t\t\tthis.parentWidth = newParentWidth\r\n\t\t\t\t\tthis.parentHeight = newParentHeight\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 获取父元素大小\r\n\t\t\tgetParentSize() {\r\n\t\t\t\tif (this.parent === true) {\r\n\t\t\t\t\tconst style = window.getComputedStyle(this.$el.parentNode, null)\r\n\t\t\t\t\treturn [\r\n\t\t\t\t\t\tparseInt(style.getPropertyValue('width'), 10),\r\n\t\t\t\t\t\tparseInt(style.getPropertyValue('height'), 10)\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof this.parent === 'string') {\r\n\t\t\t\t\tconst parentNode = document.querySelector(this.parent)\r\n\t\t\t\t\tif (!(parentNode instanceof HTMLElement)) {\r\n\t\t\t\t\t\tthrow new Error(`The selector ${this.parent} does not match any element`)\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn [parentNode.offsetWidth, parentNode.offsetHeight]\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn [null, null]\r\n\t\t\t},\n\t\t\t// 元素触摸按下\r\n\t\t\telementTouchDown(e) {\r\n\t\t\t\teventsFor = events.touch\r\n\r\n\t\t\t\tthis.elementDown(e)\r\n\t\t\t},\r\n\t\t\telementMouseDown(e) {\n\t\t\t\t// mousedownFn\n\t\t\t\tthis.$emit('onSelectElement', this.eleId)\n\t\t\t\t\r\n\t\t\t\teventsFor = events.mouse\r\n\t\t\t\tthis.elementDown(e)\r\n\t\t\t},\r\n\t\t\t// 元素按下\r\n\t\t\telementDown(e) {\n\t\t\t\tif (e instanceof MouseEvent && e.which !== 1) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst target = e.target || e.srcElement\n\t\t\t\t\n\t\t\t\tif (this.$el.contains(target)) {\r\n\t\t\t\t\tif (this.onDragStart(e) === false) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t(this.dragHandle && !matchesSelectorToParentElements(target, this.dragHandle, this.$el)) ||\r\n\t\t\t\t\t\t(this.dragCancel && matchesSelectorToParentElements(target, this.dragCancel, this.$el))\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tthis.dragging = false\r\n\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!this.enabled) {\r\n\t\t\t\t\t\tthis.enabled = true\r\n\r\n\t\t\t\t\t\tthis.$emit('activated')\r\n\t\t\t\t\t\tthis.$emit('update:active', true)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.draggable) {\r\n\t\t\t\t\t\tthis.dragging = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.mouseClickPosition.mouseX = e.touches ? e.touches[0].pageX : e.pageX\r\n\t\t\t\t\tthis.mouseClickPosition.mouseY = e.touches ? e.touches[0].pageY : e.pageY\r\n\r\n\t\t\t\t\tthis.mouseClickPosition.left = this.left\r\n\t\t\t\t\tthis.mouseClickPosition.right = this.right\r\n\t\t\t\t\tthis.mouseClickPosition.top = this.top\r\n\t\t\t\t\tthis.mouseClickPosition.bottom = this.bottom\r\n\t\t\t\t\tthis.mouseClickPosition.w = this.width\r\n\t\t\t\t\tthis.mouseClickPosition.h = this.height\r\n\r\n\t\t\t\t\tif (this.parent) {\r\n\t\t\t\t\t\tthis.bounds = this.calcDragLimits()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\taddEvent(document.documentElement, eventsFor.move, this.move)\r\n\t\t\t\t\taddEvent(document.documentElement, eventsFor.stop, this.handleUp)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 计算移动范围\r\n\t\t\tcalcDragLimits() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tminLeft: this.left % this.grid[0],\r\n\t\t\t\t\tmaxLeft: Math.floor((this.parentWidth - this.width - this.left) / this.grid[0]) * this.grid[0] + this.left,\r\n\t\t\t\t\tminRight: this.right % this.grid[0],\r\n\t\t\t\t\tmaxRight: Math.floor((this.parentWidth - this.width - this.right) / this.grid[0]) * this.grid[0] + this.right,\r\n\t\t\t\t\tminTop: this.top % this.grid[1],\r\n\t\t\t\t\tmaxTop: Math.floor((this.parentHeight - this.height - this.top) / this.grid[1]) * this.grid[1] + this.top,\r\n\t\t\t\t\tminBottom: this.bottom % this.grid[1],\r\n\t\t\t\t\tmaxBottom: Math.floor((this.parentHeight - this.height - this.bottom) / this.grid[1]) * this.grid[1] + this.bottom\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 取消\r\n\t\t\tdeselect(e) {\r\n\t\t\t\tconst target = e.target || e.srcElement\r\n\t\t\t\tconst regex = new RegExp(this.className + '-([trmbl]{2})', '')\r\n\r\n\t\t\t\tif (!this.$el.contains(target) && !regex.test(target.className)) {\r\n\t\t\t\t\tif (this.enabled && !this.preventDeactivation) {\r\n\t\t\t\t\t\tthis.enabled = false\r\n\r\n\t\t\t\t\t\tthis.$emit('deactivated')\r\n\t\t\t\t\t\tthis.$emit('update:active', false)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tremoveEvent(document.documentElement, eventsFor.move, this.handleResize)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.resetBoundsAndMouseState()\r\n\t\t\t},\r\n\t\t\t// 控制柄触摸按下\r\n\t\t\thandleTouchDown(handle, e) {\r\n\t\t\t\teventsFor = events.touch\r\n\r\n\t\t\t\tthis.handleDown(handle, e)\r\n\t\t\t},\r\n\t\t\t// 控制柄按下\r\n\t\t\thandleDown(handle, e) {\r\n\t\t\t\tif (e instanceof MouseEvent && e.which !== 1) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.onResizeStart(handle, e) === false) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (e.stopPropagation) e.stopPropagation()\r\n\r\n\t\t\t\t// Here we avoid a dangerous recursion by faking\r\n\t\t\t\t// corner handles as middle handles\r\n\t\t\t\tif (this.lockAspectRatio && !handle.includes('m')) {\r\n\t\t\t\t\tthis.handle = 'm' + handle.substring(1)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.handle = handle\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.resizing = true\r\n\r\n\t\t\t\tthis.mouseClickPosition.mouseX = e.touches ? e.touches[0].pageX : e.pageX\r\n\t\t\t\tthis.mouseClickPosition.mouseY = e.touches ? e.touches[0].pageY : e.pageY\r\n\t\t\t\tthis.mouseClickPosition.left = this.left\r\n\t\t\t\tthis.mouseClickPosition.right = this.right\r\n\t\t\t\tthis.mouseClickPosition.top = this.top\r\n\t\t\t\tthis.mouseClickPosition.bottom = this.bottom\r\n\t\t\t\tthis.mouseClickPosition.w = this.width\r\n\t\t\t\tthis.mouseClickPosition.h = this.height\r\n\r\n\t\t\t\tthis.bounds = this.calcResizeLimits()\r\n\r\n\t\t\t\taddEvent(document.documentElement, eventsFor.move, this.handleResize)\r\n\t\t\t\taddEvent(document.documentElement, eventsFor.stop, this.handleUp)\r\n\t\t\t},\r\n\t\t\t// 计算调整大小范围\r\n\t\t\tcalcResizeLimits() {\r\n\t\t\t\tlet minW = this.minW\r\n\t\t\t\tlet minH = this.minH\r\n\t\t\t\tlet maxW = this.maxW\r\n\t\t\t\tlet maxH = this.maxH\r\n\r\n\t\t\t\tconst aspectFactor = this.aspectFactor\r\n\t\t\t\tconst [gridX, gridY] = this.grid\r\n\t\t\t\tconst width = this.width\r\n\t\t\t\tconst height = this.height\r\n\t\t\t\tconst left = this.left\r\n\t\t\t\tconst top = this.top\r\n\t\t\t\tconst right = this.right\r\n\t\t\t\tconst bottom = this.bottom\r\n\r\n\t\t\t\tif (this.lockAspectRatio) {\r\n\t\t\t\t\tif (minW / minH > aspectFactor) {\r\n\t\t\t\t\t\tminH = minW / aspectFactor\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tminW = aspectFactor * minH\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (maxW && maxH) {\r\n\t\t\t\t\t\tmaxW = Math.min(maxW, aspectFactor * maxH)\r\n\t\t\t\t\t\tmaxH = Math.min(maxH, maxW / aspectFactor)\r\n\t\t\t\t\t} else if (maxW) {\r\n\t\t\t\t\t\tmaxH = maxW / aspectFactor\r\n\t\t\t\t\t} else if (maxH) {\r\n\t\t\t\t\t\tmaxW = aspectFactor * maxH\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmaxW = maxW - (maxW % gridX)\r\n\t\t\t\tmaxH = maxH - (maxH % gridY)\r\n\r\n\t\t\t\tconst limits = {\r\n\t\t\t\t\tminLeft: null,\r\n\t\t\t\t\tmaxLeft: null,\r\n\t\t\t\t\tminTop: null,\r\n\t\t\t\t\tmaxTop: null,\r\n\t\t\t\t\tminRight: null,\r\n\t\t\t\t\tmaxRight: null,\r\n\t\t\t\t\tminBottom: null,\r\n\t\t\t\t\tmaxBottom: null\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.parent) {\r\n\t\t\t\t\tlimits.minLeft = left % gridX\r\n\t\t\t\t\tlimits.maxLeft = left + Math.floor((width - minW) / gridX) * gridX\r\n\t\t\t\t\tlimits.minTop = top % gridY\r\n\t\t\t\t\tlimits.maxTop = top + Math.floor((height - minH) / gridY) * gridY\r\n\t\t\t\t\tlimits.minRight = right % gridX\r\n\t\t\t\t\tlimits.maxRight = right + Math.floor((width - minW) / gridX) * gridX\r\n\t\t\t\t\tlimits.minBottom = bottom % gridY\r\n\t\t\t\t\tlimits.maxBottom = bottom + Math.floor((height - minH) / gridY) * gridY\r\n\r\n\t\t\t\t\tif (maxW) {\r\n\t\t\t\t\t\tlimits.minLeft = Math.max(limits.minLeft, this.parentWidth - right - maxW)\r\n\t\t\t\t\t\tlimits.minRight = Math.max(limits.minRight, this.parentWidth - left - maxW)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (maxH) {\r\n\t\t\t\t\t\tlimits.minTop = Math.max(limits.minTop, this.parentHeight - bottom - maxH)\r\n\t\t\t\t\t\tlimits.minBottom = Math.max(limits.minBottom, this.parentHeight - top - maxH)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.lockAspectRatio) {\r\n\t\t\t\t\t\tlimits.minLeft = Math.max(limits.minLeft, left - top * aspectFactor)\r\n\t\t\t\t\t\tlimits.minTop = Math.max(limits.minTop, top - left / aspectFactor)\r\n\t\t\t\t\t\tlimits.minRight = Math.max(limits.minRight, right - bottom * aspectFactor)\r\n\t\t\t\t\t\tlimits.minBottom = Math.max(limits.minBottom, bottom - right / aspectFactor)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlimits.minLeft = null\r\n\t\t\t\t\tlimits.maxLeft = left + Math.floor((width - minW) / gridX) * gridX\r\n\t\t\t\t\tlimits.minTop = null\r\n\t\t\t\t\tlimits.maxTop = top + Math.floor((height - minH) / gridY) * gridY\r\n\t\t\t\t\tlimits.minRight = null\r\n\t\t\t\t\tlimits.maxRight = right + Math.floor((width - minW) / gridX) * gridX\r\n\t\t\t\t\tlimits.minBottom = null\r\n\t\t\t\t\tlimits.maxBottom = bottom + Math.floor((height - minH) / gridY) * gridY\r\n\r\n\t\t\t\t\tif (maxW) {\r\n\t\t\t\t\t\tlimits.minLeft = -(right + maxW)\r\n\t\t\t\t\t\tlimits.minRight = -(left + maxW)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (maxH) {\r\n\t\t\t\t\t\tlimits.minTop = -(bottom + maxH)\r\n\t\t\t\t\t\tlimits.minBottom = -(top + maxH)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.lockAspectRatio && (maxW && maxH)) {\r\n\t\t\t\t\t\tlimits.minLeft = Math.min(limits.minLeft, -(right + maxW))\r\n\t\t\t\t\t\tlimits.minTop = Math.min(limits.minTop, -(maxH + bottom))\r\n\t\t\t\t\t\tlimits.minRight = Math.min(limits.minRight, -left - maxW)\r\n\t\t\t\t\t\tlimits.minBottom = Math.min(limits.minBottom, -top - maxH)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn limits\r\n\t\t\t},\r\n\t\t\t// 移动\r\n\t\t\tmove(e) {\r\n\t\t\t\tif (this.resizing) {\r\n\t\t\t\t\tthis.handleResize(e)\r\n\t\t\t\t} else if (this.dragging) {\r\n\t\t\t\t\tthis.handleDrag(e)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 元素移动\r\n\t\t\tasync handleDrag(e) {\r\n\t\t\t\tconst axis = this.axis\r\n\t\t\t\tconst grid = this.grid\r\n\t\t\t\tconst bounds = this.bounds\r\n\t\t\t\tconst mouseClickPosition = this.mouseClickPosition\r\n\r\n\t\t\t\tconst tmpDeltaX = axis && axis !== 'y' ? mouseClickPosition.mouseX - (e.touches ? e.touches[0].pageX : e.pageX) :\r\n\t\t\t\t\t0\r\n\t\t\t\tconst tmpDeltaY = axis && axis !== 'x' ? mouseClickPosition.mouseY - (e.touches ? e.touches[0].pageY : e.pageY) :\r\n\t\t\t\t\t0\r\n\r\n\t\t\t\tconst [deltaX, deltaY] = snapToGrid(grid, tmpDeltaX, tmpDeltaY, this.scaleRatio)\r\n\r\n\t\t\t\tconst left = restrictToBounds(mouseClickPosition.left - deltaX, bounds.minLeft, bounds.maxLeft)\r\n\t\t\t\tconst top = restrictToBounds(mouseClickPosition.top - deltaY, bounds.minTop, bounds.maxTop)\r\n\t\t\t\tif (this.onDrag(left, top) === false) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tconst right = restrictToBounds(mouseClickPosition.right + deltaX, bounds.minRight, bounds.maxRight)\r\n\t\t\t\tconst bottom = restrictToBounds(mouseClickPosition.bottom + deltaY, bounds.minBottom, bounds.maxBottom)\r\n\t\t\t\tthis.left = left\r\n\t\t\t\tthis.top = top\r\n\t\t\t\tthis.right = right\r\n\t\t\t\tthis.bottom = bottom\n\t\t\t\t// resizingFn\n\t\t\t\tthis.$emit('resizing', this.left, this.top, this.width, this.height)\r\n\r\n\t\t\t\tawait this.snapCheck()\r\n\t\t\t\tthis.$emit('dragging', this.left, this.top)\r\n\t\t\t},\r\n\t\t\tmoveHorizontally(val) {\r\n\t\t\t\tconst [deltaX, _] = snapToGrid(this.grid, val, this.top, this.scale)\r\n\t\t\t\tconst left = restrictToBounds(deltaX, this.bounds.minLeft, this.bounds.maxLeft)\r\n\t\t\t\tthis.left = left\r\n\t\t\t\tthis.right = this.parentWidth - this.width - left\r\n\t\t\t},\r\n\t\t\tmoveVertically(val) {\r\n\t\t\t\tconst [_, deltaY] = snapToGrid(this.grid, this.left, val, this.scale)\r\n\t\t\t\tconst top = restrictToBounds(deltaY, this.bounds.minTop, this.bounds.maxTop)\r\n\t\t\t\tthis.top = top\r\n\t\t\t\tthis.bottom = this.parentHeight - this.height - top\r\n\t\t\t},\r\n\t\t\t// 控制柄移动\r\n\t\t\thandleResize(e) {\r\n\t\t\t\tlet left = this.left\r\n\t\t\t\tlet top = this.top\r\n\t\t\t\tlet right = this.right\r\n\t\t\t\tlet bottom = this.bottom\r\n\r\n\t\t\t\tconst mouseClickPosition = this.mouseClickPosition\r\n\t\t\t\tconst lockAspectRatio = this.lockAspectRatio\r\n\t\t\t\tconst aspectFactor = this.aspectFactor\n\t\t\t\t\n\t\t\t\tconst tmpDeltaX = mouseClickPosition.mouseX - (e.touches ? e.touches[0].pageX : e.pageX)\n\t\t\t\tconst tmpDeltaY = mouseClickPosition.mouseY - (e.touches ? e.touches[0].pageY : e.pageY)\n\r\n\t\t\t\tif (!this.widthTouched && tmpDeltaX) {\r\n\t\t\t\t\tthis.widthTouched = true\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.heightTouched && tmpDeltaY) {\r\n\t\t\t\t\tthis.heightTouched = true\r\n\t\t\t\t}\r\n\t\t\t\tconst [deltaX, deltaY] = snapToGrid(this.grid, tmpDeltaX, tmpDeltaY, this.scaleRatio)\r\n\r\n\t\t\t\tif (this.handle.includes('b')) {\r\n\t\t\t\t\tbottom = restrictToBounds(\r\n\t\t\t\t\t\tmouseClickPosition.bottom + deltaY,\r\n\t\t\t\t\t\tthis.bounds.minBottom,\r\n\t\t\t\t\t\tthis.bounds.maxBottom\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (this.lockAspectRatio && this.resizingOnY) {\r\n\t\t\t\t\t\tright = this.right - (this.bottom - bottom) * aspectFactor\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.handle.includes('t')) {\r\n\t\t\t\t\ttop = restrictToBounds(\r\n\t\t\t\t\t\tmouseClickPosition.top - deltaY,\r\n\t\t\t\t\t\tthis.bounds.minTop,\r\n\t\t\t\t\t\tthis.bounds.maxTop\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (this.lockAspectRatio && this.resizingOnY) {\r\n\t\t\t\t\t\tleft = this.left - (this.top - top) * aspectFactor\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.handle.includes('r')) {\r\n\t\t\t\t\tright = restrictToBounds(\r\n\t\t\t\t\t\tmouseClickPosition.right + deltaX,\r\n\t\t\t\t\t\tthis.bounds.minRight,\r\n\t\t\t\t\t\tthis.bounds.maxRight\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (this.lockAspectRatio && this.resizingOnX) {\r\n\t\t\t\t\t\tbottom = this.bottom - (this.right - right) / aspectFactor\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.handle.includes('l')) {\r\n\t\t\t\t\tleft = restrictToBounds(\r\n\t\t\t\t\t\tmouseClickPosition.left - deltaX,\r\n\t\t\t\t\t\tthis.bounds.minLeft,\r\n\t\t\t\t\t\tthis.bounds.maxLeft\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (this.lockAspectRatio && this.resizingOnX) {\r\n\t\t\t\t\t\ttop = this.top - (this.left - left) / aspectFactor\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst width = computeWidth(this.parentWidth, left, right)\r\n\t\t\t\tconst height = computeHeight(this.parentHeight, top, bottom)\r\n\t\t\t\tif (this.onResize(this.handle, left, top, width, height) === false) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.left = left\r\n\t\t\t\tthis.top = top\r\n\t\t\t\tthis.right = right\r\n\t\t\t\tthis.bottom = bottom\r\n\t\t\t\tthis.width = width\r\n\t\t\t\tthis.height = height\n\t\t\t\t// resizingFn\r\n\t\t\t\tthis.$emit('resizing', this.left, this.top, this.width, this.height)\r\n\t\t\t},\r\n\t\t\tchangeWidth(val) {\r\n\t\t\t\tconst [newWidth, _] = snapToGrid(this.grid, val, 0, this.scale)\r\n\t\t\t\tlet right = restrictToBounds(\r\n\t\t\t\t\t(this.parentWidth - newWidth - this.left),\r\n\t\t\t\t\tthis.bounds.minRight,\r\n\t\t\t\t\tthis.bounds.maxRight\r\n\t\t\t\t)\r\n\t\t\t\tlet bottom = this.bottom\r\n\t\t\t\tif (this.lockAspectRatio) {\r\n\t\t\t\t\tbottom = this.bottom - (this.right - right) / this.aspectFactor\r\n\t\t\t\t}\r\n\t\t\t\tconst width = computeWidth(this.parentWidth, this.left, right)\r\n\t\t\t\tconst height = computeHeight(this.parentHeight, this.top, bottom)\r\n\t\t\t\tthis.right = right\r\n\t\t\t\tthis.bottom = bottom\r\n\t\t\t\tthis.width = width\r\n\t\t\t\tthis.height = height\r\n\t\t\t},\r\n\t\t\tchangeHeight(val) {\r\n\t\t\t\tconst [_, newHeight] = snapToGrid(this.grid, 0, val, this.scale)\r\n\t\t\t\tlet bottom = restrictToBounds(\r\n\t\t\t\t\t(this.parentHeight - newHeight - this.top),\r\n\t\t\t\t\tthis.bounds.minBottom,\r\n\t\t\t\t\tthis.bounds.maxBottom\r\n\t\t\t\t)\r\n\t\t\t\tlet right = this.right\r\n\t\t\t\tif (this.lockAspectRatio) {\r\n\t\t\t\t\tright = this.right - (this.bottom - bottom) * this.aspectFactor\r\n\t\t\t\t}\r\n\t\t\t\tconst width = computeWidth(this.parentWidth, this.left, right)\r\n\t\t\t\tconst height = computeHeight(this.parentHeight, this.top, bottom)\r\n\t\t\t\tthis.right = right\r\n\t\t\t\tthis.bottom = bottom\r\n\t\t\t\tthis.width = width\r\n\t\t\t\tthis.height = height\r\n\t\t\t},\r\n\t\t\t// 从控制柄松开\r\n\t\t\tasync handleUp(e) {\r\n\t\t\t\tthis.handle = null\r\n\r\n\t\t\t\t// 初始化辅助线数据\r\n\t\t\t\tconst temArr = new Array(3).fill({\r\n\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\tposition: '',\r\n\t\t\t\t\torigin: '',\r\n\t\t\t\t\tlineLength: ''\r\n\t\t\t\t})\r\n\t\t\t\tconst refLine = {\r\n\t\t\t\t\tvLine: [],\r\n\t\t\t\t\thLine: []\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i in refLine) {\r\n\t\t\t\t\trefLine[i] = JSON.parse(JSON.stringify(temArr))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.resizing) {\r\n\t\t\t\t\tthis.resizing = false\r\n\t\t\t\t\tawait this.conflictCheck()\r\n\t\t\t\t\tthis.$emit('refLineParams', refLine)\r\n\t\t\t\t\tthis.$emit('resizestop', this.left, this.top, this.width, this.height)\r\n\t\t\t\t}\r\n\t\t\t\tif (this.dragging) {\r\n\t\t\t\t\tthis.dragging = false\r\n\t\t\t\t\tawait this.conflictCheck()\r\n\t\t\t\t\tthis.$emit('refLineParams', refLine)\r\n\t\t\t\t\tthis.$emit('dragstop', this.left, this.top)\r\n\t\t\t\t}\r\n\t\t\t\tthis.resetBoundsAndMouseState()\r\n\t\t\t\tremoveEvent(document.documentElement, eventsFor.move, this.handleResize)\r\n\t\t\t},\r\n\t\t\t// 新增方法 ↓↓↓\r\n\t\t\t// 设置属性\r\n\t\t\tsettingAttribute() {\r\n\t\t\t\t// 设置冲突检测\r\n\t\t\t\tthis.$el.setAttribute('data-is-check', `${this.isConflictCheck}`)\r\n\t\t\t\t// 设置对齐元素\r\n\t\t\t\tthis.$el.setAttribute('data-is-snap', `${this.snap}`)\r\n\t\t\t},\r\n\t\t\t// 冲突检测\r\n\t\t\tconflictCheck() {\r\n\t\t\t\tconst top = this.top\r\n\t\t\t\tconst left = this.left\r\n\t\t\t\tconst width = this.width\r\n\t\t\t\tconst height = this.height\r\n\r\n\t\t\t\tif (this.isConflictCheck) {\r\n\t\t\t\t\tconst nodes = this.$el.parentNode.childNodes // 获取当前父节点下所有子节点\r\n\t\t\t\t\tfor (let item of nodes) {\r\n\t\t\t\t\t\tif (item.className !== undefined && !item.className.includes(this.classNameActive) && item.getAttribute(\r\n\t\t\t\t\t\t\t\t'data-is-check') !== null && item.getAttribute('data-is-check') !== 'false') {\r\n\t\t\t\t\t\t\tconst tw = item.offsetWidth\r\n\t\t\t\t\t\t\tconst th = item.offsetHeight\r\n\t\t\t\t\t\t\t// 正则获取left与right\r\n\t\t\t\t\t\t\tlet [tl, tt] = this.formatTransformVal(item.style.transform)\r\n\r\n\t\t\t\t\t\t\t// 左上角与右下角重叠\r\n\t\t\t\t\t\t\tconst tfAndBr = (top >= tt && left >= tl && tt + th > top && tl + tw > left) || (top <= tt && left < tl && top +\r\n\t\t\t\t\t\t\t\theight > tt && left + width > tl)\r\n\t\t\t\t\t\t\t// 右上角与左下角重叠\r\n\t\t\t\t\t\t\tconst brAndTf = (left <= tl && top >= tt && left + width > tl && top < tt + th) || (top < tt && left > tl && top +\r\n\t\t\t\t\t\t\t\theight > tt && left < tl + tw)\r\n\t\t\t\t\t\t\t// 下边与上边重叠\r\n\t\t\t\t\t\t\tconst bAndT = (top <= tt && left >= tl && top + height > tt && left < tl + tw) || (top >= tt && left <= tl &&\r\n\t\t\t\t\t\t\t\ttop < tt + th && left > tl + tw)\r\n\t\t\t\t\t\t\t// 上边与下边重叠（宽度不一样）\r\n\t\t\t\t\t\t\tconst tAndB = (top <= tt && left >= tl && top + height > tt && left < tl + tw) || (top >= tt && left <= tl &&\r\n\t\t\t\t\t\t\t\ttop < tt + th && left > tl + tw)\r\n\t\t\t\t\t\t\t// 左边与右边重叠\r\n\t\t\t\t\t\t\tconst lAndR = (left >= tl && top >= tt && left < tl + tw && top < tt + th) || (top > tt && left <= tl && left +\r\n\t\t\t\t\t\t\t\twidth > tl && top < tt + th)\r\n\t\t\t\t\t\t\t// 左边与右边重叠（高度不一样）\r\n\t\t\t\t\t\t\tconst rAndL = (top <= tt && left >= tl && top + height > tt && left < tl + tw) || (top >= tt && left <= tl &&\r\n\t\t\t\t\t\t\t\ttop < tt + th && left + width > tl)\r\n\r\n\t\t\t\t\t\t\t// 如果冲突，就将回退到移动前的位置\r\n\t\t\t\t\t\t\tif (tfAndBr || brAndTf || bAndT || tAndB || lAndR || rAndL) {\r\n\t\t\t\t\t\t\t\tthis.top = this.mouseClickPosition.top\r\n\t\t\t\t\t\t\t\tthis.left = this.mouseClickPosition.left\r\n\t\t\t\t\t\t\t\tthis.right = this.mouseClickPosition.right\r\n\t\t\t\t\t\t\t\tthis.bottom = this.mouseClickPosition.bottom\r\n\t\t\t\t\t\t\t\tthis.width = this.mouseClickPosition.w\r\n\t\t\t\t\t\t\t\tthis.height = this.mouseClickPosition.h\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 检测对齐元素\r\n\t\t\tasync snapCheck() {\r\n\t\t\t\tlet width = this.width\r\n\t\t\t\tlet height = this.height\r\n\t\t\t\tif (this.snap) {\r\n\t\t\t\t\tlet activeLeft = this.left\r\n\t\t\t\t\tlet activeRight = this.left + width\r\n\t\t\t\t\tlet activeTop = this.top\r\n\t\t\t\t\tlet activeBottom = this.top + height\r\n\r\n\t\t\t\t\t// 初始化辅助线数据\r\n\t\t\t\t\tconst temArr = new Array(3).fill({\r\n\t\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\t\tposition: '',\r\n\t\t\t\t\t\torigin: '',\r\n\t\t\t\t\t\tlineLength: ''\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconst refLine = {\r\n\t\t\t\t\t\tvLine: [],\r\n\t\t\t\t\t\thLine: []\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let i in refLine) {\r\n\t\t\t\t\t\trefLine[i] = JSON.parse(JSON.stringify(temArr))\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 获取当前父节点下所有子节点\r\n\t\t\t\t\tconst nodes = this.$el.parentNode.childNodes\r\n\r\n\t\t\t\t\tlet tem = {\r\n\t\t\t\t\t\tvalue: {\r\n\t\t\t\t\t\t\tx: [\r\n\t\t\t\t\t\t\t\t[],\r\n\t\t\t\t\t\t\t\t[],\r\n\t\t\t\t\t\t\t\t[]\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\ty: [\r\n\t\t\t\t\t\t\t\t[],\r\n\t\t\t\t\t\t\t\t[],\r\n\t\t\t\t\t\t\t\t[]\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdisplay: [],\r\n\t\t\t\t\t\tposition: []\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tgroupWidth,\r\n\t\t\t\t\t\tgroupHeight,\r\n\t\t\t\t\t\tgroupLeft,\r\n\t\t\t\t\t\tgroupTop,\r\n\t\t\t\t\t\tbln\r\n\t\t\t\t\t} = await this.getActiveAll(nodes)\r\n\t\t\t\t\tif (!bln) {\r\n\t\t\t\t\t\twidth = groupWidth\r\n\t\t\t\t\t\theight = groupHeight\r\n\t\t\t\t\t\tactiveLeft = groupLeft\r\n\t\t\t\t\t\tactiveRight = groupLeft + groupWidth\r\n\t\t\t\t\t\tactiveTop = groupTop\r\n\t\t\t\t\t\tactiveBottom = groupTop + groupHeight\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let item of nodes) {\r\n\t\t\t\t\t\tif (item.className !== undefined && !item.className.includes(this.classNameActive) && item.getAttribute(\r\n\t\t\t\t\t\t\t\t'data-is-snap') !== null && item.getAttribute('data-is-snap') !== 'false') {\r\n\t\t\t\t\t\t\tconst w = item.offsetWidth\r\n\t\t\t\t\t\t\tconst h = item.offsetHeight\r\n\t\t\t\t\t\t\tconst [l, t] = this.formatTransformVal(item.style.transform)\r\n\t\t\t\t\t\t\tconst r = l + w // 对齐目标right\r\n\t\t\t\t\t\t\tconst b = t + h // 对齐目标的bottom\r\n\r\n\t\t\t\t\t\t\tconst hc = Math.abs((activeTop + height / 2) - (t + h / 2)) <= this.snapTolerance // 水平中线\r\n\t\t\t\t\t\t\tconst vc = Math.abs((activeLeft + width / 2) - (l + w / 2)) <= this.snapTolerance // 垂直中线\r\n\r\n\t\t\t\t\t\t\tconst ts = Math.abs(t - activeBottom) <= this.snapTolerance // 从上到下\r\n\t\t\t\t\t\t\tconst TS = Math.abs(b - activeBottom) <= this.snapTolerance // 从上到下\r\n\t\t\t\t\t\t\tconst bs = Math.abs(t - activeTop) <= this.snapTolerance // 从下到上\r\n\t\t\t\t\t\t\tconst BS = Math.abs(b - activeTop) <= this.snapTolerance // 从下到上\r\n\r\n\t\t\t\t\t\t\tconst ls = Math.abs(l - activeRight) <= this.snapTolerance // 外左\r\n\t\t\t\t\t\t\tconst LS = Math.abs(r - activeRight) <= this.snapTolerance // 外左\r\n\t\t\t\t\t\t\tconst rs = Math.abs(l - activeLeft) <= this.snapTolerance // 外右\r\n\t\t\t\t\t\t\tconst RS = Math.abs(r - activeLeft) <= this.snapTolerance // 外右\r\n\r\n\t\t\t\t\t\t\ttem['display'] = [ts, TS, bs, BS, hc, hc, ls, LS, rs, RS, vc, vc]\r\n\t\t\t\t\t\t\ttem['position'] = [t, b, t, b, t + h / 2, t + h / 2, l, r, l, r, l + w / 2, l + w / 2]\r\n\r\n\t\t\t\t\t\t\tif (ts) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.top = t - height\r\n\t\t\t\t\t\t\t\t\tthis.bottom = this.parentHeight - this.top - height\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.y[0].push(l, r, activeLeft, activeRight)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (bs) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.top = t\r\n\t\t\t\t\t\t\t\t\tthis.bottom = this.parentHeight - this.top - height\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.y[0].push(l, r, activeLeft, activeRight)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (TS) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.top = b - height\r\n\t\t\t\t\t\t\t\t\tthis.bottom = this.parentHeight - this.top - height\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.y[1].push(l, r, activeLeft, activeRight)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (BS) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.top = b\r\n\t\t\t\t\t\t\t\t\tthis.bottom = this.parentHeight - this.top - height\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.y[1].push(l, r, activeLeft, activeRight)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (ls) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.left = l - width\r\n\t\t\t\t\t\t\t\t\tthis.right = this.parentWidth - this.left - width\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.x[0].push(t, b, activeTop, activeBottom)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (rs) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.left = l\r\n\t\t\t\t\t\t\t\t\tthis.right = this.parentWidth - this.left - width\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.x[0].push(t, b, activeTop, activeBottom)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (LS) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.left = r - width\r\n\t\t\t\t\t\t\t\t\tthis.right = this.parentWidth - this.left - width\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.x[1].push(t, b, activeTop, activeBottom)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (RS) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.left = r\r\n\t\t\t\t\t\t\t\t\tthis.right = this.parentWidth - this.left - width\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.x[1].push(t, b, activeTop, activeBottom)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (hc) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.top = t + h / 2 - height / 2\r\n\t\t\t\t\t\t\t\t\tthis.bottom = this.parentHeight - this.top - height\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.y[2].push(l, r, activeLeft, activeRight)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (vc) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.left = l + w / 2 - width / 2\r\n\t\t\t\t\t\t\t\t\tthis.right = this.parentWidth - this.left - width\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.x[2].push(t, b, activeTop, activeBottom)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// 辅助线坐标与是否显示(display)对应的数组,易于循环遍历\r\n\t\t\t\t\t\t\tconst arrTem = [0, 1, 0, 1, 2, 2, 0, 1, 0, 1, 2, 2]\r\n\t\t\t\t\t\t\tfor (let i = 0; i <= arrTem.length; i++) {\r\n\t\t\t\t\t\t\t\t// 前6为Y辅助线,后6为X辅助线\r\n\t\t\t\t\t\t\t\tconst xory = i < 6 ? 'y' : 'x'\r\n\t\t\t\t\t\t\t\tconst horv = i < 6 ? 'hLine' : 'vLine'\r\n\t\t\t\t\t\t\t\tif (tem.display[i]) {\r\n\t\t\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\t\t\torigin,\r\n\t\t\t\t\t\t\t\t\t\tlength\r\n\t\t\t\t\t\t\t\t\t} = this.calcLineValues(tem.value[xory][arrTem[i]])\r\n\t\t\t\t\t\t\t\t\trefLine[horv][arrTem[i]].display = tem.display[i]\r\n\t\t\t\t\t\t\t\t\trefLine[horv][arrTem[i]].position = tem.position[i] + 'px'\r\n\t\t\t\t\t\t\t\t\trefLine[horv][arrTem[i]].origin = origin\r\n\t\t\t\t\t\t\t\t\trefLine[horv][arrTem[i]].lineLength = length\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$emit('refLineParams', refLine)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcalcLineValues(arr) {\r\n\t\t\t\tconst length = Math.max(...arr) - Math.min(...arr) + 'px'\r\n\t\t\t\tconst origin = Math.min(...arr) + 'px'\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlength,\r\n\t\t\t\t\torigin\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getActiveAll(nodes) {\r\n\t\t\t\tconst activeAll = []\r\n\t\t\t\tconst XArray = []\r\n\t\t\t\tconst YArray = []\r\n\t\t\t\tlet groupWidth = 0\r\n\t\t\t\tlet groupHeight = 0\r\n\t\t\t\tlet groupLeft = 0\r\n\t\t\t\tlet groupTop = 0\r\n\t\t\t\tfor (let item of nodes) {\r\n\t\t\t\t\tif (item.className !== undefined && item.className.includes(this.classNameActive)) {\r\n\t\t\t\t\t\tactiveAll.push(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst AllLength = activeAll.length\r\n\t\t\t\tif (AllLength > 1) {\r\n\t\t\t\t\tfor (let i of activeAll) {\r\n\t\t\t\t\t\tconst l = i.offsetLeft\r\n\t\t\t\t\t\tconst r = l + i.offsetWidth\r\n\t\t\t\t\t\tconst t = i.offsetTop\r\n\t\t\t\t\t\tconst b = t + i.offsetHeight\r\n\t\t\t\t\t\tXArray.push(t, b)\r\n\t\t\t\t\t\tYArray.push(l, r)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgroupWidth = Math.max(...YArray) - Math.min(...YArray)\r\n\t\t\t\t\tgroupHeight = Math.max(...XArray) - Math.min(...XArray)\r\n\t\t\t\t\tgroupLeft = Math.min(...YArray)\r\n\t\t\t\t\tgroupTop = Math.min(...XArray)\r\n\t\t\t\t}\r\n\t\t\t\tconst bln = AllLength === 1\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgroupWidth,\r\n\t\t\t\t\tgroupHeight,\r\n\t\t\t\t\tgroupLeft,\r\n\t\t\t\t\tgroupTop,\r\n\t\t\t\t\tbln\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 正则获取left与top\r\n\t\t\tformatTransformVal(string) {\r\n\t\t\t\tlet [left, top] = string.replace(/[^0-9\\-,]/g, '').split(',')\r\n\t\t\t\tif (top === undefined) top = 0\r\n\t\t\t\treturn [+left, +top]\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\thandleStyle() {\r\n\t\t\t\treturn (stick) => {\r\n\t\t\t\t\tif (!this.handleInfo.switch) return {\r\n\t\t\t\t\t\tdisplay: this.enabled ? 'block' : 'none'\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst size = (this.handleInfo.size / this.scaleRatio).toFixed(2)\r\n\t\t\t\t\tconst offset = (this.handleInfo.offset / this.scaleRatio).toFixed(2)\r\n\t\t\t\t\tconst center = (size / 2).toFixed(2)\r\n\r\n\t\t\t\t\tconst styleMap = {\r\n\t\t\t\t\t\ttl: {\r\n\t\t\t\t\t\t\ttop: `${offset}px`,\r\n\t\t\t\t\t\t\tleft: `${offset}px`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttm: {\r\n\t\t\t\t\t\t\ttop: `${offset}px`,\r\n\t\t\t\t\t\t\tleft: `calc(50% - ${center}px)`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttr: {\r\n\t\t\t\t\t\t\ttop: `${offset}px`,\r\n\t\t\t\t\t\t\tright: `${offset}px`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmr: {\r\n\t\t\t\t\t\t\ttop: `calc(50% - ${center}px)`,\r\n\t\t\t\t\t\t\tright: `${offset}px`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbr: {\r\n\t\t\t\t\t\t\tbottom: `${offset}px`,\r\n\t\t\t\t\t\t\tright: `${offset}px`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbm: {\r\n\t\t\t\t\t\t\tbottom: `${offset}px`,\r\n\t\t\t\t\t\t\tright: `calc(50% - ${center}px)`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbl: {\r\n\t\t\t\t\t\t\tbottom: `${offset}px`,\r\n\t\t\t\t\t\t\tleft: `${offset}px`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tml: {\r\n\t\t\t\t\t\t\ttop: `calc(50% - ${center}px)`,\r\n\t\t\t\t\t\t\tleft: `${offset}px`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst stickStyle = {\r\n\t\t\t\t\t\twidth: `${size}px`,\r\n\t\t\t\t\t\theight: `${size}px`,\r\n\t\t\t\t\t\ttop: styleMap[stick].top,\r\n\t\t\t\t\t\tleft: styleMap[stick].left,\r\n\t\t\t\t\t\tright: styleMap[stick].right,\r\n\t\t\t\t\t\tbottom: styleMap[stick].bottom\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstickStyle.display = this.enabled ? 'block' : 'none'\r\n\t\t\t\t\treturn stickStyle\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstyle() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttransform: `translate(${this.left}px, ${this.top}px)`,\r\n\t\t\t\t\twidth: this.computedWidth,\r\n\t\t\t\t\theight: this.computedHeight,\n\t\t\t\t\t'background-color': this.bgClr,\n\t\t\t\t\t'background-image': `url(${ this.bgImage })`,\n\t\t\t\t\t'background-size': this.bgSize || '100% 100%',\r\n\t\t\t\t\tzIndex: this.zIndex,\r\n\t\t\t\t\t...(this.dragging && this.disableUserSelect ? userSelectNone : userSelectAuto)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 控制柄显示与否\r\n\t\t\tactualHandles() {\r\n\t\t\t\tif (!this.resizable) return []\r\n\r\n\t\t\t\treturn this.handles\r\n\t\t\t},\r\n\t\t\tcomputedWidth() {\r\n\t\t\t\tif (this.w === 'auto') {\r\n\t\t\t\t\tif (!this.widthTouched) {\r\n\t\t\t\t\t\treturn 'auto'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this.width + 'px'\r\n\t\t\t},\r\n\t\t\tcomputedHeight() {\r\n\t\t\t\tif (this.h === 'auto') {\r\n\t\t\t\t\tif (!this.heightTouched) {\r\n\t\t\t\t\t\treturn 'auto'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this.height + 'px'\r\n\t\t\t},\r\n\t\t\tresizingOnX() {\r\n\t\t\t\treturn (Boolean(this.handle) && (this.handle.includes('l') || this.handle.includes('r')))\r\n\t\t\t},\r\n\t\t\tresizingOnY() {\r\n\t\t\t\treturn (Boolean(this.handle) && (this.handle.includes('t') || this.handle.includes('b')))\r\n\t\t\t},\r\n\t\t\tisCornerHandle() {\r\n\t\t\t\treturn (Boolean(this.handle) && ['tl', 'tr', 'br', 'bl'].includes(this.handle))\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\t\t\tactive(val) {\r\n\t\t\t\tthis.enabled = val\r\n\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tthis.$emit('activated')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$emit('deactivated')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tz(val) {\r\n\t\t\t\tif (val >= 0 || val === 'auto') {\r\n\t\t\t\t\tthis.zIndex = val\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tx(val) {\r\n\t\t\t\tif (this.resizing || this.dragging) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.parent) {\r\n\t\t\t\t\tthis.bounds = this.calcDragLimits()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.moveHorizontally(val)\r\n\t\t\t},\r\n\t\t\ty(val) {\r\n\t\t\t\tif (this.resizing || this.dragging) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.parent) {\r\n\t\t\t\t\tthis.bounds = this.calcDragLimits()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.moveVertically(val)\r\n\t\t\t},\r\n\t\t\tlockAspectRatio(val) {\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tthis.aspectFactor = this.width / this.height\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.aspectFactor = undefined\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tminWidth(val) {\r\n\t\t\t\tif (val > 0 && val <= this.width) {\r\n\t\t\t\t\tthis.minW = val\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tminHeight(val) {\r\n\t\t\t\tif (val > 0 && val <= this.height) {\r\n\t\t\t\t\tthis.minH = val\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmaxWidth(val) {\r\n\t\t\t\tthis.maxW = val\r\n\t\t\t},\r\n\t\t\tmaxHeight(val) {\r\n\t\t\t\tthis.maxH = val\r\n\t\t\t},\r\n\t\t\tw(val) {\r\n\t\t\t\tif (this.resizing || this.dragging) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.parent) {\r\n\t\t\t\t\tthis.bounds = this.calcResizeLimits()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.changeWidth(val)\r\n\t\t\t},\r\n\t\t\th(val) {\r\n\t\t\t\tif (this.resizing || this.dragging) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.parent) {\r\n\t\t\t\t\tthis.bounds = this.calcResizeLimits()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.changeHeight(val)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.vdr {\r\n\t\ttouch-action: none;\r\n\t\tposition: absolute;\r\n\t\tbox-sizing: border-box;\r\n\t\tborder: 1px dashed #d6d6d6;\r\n\t}\r\n\r\n\t.handle {\r\n\t\tbox-sizing: border-box;\r\n\t\tposition: absolute;\r\n\t\twidth: 8px;\r\n\t\theight: 8px;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: #ffffff;\r\n\t\tborder: 1px solid rgb(240, 18, 18);\r\n\t\tbox-shadow: 0 0 2px #bbb;\r\n\t}\r\n\r\n\t.handle-tl {\r\n\t\ttop: -5px;\r\n\t\tleft: -5px;\r\n\t\tcursor: nw-resize;\r\n\t}\r\n\r\n\t.handle-tm {\r\n\t\ttop: -5px;\r\n\t\tleft: calc(50% - 4px);\r\n\t\tcursor: n-resize;\r\n\t}\r\n\r\n\t.handle-tr {\r\n\t\ttop: -5px;\r\n\t\tright: -5px;\r\n\t\tcursor: ne-resize;\r\n\t}\r\n\r\n\t.handle-ml {\r\n\t\ttop: calc(50% - 4px);\r\n\t\tleft: -5px;\r\n\t\tcursor: w-resize;\r\n\t}\r\n\r\n\t.handle-mr {\r\n\t\ttop: calc(50% - 4px);\r\n\t\tright: -5px;\r\n\t\tcursor: e-resize;\r\n\t}\r\n\r\n\t.handle-bl {\r\n\t\tbottom: -5px;\r\n\t\tleft: -5px;\r\n\t\tcursor: sw-resize;\r\n\t}\r\n\r\n\t.handle-bm {\r\n\t\tbottom: -5px;\r\n\t\tleft: calc(50% - 4px);\r\n\t\t/*margin-left: -5px;*/\r\n\t\tcursor: s-resize;\r\n\t}\r\n\r\n\t.handle-br {\r\n\t\tbottom: -5px;\r\n\t\tright: -5px;\r\n\t\tcursor: se-resize;\r\n\t}\r\n\r\n\t.ref-line {\r\n\t\tposition: absolute;\r\n\t\tbackground-color: rgb(255, 0, 204);\r\n\t\tz-index: 9999;\r\n\t}\r\n\r\n\t.v-line {\r\n\t\twidth: 1px;\r\n\t}\r\n\r\n\t.h-line {\r\n\t\theight: 1px;\r\n\t}\r\n\r\n\t@media only screen and (max-width: 768px) {\r\n\t\t[class*=\"handle-\"]:before {\r\n\t\t\tcontent: '';\r\n\t\t\tleft: -10px;\r\n\t\t\tright: -10px;\r\n\t\t\tbottom: -10px;\r\n\t\t\ttop: -10px;\r\n\t\t\tposition: absolute;\r\n\t\t}\r\n\t}\r\n</style>\n"]}]}