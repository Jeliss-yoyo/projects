{"remainingRequest":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\layout\\panel-right\\config-items\\DataSetting.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\layout\\panel-right\\config-items\\DataSetting.vue","mtime":1578620372262},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1585119190579},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\babel-loader\\lib\\index.js","mtime":1607477892317},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1585119190579},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js","mtime":1609899827306}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWVFdmVudCBmcm9tICdAL2Fzc2V0cy9kZXNpZ24vanMvdnVlLWV2ZW50LmpzJzsKaW1wb3J0ICR0b29scyBmcm9tICdAL2Fzc2V0cy9kZXNpZ24vanMvdG9vbHMuanMnOwpleHBvcnQgZGVmYXVsdCB7CglkYXRhKCkgewoJCXJldHVybiB7CgkJCS8vIOaVsOaNrua6kAoJCQlkYXRhU291cmNlOiB7CgkJCQkvLyAwIOihqOekuumdmeaAgeaVsOaNrjsgMSDooajnpLrmjqXlj6PmlbDmja4KCQkJCXR5cGU6IDAsIAoJCQkJbWV0aG9kOiAncG9zdCcsCgkJCQlzcmNVcmw6ICcnLAoJCQkJYXV0b1VwZGF0ZTogZmFsc2UsCgkJCQlpbnRlcnZhbDogMzAsCgkJCQlkYXRhOiAnJwoJCQl9LAoJCQlpc0dlbmVyYWw6IGZhbHNlLAoJCQkvLyDkuLTml7bmlbDmja7lrZjlgqgKCQkJdGVtcERhdGE6ICcnLAoJCQkvLyDlm77ooajnsbvlnosKCQkJY2hhcnRUeXBlOiAnJywKCQkJLy8gZWNoYXJ0cyDlsZ7mgKflr7nosaEKCQkJZWxlbUVjT3B0czoge30sCgkJCS8vIOa/gOa0u+WFg+e0oOeahElECgkJCWVsZW1JRDogJycKCQl9Cgl9LAoJY3JlYXRlZCgpIHsKCQkvLyDor7fmsYLmjqXlj6PmlbDmja4KCQl0aGlzLnJlcXVlc3REYXRhKCk7Cgl9LAoJbW91bnRlZCgpIHsKCQlWdWVFdmVudC4kb24oJyR3ZWJwcHQtZGF0YScsIHdlYnBwdCA9PiB7CgkJCWxldCBhY3RpdmUgPSAkdG9vbHMuYWZ4R2V0QWN0aXZlRWxlbS5jYWxsKHRoaXMsIHdlYnBwdCk7CgkJCXRoaXMuaXNHZW5lcmFsID0gYWN0aXZlLmVsZW1DcG50VHlwZSA9PT0gJ2dlbmVyYWwnOwoJCQlpZighYWN0aXZlIHx8IHRoaXMuaXNHZW5lcmFsKSByZXR1cm47CgkJCQoJCQl0aGlzLmVsZW1JRCA9IGFjdGl2ZS5lbGVtSUQ7CgkJCXRoaXMuZWxlbUVjT3B0cyA9IGFjdGl2ZS5lbGVtRWNPcHRzOwoJCQl0aGlzLmRhdGFTb3VyY2UgPSBhY3RpdmUuZWxlbURhdGFTcmM7CgkJCWxldCBlY0RhdGEgPSAkLmVjaGFydHNEYXRhW3RoaXMuZWxlbUlEXTsKCQkJdGhpcy5kYXRhU291cmNlLmRhdGEgPSBlY0RhdGE7CgkJCXRoaXMuY2hhcnRUeXBlID0gYWN0aXZlLnNsaWRlLmNvbnRleHRbdGhpcy5lbGVtSURdLmNoYXJ0VHlwZTsKCQkJdGhpcy50ZW1wRGF0YSA9IEpTT04uc3RyaW5naWZ5KGVjRGF0YSwgbnVsbCwgJwknKTsKCQl9KTsKCX0sCgltZXRob2RzOiB7CgkJLy8g5Yi35paw5pWw5o2uCgkJdXBkYXRlRGF0YSgpIHsKCQkJLy8g6I635Y+WIGVjaGFydHMg5bel5YW357G7CgkJCWxldCAkZXQgPSAkdG9vbHMuZWNoYXJ0c1Rvb2xzKCk7CgkJCS8vIOW9k+WJjemdmeaAgeaVsOaNruWvueixoQoJCQlsZXQgc3RhdGljRGF0YSA9IEpTT04ucGFyc2UodGhpcy50ZW1wRGF0YSk7CgkJCS8vIOaJi+WKqOabtOaWsGVjaGFydHPmlbDmja7ku5PlupMKCQkJJC5lY2hhcnRzRGF0YVt0aGlzLmVsZW1JRF0gPSBzdGF0aWNEYXRhOwoJCQkvLyDojrflj5blvZPliY3lm77ooajlr7nosaEKCQkJbGV0IGVjaGFydCA9ICQuZWNJbml0T2Jqc1t0aGlzLmVsZW1JRF07CgkJCS8vIOaVsOaNruWkhOeQhuaWueazlQoJCQljb25zdCBmbiA9IGQgPT4gewoJCQkJJC5lY2hhcnRzRGF0YVt0aGlzLmVsZW1JRF0gPSBkOwoJCQkJLy8g5bGe5oCn5LiO5pWw5o2u57uR5a6aCgkJCQlsZXQgJG9wdHMgPSAkZXQuZGF0YUZpbGxpbmcodGhpcy5jaGFydFR5cGUsIHRoaXMuZWxlbUVjT3B0cywgZCk7CgkJCQkvLyDnvJPlrZjlvZPliY0gZWNoYXJ0cyDnmoTlsZ7mgKflr7nosaEKCQkJCXRoaXMuZWxlbUVjT3B0cyA9ICRvcHRzOwoJCQkJLy8g5Zu+6KGo5riy5p+TCgkJCQkkZXQucmVuZGVyKGVjaGFydCwgJG9wdHMpOwoJCQl9CgkJCS8vIOaOpeWPo+aVsOaNruWIt+aWsCAmIOmdmeaAgeaVsOaNruWIt+aWsAoJCQl0aGlzLmRhdGFTb3VyY2UudHlwZSA/IHRoaXMucmVxdWVzdERhdGEoJGRhdGEgPT4gZm4oJGRhdGEpKSA6IGZuKHN0YXRpY0RhdGEpCgkJfSwKCQkvLyDmjqXlj6PmlbDmja7or7fmsYLmlrnms5UKCQlhc3luYyByZXF1ZXN0RGF0YShjYWxsYmFjaykgewoJCQljb25zdCByZXMgPSBudWxsLAoJCQkJc3JjVXJsID0gdGhpcy5kYXRhU291cmNlLnNyY1VybCwKCQkJCW1ldGhvZCA9IHRoaXMuZGF0YVNvdXJjZS5tZXRob2QgfHwgJ3Bvc3QnLAoJCQkJdHlwZSAgID0gdGhpcy5kYXRhU291cmNlLnR5cGU7CgkJCWlmKHR5cGUgJiYgc3JjVXJsKSB7CgkJCQljb25zdCB7IGRhdGEgfSA9IGF3YWl0IHRoaXMuJGh0dHBbbWV0aG9kXShzcmNVcmwpOwoJCQkJY29uc3QgJGRhdGEgPSBkYXRhLmRhdGFJbmZvLmRhdGE7CgkJCQl0aGlzLmRhdGFTb3VyY2UuZGF0YSA9ICRkYXRhOwoJCQkJdGhpcy50ZW1wRGF0YSA9IEpTT04uc3RyaW5naWZ5KCRkYXRhLCBudWxsLCAnCScpOwoJCQkJY2FsbGJhY2sgJiYgY2FsbGJhY2soJGRhdGEpOwoJCQl9CgkJfSwKCQkvLyBqc29uIOe+juWMlgoJCWpzb25Gb3JtYXR0ZXIoKSB7CgkJCXRoaXMudGVtcERhdGEgPSBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKHRoaXMudGVtcERhdGEpLCBudWxsLCAnCScpOwoJCX0KCX0sCgkKfQo="},{"version":3,"sources":["DataSetting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"DataSetting.vue","sourceRoot":"src/components/layout/panel-right/config-items","sourcesContent":["<template>\r\n\t<!-- 数据配置组件 -->\r\n\t<div class=\"data-setting\">\r\n\t\t<el-form v-show=\"!isGeneral\" ref=\"form\" :model=\"dataSource\" label-width=\"100px\">\r\n\t\t\t<table class=\"field-config\" cellspacing=\"5\">\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>字段</th>\r\n\t\t\t\t\t<th>映射</th>\r\n\t\t\t\t\t<th>状态</th>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td align=\"left\">legend</td>\r\n\t\t\t\t\t<td><el-input class=\"custom-field\" type=\"text\" placeholder=\"可自定义\"></el-input></td>\r\n\t\t\t\t\t<td><i class=\"el-icon-success isActive\"></i></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td align=\"left\">xAxis</td>\r\n\t\t\t\t\t<td><el-input class=\"custom-field\" type=\"text\" placeholder=\"可自定义\"></el-input></td>\r\n\t\t\t\t\t<td><i class=\"el-icon-success isActive\"></i></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td align=\"left\">series</td>\r\n\t\t\t\t\t<td><el-input class=\"custom-field\" type=\"text\" placeholder=\"可自定义\"></el-input></td>\r\n\t\t\t\t\t<td><i class=\"el-icon-success isActive\"></i></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t\t\r\n\t\t\t<el-form-item label=\"数据源类型\">\r\n\t\t\t\t<el-select v-model=\"dataSource.type\">\r\n\t\t\t\t\t<el-option label=\"静态数据\" :value=\"0\"></el-option>\r\n\t\t\t\t\t<el-option label=\"接口数据\" :value=\"1\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t</el-form-item>\r\n\t\t\t\r\n\t\t\t<!-- 接口数据 -->\r\n\t\t\t<div v-show=\"dataSource.type == 1\" class=\"data-wrap\">\r\n\t\t\t\t<el-form-item label=\"接口地址\">\r\n\t\t\t\t\t<el-input type=\"text\" v-model=\"dataSource.srcUrl\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"请求方式\">\r\n\t\t\t\t\t<el-select v-model=\"dataSource.method\">\r\n\t\t\t\t\t\t<el-option label=\"POST\" value=\"post\"></el-option>\r\n\t\t\t\t\t\t<el-option label=\"GET\" value=\"get\"></el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"自动更新请求\">\r\n\t\t\t\t\t<el-switch v-model=\"dataSource.autoUpdate\" active-text=\"启用\" inactive-text=\"禁用\"></el-switch>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item v-show=\"dataSource.autoUpdate\" label=\"请求间隔(s)\">\r\n\t\t\t\t\t<el-input type=\"number\" v-model=\"dataSource.interval\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<!-- 静态数据 -->\r\n\t\t\t<div v-show=\"dataSource.type == 0\" class=\"data-wrap\">\r\n\t\t\t\t<el-input class=\"temp-data\" type=\"textarea\" :rows=\"20\" v-model=\"tempData\"></el-input>\r\n\t\t\t\t<!-- 按钮 -->\r\n\t\t\t\t<span class=\"custom-button\" @click=\"jsonFormatter()\"> 数据美化 </span>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<!-- 按钮 -->\r\n\t\t\t<span class=\"custom-button\" @click=\"updateData()\"> 刷新 & 应用 </span>\r\n\t\t</el-form>\r\n\t</div>\n</template>\n\n<script>\r\n\timport VueEvent from '@/assets/design/js/vue-event.js';\r\n\timport $tools from '@/assets/design/js/tools.js';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 数据源\r\n\t\t\t\tdataSource: {\r\n\t\t\t\t\t// 0 表示静态数据; 1 表示接口数据\r\n\t\t\t\t\ttype: 0, \r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\tsrcUrl: '',\r\n\t\t\t\t\tautoUpdate: false,\r\n\t\t\t\t\tinterval: 30,\r\n\t\t\t\t\tdata: ''\r\n\t\t\t\t},\r\n\t\t\t\tisGeneral: false,\r\n\t\t\t\t// 临时数据存储\r\n\t\t\t\ttempData: '',\r\n\t\t\t\t// 图表类型\r\n\t\t\t\tchartType: '',\r\n\t\t\t\t// echarts 属性对象\r\n\t\t\t\telemEcOpts: {},\r\n\t\t\t\t// 激活元素的ID\r\n\t\t\t\telemID: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t// 请求接口数据\r\n\t\t\tthis.requestData();\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tVueEvent.$on('$webppt-data', webppt => {\r\n\t\t\t\tlet active = $tools.afxGetActiveElem.call(this, webppt);\r\n\t\t\t\tthis.isGeneral = active.elemCpntType === 'general';\r\n\t\t\t\tif(!active || this.isGeneral) return;\r\n\t\t\t\t\r\n\t\t\t\tthis.elemID = active.elemID;\r\n\t\t\t\tthis.elemEcOpts = active.elemEcOpts;\r\n\t\t\t\tthis.dataSource = active.elemDataSrc;\r\n\t\t\t\tlet ecData = $.echartsData[this.elemID];\r\n\t\t\t\tthis.dataSource.data = ecData;\r\n\t\t\t\tthis.chartType = active.slide.context[this.elemID].chartType;\r\n\t\t\t\tthis.tempData = JSON.stringify(ecData, null, '\t');\r\n\t\t\t});\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 刷新数据\r\n\t\t\tupdateData() {\r\n\t\t\t\t// 获取 echarts 工具类\r\n\t\t\t\tlet $et = $tools.echartsTools();\r\n\t\t\t\t// 当前静态数据对象\r\n\t\t\t\tlet staticData = JSON.parse(this.tempData);\r\n\t\t\t\t// 手动更新echarts数据仓库\r\n\t\t\t\t$.echartsData[this.elemID] = staticData;\r\n\t\t\t\t// 获取当前图表对象\r\n\t\t\t\tlet echart = $.ecInitObjs[this.elemID];\r\n\t\t\t\t// 数据处理方法\r\n\t\t\t\tconst fn = d => {\r\n\t\t\t\t\t$.echartsData[this.elemID] = d;\r\n\t\t\t\t\t// 属性与数据绑定\r\n\t\t\t\t\tlet $opts = $et.dataFilling(this.chartType, this.elemEcOpts, d);\r\n\t\t\t\t\t// 缓存当前 echarts 的属性对象\r\n\t\t\t\t\tthis.elemEcOpts = $opts;\r\n\t\t\t\t\t// 图表渲染\r\n\t\t\t\t\t$et.render(echart, $opts);\r\n\t\t\t\t}\r\n\t\t\t\t// 接口数据刷新 & 静态数据刷新\r\n\t\t\t\tthis.dataSource.type ? this.requestData($data => fn($data)) : fn(staticData)\r\n\t\t\t},\r\n\t\t\t// 接口数据请求方法\r\n\t\t\tasync requestData(callback) {\r\n\t\t\t\tconst res = null,\r\n\t\t\t\t\tsrcUrl = this.dataSource.srcUrl,\r\n\t\t\t\t\tmethod = this.dataSource.method || 'post',\r\n\t\t\t\t\ttype   = this.dataSource.type;\r\n\t\t\t\tif(type && srcUrl) {\r\n\t\t\t\t\tconst { data } = await this.$http[method](srcUrl);\r\n\t\t\t\t\tconst $data = data.dataInfo.data;\r\n\t\t\t\t\tthis.dataSource.data = $data;\r\n\t\t\t\t\tthis.tempData = JSON.stringify($data, null, '\t');\r\n\t\t\t\t\tcallback && callback($data);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// json 美化\r\n\t\t\tjsonFormatter() {\r\n\t\t\t\tthis.tempData = JSON.stringify(JSON.parse(this.tempData), null, '\t');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t}\n</script>\n\n<style lang=\"scss\">\r\n\t.field-config {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #ccc;\r\n\t\tmargin-bottom: 20px;\r\n\t\t.custom-field {\r\n\t\t\twidth: 80%;\r\n\t\t}\r\n\t\ttr {\r\n\t\t\tline-height: 1.8;\r\n\t\t}\r\n\t}\r\n\t.isActive {\r\n\t\tcolor: #00bef7;\r\n\t}\r\n\t.temp-data {\r\n\t\tmargin: 20px 0 20px 0;\r\n\t}\r\n\t/* 自定义按钮 */\r\n\t.custom-button {\r\n\t    display: inline-block;\r\n\t    width: 80%;\r\n\t    cursor: pointer;\r\n\t    margin: 10px auto;\r\n\t    height: 30px;\r\n\t    line-height: 30px;\r\n\t    text-align: center;\r\n\t    font-size: 14px;\r\n\t    color: #00adff;\r\n\t    border: 1px #00adff solid;\r\n\t}\r\n\t/*滚动条样式*/\r\n\t.el-textarea {\r\n\t\tdiv::-webkit-scrollbar{\r\n\t\t    width: 8px;     \r\n\t\t    height: 1px;\r\n\t\t\tbackground-color:#9d9d9d;\r\n\t\t}\r\n\t\tdiv::-webkit-scrollbar-thumb{\r\n\t\t    border-radius: 10px;\r\n\t\t    -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\r\n\t\t    background-color: #535353;\r\n\t\t}\r\n\t\tdiv::-webkit-scrollbar-track{\r\n\t\t    -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\r\n\t\t    border-radius: 10px;\r\n\t\t    background-color: #ededed;\r\n\t\t}\r\n\t}\r\n\t\r\n</style>\n"]}]}