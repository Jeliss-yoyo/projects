{"remainingRequest":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\resizable\\vue-resizable.vue?vue&type=style&index=0&id=0c5858e0&scoped=true&lang=css&","dependencies":[{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\resizable\\vue-resizable.vue","mtime":1610601285653},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\css-loader\\dist\\cjs.js","mtime":1607477900108},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1609899827306},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\postcss-loader\\src\\index.js","mtime":1585119192858},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1585119190579},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js","mtime":1609899827306}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnZkciB7Cgl0b3VjaC1hY3Rpb246IG5vbmU7Cglwb3NpdGlvbjogYWJzb2x1dGU7Cglib3gtc2l6aW5nOiBib3JkZXItYm94OwoJYm9yZGVyOiAxcHggZGFzaGVkICNkNmQ2ZDY7Cn0KCi5oYW5kbGUgewoJYm94LXNpemluZzogYm9yZGVyLWJveDsKCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCXdpZHRoOiA4cHg7CgloZWlnaHQ6IDhweDsKCWJvcmRlci1yYWRpdXM6IDUwJTsKCWJhY2tncm91bmQ6ICNmZmZmZmY7Cglib3JkZXI6IDFweCBzb2xpZCByZ2IoMjQwLCAxOCwgMTgpOwoJYm94LXNoYWRvdzogMCAwIDJweCAjYmJiOwp9CgouaGFuZGxlLXRsIHsKCXRvcDogLTVweDsKCWxlZnQ6IC01cHg7CgljdXJzb3I6IG53LXJlc2l6ZTsKfQoKLmhhbmRsZS10bSB7Cgl0b3A6IC01cHg7CglsZWZ0OiBjYWxjKDUwJSAtIDRweCk7CgljdXJzb3I6IG4tcmVzaXplOwp9CgouaGFuZGxlLXRyIHsKCXRvcDogLTVweDsKCXJpZ2h0OiAtNXB4OwoJY3Vyc29yOiBuZS1yZXNpemU7Cn0KCi5oYW5kbGUtbWwgewoJdG9wOiBjYWxjKDUwJSAtIDRweCk7CglsZWZ0OiAtNXB4OwoJY3Vyc29yOiB3LXJlc2l6ZTsKfQoKLmhhbmRsZS1tciB7Cgl0b3A6IGNhbGMoNTAlIC0gNHB4KTsKCXJpZ2h0OiAtNXB4OwoJY3Vyc29yOiBlLXJlc2l6ZTsKfQoKLmhhbmRsZS1ibCB7Cglib3R0b206IC01cHg7CglsZWZ0OiAtNXB4OwoJY3Vyc29yOiBzdy1yZXNpemU7Cn0KCi5oYW5kbGUtYm0gewoJYm90dG9tOiAtNXB4OwoJbGVmdDogY2FsYyg1MCUgLSA0cHgpOwoJLyptYXJnaW4tbGVmdDogLTVweDsqLwoJY3Vyc29yOiBzLXJlc2l6ZTsKfQoKLmhhbmRsZS1iciB7Cglib3R0b206IC01cHg7CglyaWdodDogLTVweDsKCWN1cnNvcjogc2UtcmVzaXplOwp9CgoucmVmLWxpbmUgewoJcG9zaXRpb246IGFic29sdXRlOwoJYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMCwgMjA0KTsKCXotaW5kZXg6IDk5OTk7Cn0KCi52LWxpbmUgewoJd2lkdGg6IDFweDsKfQoKLmgtbGluZSB7CgloZWlnaHQ6IDFweDsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjhweCkgewoJW2NsYXNzKj0iaGFuZGxlLSJdOmJlZm9yZSB7CgkJY29udGVudDogJyc7CgkJbGVmdDogLTEwcHg7CgkJcmlnaHQ6IC0xMHB4OwoJCWJvdHRvbTogLTEwcHg7CgkJdG9wOiAtMTBweDsKCQlwb3NpdGlvbjogYWJzb2x1dGU7Cgl9Cn0K"},{"version":3,"sources":["vue-resizable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6wCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"vue-resizable.vue","sourceRoot":"src/components/resizable","sourcesContent":["<template>\r\n\t<div :style=\"style\" :class=\"[{\r\n      [classNameActive]: enabled,\r\n      [classNameDragging]: dragging,\r\n      [classNameResizing]: resizing,\r\n      [classNameDraggable]: draggable,\r\n      [classNameResizable]: resizable\r\n    }, className]\"\r\n\t @mousedown=\"elementMouseDown\" @touchstart=\"elementTouchDown\">\r\n\t\t<div v-for=\"handle in actualHandles\" :key=\"handle\" :class=\"[classNameHandle, classNameHandle + '-' + handle]\" :style=\"handleStyle(handle)\"\r\n\t\t @mousedown.stop.prevent=\"handleDown(handle, $event)\" @touchstart.stop.prevent=\"handleTouchDown(handle, $event)\">\r\n\t\t\t<slot :name=\"handle\"></slot>\r\n\t\t</div>\r\n\t\t<slot></slot>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmatchesSelectorToParentElements,\r\n\t\tgetComputedSize,\r\n\t\taddEvent,\r\n\t\tremoveEvent\r\n\t} from '@/utils/resizable/dom'\r\n\timport {\r\n\t\tcomputeWidth,\r\n\t\tcomputeHeight,\r\n\t\trestrictToBounds,\r\n\t\tsnapToGrid\r\n\t} from '@/utils/resizable/fns'\r\n\r\n\tconst events = {\r\n\t\tmouse: {\r\n\t\t\tstart: 'mousedown',\r\n\t\t\tmove: 'mousemove',\r\n\t\t\tstop: 'mouseup'\r\n\t\t},\r\n\t\ttouch: {\r\n\t\t\tstart: 'touchstart',\r\n\t\t\tmove: 'touchmove',\r\n\t\t\tstop: 'touchend'\r\n\t\t}\r\n\t}\r\n\r\n\t// 禁止用户选取\r\n\tconst userSelectNone = {\r\n\t\tuserSelect: 'none',\r\n\t\tMozUserSelect: 'none',\r\n\t\tWebkitUserSelect: 'none',\r\n\t\tMsUserSelect: 'none'\r\n\t}\r\n\t// 用户选中自动\r\n\tconst userSelectAuto = {\r\n\t\tuserSelect: 'auto',\r\n\t\tMozUserSelect: 'auto',\r\n\t\tWebkitUserSelect: 'auto',\r\n\t\tMsUserSelect: 'auto'\r\n\t}\r\n\r\n\tlet eventsFor = events.mouse\r\n\r\n\texport default {\r\n\t\treplace: true,\r\n\t\tname: 'vue-resizable',\r\n\t\tprops: {\r\n\t\t\tclassName: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'vdr'\r\n\t\t\t},\r\n\t\t\tclassNameDraggable: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'draggable'\r\n\t\t\t},\r\n\t\t\tclassNameResizable: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'resizable'\r\n\t\t\t},\r\n\t\t\tclassNameDragging: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'dragging'\r\n\t\t\t},\r\n\t\t\tclassNameResizing: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'resizing'\r\n\t\t\t},\r\n\t\t\tclassNameActive: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'active'\r\n\t\t\t},\r\n\t\t\tclassNameHandle: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'handle'\r\n\t\t\t},\r\n\t\t\tdisableUserSelect: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tenableNativeDrag: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tpreventDeactivation: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tactive: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tdraggable: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tresizable: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t// 锁定宽高比\r\n\t\t\tlockAspectRatio: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tw: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 200,\r\n\t\t\t\tvalidator: (val) => {\r\n\t\t\t\t\tif (typeof val === 'number') {\r\n\t\t\t\t\t\treturn val > 0\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn val === 'auto'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\th: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 200,\r\n\t\t\t\tvalidator: (val) => {\r\n\t\t\t\t\tif (typeof val === 'number') {\r\n\t\t\t\t\t\treturn val > 0\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn val === 'auto'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tminWidth: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 10,\r\n\t\t\t\tvalidator: (val) => val >= 0\r\n\t\t\t},\r\n\t\t\tminHeight: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 10,\r\n\t\t\t\tvalidator: (val) => val >= 0\r\n\t\t\t},\r\n\t\t\tmaxWidth: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: null,\r\n\t\t\t\tvalidator: (val) => val >= 0\r\n\t\t\t},\r\n\t\t\tmaxHeight: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: null,\r\n\t\t\t\tvalidator: (val) => val >= 0\r\n\t\t\t},\r\n\t\t\tx: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\ty: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tz: {\r\n\t\t\t\ttype: [String, Number],\r\n\t\t\t\tdefault: 'auto',\r\n\t\t\t\tvalidator: (val) => (typeof val === 'string' ? val === 'auto' : val >= 0)\r\n\t\t\t},\r\n\t\t\thandles: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: () => ['tl', 'tm', 'tr', 'mr', 'br', 'bm', 'bl', 'ml'],\r\n\t\t\t\tvalidator: (val) => {\r\n\t\t\t\t\tconst s = new Set(['tl', 'tm', 'tr', 'mr', 'br', 'bm', 'bl', 'ml'])\r\n\r\n\t\t\t\t\treturn new Set(val.filter(h => s.has(h))).size === val.length\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdragHandle: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: null\r\n\t\t\t},\r\n\t\t\tdragCancel: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: null\r\n\t\t\t},\r\n\t\t\taxis: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'both',\r\n\t\t\t\tvalidator: (val) => ['x', 'y', 'both'].includes(val)\r\n\t\t\t},\r\n\t\t\tgrid: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: () => [1, 1]\r\n\t\t\t},\r\n\t\t\tparent: {\r\n\t\t\t\ttype: [Boolean, String],\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tonDragStart: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: () => true\r\n\t\t\t},\r\n\t\t\tonDrag: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: () => true\r\n\t\t\t},\r\n\t\t\tonResizeStart: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: () => true\r\n\t\t\t},\r\n\t\t\tonResize: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: () => true\r\n\t\t\t},\r\n\t\t\t// 冲突检测\r\n\t\t\tisConflictCheck: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\t// 元素对齐\r\n\t\t\tsnap: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\t// 当调用对齐时，用来设置组件与组件之间的对齐距离，以像素为单位\r\n\t\t\tsnapTolerance: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 5,\r\n\t\t\t\tvalidator: function(val) {\r\n\t\t\t\t\treturn typeof val === 'number'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 缩放比例\r\n\t\t\tscaleRatio: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 1,\r\n\t\t\t\tvalidator: (val) => typeof val === 'number'\r\n\t\t\t},\r\n\t\t\t// handle是否缩放\r\n\t\t\thandleInfo: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: () => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tsize: 6,\r\n\t\t\t\t\t\toffset: -5,\r\n\t\t\t\t\t\tswitch: true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdata: function() {\r\n\t\t\treturn {\r\n\t\t\t\tleft: this.x,\r\n\t\t\t\ttop: this.y,\r\n\t\t\t\tright: null,\r\n\t\t\t\tbottom: null,\r\n\r\n\t\t\t\twidth: null,\r\n\t\t\t\theight: null,\r\n\t\t\t\twidthTouched: false,\r\n\t\t\t\theightTouched: false,\r\n\t\t\t\taspectFactor: null,\r\n\r\n\t\t\t\tparentWidth: null,\r\n\t\t\t\tparentHeight: null,\r\n\r\n\t\t\t\tminW: this.minWidth,\r\n\t\t\t\tminH: this.minHeight,\r\n\r\n\t\t\t\tmaxW: this.maxWidth,\r\n\t\t\t\tmaxH: this.maxHeight,\r\n\r\n\t\t\t\thandle: null,\r\n\t\t\t\tenabled: this.active,\r\n\t\t\t\tresizing: false,\r\n\t\t\t\tdragging: false,\r\n\t\t\t\tzIndex: this.z\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcreated: function() {\r\n\t\t\t// eslint-disable-next-line 无效的prop：minWidth不能大于maxWidth\r\n\t\t\tif (this.maxWidth && this.minWidth > this.maxWidth) console.warn(\r\n\t\t\t\t'[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth')\r\n\t\t\t// eslint-disable-next-line 无效prop：minHeight不能大于maxHeight'\r\n\t\t\tif (this.maxWidth && this.minHeight > this.maxHeight) console.warn(\r\n\t\t\t\t'[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight')\r\n\r\n\t\t\tthis.resetBoundsAndMouseState()\r\n\t\t},\r\n\t\tmounted: function() {\r\n\t\t\tif (!this.enableNativeDrag) {\r\n\t\t\t\tthis.$el.ondragstart = () => false\r\n\t\t\t}\r\n\r\n\t\t\tconst [parentWidth, parentHeight] = this.getParentSize()\r\n\r\n\t\t\tthis.parentWidth = parentWidth\r\n\t\t\tthis.parentHeight = parentHeight\r\n\t\t\tconst [width, height] = getComputedSize(this.$el)\r\n\t\t\tthis.aspectFactor = (this.w !== 'auto' ? this.w : width) / (this.h !== 'auto' ? this.h : height)\r\n\t\t\tthis.width = this.w !== 'auto' ? this.w : width\r\n\t\t\tthis.height = this.h !== 'auto' ? this.h : height\r\n\t\t\tthis.right = this.parentWidth - this.width - this.left\r\n\t\t\tthis.bottom = this.parentHeight - this.height - this.top\r\n\r\n\t\t\tthis.settingAttribute()\r\n\r\n\t\t\taddEvent(document.documentElement, 'mousedown', this.deselect)\r\n\t\t\taddEvent(document.documentElement, 'touchend touchcancel', this.deselect)\r\n\r\n\t\t\taddEvent(window, 'resize', this.checkParentSize)\r\n\t\t},\r\n\t\tbeforeDestroy: function() {\r\n\t\t\tremoveEvent(document.documentElement, 'mousedown', this.deselect)\r\n\t\t\tremoveEvent(document.documentElement, 'touchstart', this.handleUp)\r\n\t\t\tremoveEvent(document.documentElement, 'mousemove', this.move)\r\n\t\t\tremoveEvent(document.documentElement, 'touchmove', this.move)\r\n\t\t\tremoveEvent(document.documentElement, 'mouseup', this.handleUp)\r\n\t\t\tremoveEvent(document.documentElement, 'touchend touchcancel', this.deselect)\r\n\r\n\t\t\tremoveEvent(window, 'resize', this.checkParentSize)\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t// 重置边界和鼠标状态\r\n\t\t\tresetBoundsAndMouseState() {\r\n\t\t\t\tthis.mouseClickPosition = {\r\n\t\t\t\t\tmouseX: 0,\r\n\t\t\t\t\tmouseY: 0,\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t\tw: 0,\r\n\t\t\t\t\th: 0\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.bounds = {\r\n\t\t\t\t\tminLeft: null,\r\n\t\t\t\t\tmaxLeft: null,\r\n\t\t\t\t\tminRight: null,\r\n\t\t\t\t\tmaxRight: null,\r\n\t\t\t\t\tminTop: null,\r\n\t\t\t\t\tmaxTop: null,\r\n\t\t\t\t\tminBottom: null,\r\n\t\t\t\t\tmaxBottom: null\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 检查父元素大小\r\n\t\t\tcheckParentSize() {\r\n\t\t\t\tif (this.parent) {\r\n\t\t\t\t\tconst [newParentWidth, newParentHeight] = this.getParentSize()\r\n\t\t\t\t\t// 修复父元素改变大小后，组件resizing时活动异常\r\n\t\t\t\t\tthis.right = newParentWidth - this.width - this.left\r\n\t\t\t\t\tthis.bottom = newParentHeight - this.height - this.top\r\n\r\n\t\t\t\t\tthis.parentWidth = newParentWidth\r\n\t\t\t\t\tthis.parentHeight = newParentHeight\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 获取父元素大小\r\n\t\t\tgetParentSize() {\r\n\t\t\t\tif (this.parent === true) {\r\n\t\t\t\t\tconst style = window.getComputedStyle(this.$el.parentNode, null)\r\n\t\t\t\t\treturn [\r\n\t\t\t\t\t\tparseInt(style.getPropertyValue('width'), 10),\r\n\t\t\t\t\t\tparseInt(style.getPropertyValue('height'), 10)\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof this.parent === 'string') {\r\n\t\t\t\t\tconst parentNode = document.querySelector(this.parent)\r\n\t\t\t\t\tif (!(parentNode instanceof HTMLElement)) {\r\n\t\t\t\t\t\tthrow new Error(`The selector ${this.parent} does not match any element`)\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn [parentNode.offsetWidth, parentNode.offsetHeight]\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn [null, null]\r\n\t\t\t},\r\n\t\t\t// 元素触摸按下\r\n\t\t\telementTouchDown(e) {\r\n\t\t\t\teventsFor = events.touch\r\n\r\n\t\t\t\tthis.elementDown(e)\r\n\t\t\t},\r\n\t\t\telementMouseDown(e) {\r\n\t\t\t\teventsFor = events.mouse\r\n\t\t\t\tthis.elementDown(e)\r\n\t\t\t},\r\n\t\t\t// 元素按下\r\n\t\t\telementDown(e) {\r\n\t\t\t\tif (e instanceof MouseEvent && e.which !== 1) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst target = e.target || e.srcElement\r\n\r\n\t\t\t\tif (this.$el.contains(target)) {\r\n\t\t\t\t\tif (this.onDragStart(e) === false) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t(this.dragHandle && !matchesSelectorToParentElements(target, this.dragHandle, this.$el)) ||\r\n\t\t\t\t\t\t(this.dragCancel && matchesSelectorToParentElements(target, this.dragCancel, this.$el))\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tthis.dragging = false\r\n\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!this.enabled) {\r\n\t\t\t\t\t\tthis.enabled = true\r\n\r\n\t\t\t\t\t\tthis.$emit('activated')\r\n\t\t\t\t\t\tthis.$emit('update:active', true)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.draggable) {\r\n\t\t\t\t\t\tthis.dragging = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.mouseClickPosition.mouseX = e.touches ? e.touches[0].pageX : e.pageX\r\n\t\t\t\t\tthis.mouseClickPosition.mouseY = e.touches ? e.touches[0].pageY : e.pageY\r\n\r\n\t\t\t\t\tthis.mouseClickPosition.left = this.left\r\n\t\t\t\t\tthis.mouseClickPosition.right = this.right\r\n\t\t\t\t\tthis.mouseClickPosition.top = this.top\r\n\t\t\t\t\tthis.mouseClickPosition.bottom = this.bottom\r\n\t\t\t\t\tthis.mouseClickPosition.w = this.width\r\n\t\t\t\t\tthis.mouseClickPosition.h = this.height\r\n\r\n\t\t\t\t\tif (this.parent) {\r\n\t\t\t\t\t\tthis.bounds = this.calcDragLimits()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\taddEvent(document.documentElement, eventsFor.move, this.move)\r\n\t\t\t\t\taddEvent(document.documentElement, eventsFor.stop, this.handleUp)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 计算移动范围\r\n\t\t\tcalcDragLimits() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tminLeft: this.left % this.grid[0],\r\n\t\t\t\t\tmaxLeft: Math.floor((this.parentWidth - this.width - this.left) / this.grid[0]) * this.grid[0] + this.left,\r\n\t\t\t\t\tminRight: this.right % this.grid[0],\r\n\t\t\t\t\tmaxRight: Math.floor((this.parentWidth - this.width - this.right) / this.grid[0]) * this.grid[0] + this.right,\r\n\t\t\t\t\tminTop: this.top % this.grid[1],\r\n\t\t\t\t\tmaxTop: Math.floor((this.parentHeight - this.height - this.top) / this.grid[1]) * this.grid[1] + this.top,\r\n\t\t\t\t\tminBottom: this.bottom % this.grid[1],\r\n\t\t\t\t\tmaxBottom: Math.floor((this.parentHeight - this.height - this.bottom) / this.grid[1]) * this.grid[1] + this.bottom\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 取消\r\n\t\t\tdeselect(e) {\r\n\t\t\t\tconst target = e.target || e.srcElement\r\n\t\t\t\tconst regex = new RegExp(this.className + '-([trmbl]{2})', '')\r\n\r\n\t\t\t\tif (!this.$el.contains(target) && !regex.test(target.className)) {\r\n\t\t\t\t\tif (this.enabled && !this.preventDeactivation) {\r\n\t\t\t\t\t\tthis.enabled = false\r\n\r\n\t\t\t\t\t\tthis.$emit('deactivated')\r\n\t\t\t\t\t\tthis.$emit('update:active', false)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tremoveEvent(document.documentElement, eventsFor.move, this.handleResize)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.resetBoundsAndMouseState()\r\n\t\t\t},\r\n\t\t\t// 控制柄触摸按下\r\n\t\t\thandleTouchDown(handle, e) {\r\n\t\t\t\teventsFor = events.touch\r\n\r\n\t\t\t\tthis.handleDown(handle, e)\r\n\t\t\t},\r\n\t\t\t// 控制柄按下\r\n\t\t\thandleDown(handle, e) {\r\n\t\t\t\tif (e instanceof MouseEvent && e.which !== 1) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.onResizeStart(handle, e) === false) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (e.stopPropagation) e.stopPropagation()\r\n\r\n\t\t\t\t// Here we avoid a dangerous recursion by faking\r\n\t\t\t\t// corner handles as middle handles\r\n\t\t\t\tif (this.lockAspectRatio && !handle.includes('m')) {\r\n\t\t\t\t\tthis.handle = 'm' + handle.substring(1)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.handle = handle\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.resizing = true\r\n\r\n\t\t\t\tthis.mouseClickPosition.mouseX = e.touches ? e.touches[0].pageX : e.pageX\r\n\t\t\t\tthis.mouseClickPosition.mouseY = e.touches ? e.touches[0].pageY : e.pageY\r\n\t\t\t\tthis.mouseClickPosition.left = this.left\r\n\t\t\t\tthis.mouseClickPosition.right = this.right\r\n\t\t\t\tthis.mouseClickPosition.top = this.top\r\n\t\t\t\tthis.mouseClickPosition.bottom = this.bottom\r\n\t\t\t\tthis.mouseClickPosition.w = this.width\r\n\t\t\t\tthis.mouseClickPosition.h = this.height\r\n\r\n\t\t\t\tthis.bounds = this.calcResizeLimits()\r\n\r\n\t\t\t\taddEvent(document.documentElement, eventsFor.move, this.handleResize)\r\n\t\t\t\taddEvent(document.documentElement, eventsFor.stop, this.handleUp)\r\n\t\t\t},\r\n\t\t\t// 计算调整大小范围\r\n\t\t\tcalcResizeLimits() {\r\n\t\t\t\tlet minW = this.minW\r\n\t\t\t\tlet minH = this.minH\r\n\t\t\t\tlet maxW = this.maxW\r\n\t\t\t\tlet maxH = this.maxH\r\n\r\n\t\t\t\tconst aspectFactor = this.aspectFactor\r\n\t\t\t\tconst [gridX, gridY] = this.grid\r\n\t\t\t\tconst width = this.width\r\n\t\t\t\tconst height = this.height\r\n\t\t\t\tconst left = this.left\r\n\t\t\t\tconst top = this.top\r\n\t\t\t\tconst right = this.right\r\n\t\t\t\tconst bottom = this.bottom\r\n\r\n\t\t\t\tif (this.lockAspectRatio) {\r\n\t\t\t\t\tif (minW / minH > aspectFactor) {\r\n\t\t\t\t\t\tminH = minW / aspectFactor\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tminW = aspectFactor * minH\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (maxW && maxH) {\r\n\t\t\t\t\t\tmaxW = Math.min(maxW, aspectFactor * maxH)\r\n\t\t\t\t\t\tmaxH = Math.min(maxH, maxW / aspectFactor)\r\n\t\t\t\t\t} else if (maxW) {\r\n\t\t\t\t\t\tmaxH = maxW / aspectFactor\r\n\t\t\t\t\t} else if (maxH) {\r\n\t\t\t\t\t\tmaxW = aspectFactor * maxH\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmaxW = maxW - (maxW % gridX)\r\n\t\t\t\tmaxH = maxH - (maxH % gridY)\r\n\r\n\t\t\t\tconst limits = {\r\n\t\t\t\t\tminLeft: null,\r\n\t\t\t\t\tmaxLeft: null,\r\n\t\t\t\t\tminTop: null,\r\n\t\t\t\t\tmaxTop: null,\r\n\t\t\t\t\tminRight: null,\r\n\t\t\t\t\tmaxRight: null,\r\n\t\t\t\t\tminBottom: null,\r\n\t\t\t\t\tmaxBottom: null\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.parent) {\r\n\t\t\t\t\tlimits.minLeft = left % gridX\r\n\t\t\t\t\tlimits.maxLeft = left + Math.floor((width - minW) / gridX) * gridX\r\n\t\t\t\t\tlimits.minTop = top % gridY\r\n\t\t\t\t\tlimits.maxTop = top + Math.floor((height - minH) / gridY) * gridY\r\n\t\t\t\t\tlimits.minRight = right % gridX\r\n\t\t\t\t\tlimits.maxRight = right + Math.floor((width - minW) / gridX) * gridX\r\n\t\t\t\t\tlimits.minBottom = bottom % gridY\r\n\t\t\t\t\tlimits.maxBottom = bottom + Math.floor((height - minH) / gridY) * gridY\r\n\r\n\t\t\t\t\tif (maxW) {\r\n\t\t\t\t\t\tlimits.minLeft = Math.max(limits.minLeft, this.parentWidth - right - maxW)\r\n\t\t\t\t\t\tlimits.minRight = Math.max(limits.minRight, this.parentWidth - left - maxW)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (maxH) {\r\n\t\t\t\t\t\tlimits.minTop = Math.max(limits.minTop, this.parentHeight - bottom - maxH)\r\n\t\t\t\t\t\tlimits.minBottom = Math.max(limits.minBottom, this.parentHeight - top - maxH)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.lockAspectRatio) {\r\n\t\t\t\t\t\tlimits.minLeft = Math.max(limits.minLeft, left - top * aspectFactor)\r\n\t\t\t\t\t\tlimits.minTop = Math.max(limits.minTop, top - left / aspectFactor)\r\n\t\t\t\t\t\tlimits.minRight = Math.max(limits.minRight, right - bottom * aspectFactor)\r\n\t\t\t\t\t\tlimits.minBottom = Math.max(limits.minBottom, bottom - right / aspectFactor)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlimits.minLeft = null\r\n\t\t\t\t\tlimits.maxLeft = left + Math.floor((width - minW) / gridX) * gridX\r\n\t\t\t\t\tlimits.minTop = null\r\n\t\t\t\t\tlimits.maxTop = top + Math.floor((height - minH) / gridY) * gridY\r\n\t\t\t\t\tlimits.minRight = null\r\n\t\t\t\t\tlimits.maxRight = right + Math.floor((width - minW) / gridX) * gridX\r\n\t\t\t\t\tlimits.minBottom = null\r\n\t\t\t\t\tlimits.maxBottom = bottom + Math.floor((height - minH) / gridY) * gridY\r\n\r\n\t\t\t\t\tif (maxW) {\r\n\t\t\t\t\t\tlimits.minLeft = -(right + maxW)\r\n\t\t\t\t\t\tlimits.minRight = -(left + maxW)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (maxH) {\r\n\t\t\t\t\t\tlimits.minTop = -(bottom + maxH)\r\n\t\t\t\t\t\tlimits.minBottom = -(top + maxH)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.lockAspectRatio && (maxW && maxH)) {\r\n\t\t\t\t\t\tlimits.minLeft = Math.min(limits.minLeft, -(right + maxW))\r\n\t\t\t\t\t\tlimits.minTop = Math.min(limits.minTop, -(maxH + bottom))\r\n\t\t\t\t\t\tlimits.minRight = Math.min(limits.minRight, -left - maxW)\r\n\t\t\t\t\t\tlimits.minBottom = Math.min(limits.minBottom, -top - maxH)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn limits\r\n\t\t\t},\r\n\t\t\t// 移动\r\n\t\t\tmove(e) {\r\n\t\t\t\tif (this.resizing) {\r\n\t\t\t\t\tthis.handleResize(e)\r\n\t\t\t\t} else if (this.dragging) {\r\n\t\t\t\t\tthis.handleDrag(e)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 元素移动\r\n\t\t\tasync handleDrag(e) {\r\n\t\t\t\tconst axis = this.axis\r\n\t\t\t\tconst grid = this.grid\r\n\t\t\t\tconst bounds = this.bounds\r\n\t\t\t\tconst mouseClickPosition = this.mouseClickPosition\r\n\r\n\t\t\t\tconst tmpDeltaX = axis && axis !== 'y' ? mouseClickPosition.mouseX - (e.touches ? e.touches[0].pageX : e.pageX) :\r\n\t\t\t\t\t0\r\n\t\t\t\tconst tmpDeltaY = axis && axis !== 'x' ? mouseClickPosition.mouseY - (e.touches ? e.touches[0].pageY : e.pageY) :\r\n\t\t\t\t\t0\r\n\r\n\t\t\t\tconst [deltaX, deltaY] = snapToGrid(grid, tmpDeltaX, tmpDeltaY, this.scaleRatio)\r\n\r\n\t\t\t\tconst left = restrictToBounds(mouseClickPosition.left - deltaX, bounds.minLeft, bounds.maxLeft)\r\n\t\t\t\tconst top = restrictToBounds(mouseClickPosition.top - deltaY, bounds.minTop, bounds.maxTop)\r\n\t\t\t\tif (this.onDrag(left, top) === false) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tconst right = restrictToBounds(mouseClickPosition.right + deltaX, bounds.minRight, bounds.maxRight)\r\n\t\t\t\tconst bottom = restrictToBounds(mouseClickPosition.bottom + deltaY, bounds.minBottom, bounds.maxBottom)\r\n\t\t\t\tthis.left = left\r\n\t\t\t\tthis.top = top\r\n\t\t\t\tthis.right = right\r\n\t\t\t\tthis.bottom = bottom\n\t\t\t\t// resizingFn\n\t\t\t\tthis.$emit('resizing', this.left, this.top, this.width, this.height)\r\n\r\n\t\t\t\tawait this.snapCheck()\r\n\t\t\t\tthis.$emit('dragging', this.left, this.top)\r\n\t\t\t},\r\n\t\t\tmoveHorizontally(val) {\r\n\t\t\t\tconst [deltaX, _] = snapToGrid(this.grid, val, this.top, this.scale)\r\n\t\t\t\tconst left = restrictToBounds(deltaX, this.bounds.minLeft, this.bounds.maxLeft)\r\n\t\t\t\tthis.left = left\r\n\t\t\t\tthis.right = this.parentWidth - this.width - left\r\n\t\t\t},\r\n\t\t\tmoveVertically(val) {\r\n\t\t\t\tconst [_, deltaY] = snapToGrid(this.grid, this.left, val, this.scale)\r\n\t\t\t\tconst top = restrictToBounds(deltaY, this.bounds.minTop, this.bounds.maxTop)\r\n\t\t\t\tthis.top = top\r\n\t\t\t\tthis.bottom = this.parentHeight - this.height - top\r\n\t\t\t},\r\n\t\t\t// 控制柄移动\r\n\t\t\thandleResize(e) {\r\n\t\t\t\tlet left = this.left\r\n\t\t\t\tlet top = this.top\r\n\t\t\t\tlet right = this.right\r\n\t\t\t\tlet bottom = this.bottom\r\n\r\n\t\t\t\tconst mouseClickPosition = this.mouseClickPosition\r\n\t\t\t\tconst lockAspectRatio = this.lockAspectRatio\r\n\t\t\t\tconst aspectFactor = this.aspectFactor\n\t\t\t\t\n\t\t\t\tconst tmpDeltaX = mouseClickPosition.mouseX - (e.touches ? e.touches[0].pageX : e.pageX)\n\t\t\t\tconst tmpDeltaY = mouseClickPosition.mouseY - (e.touches ? e.touches[0].pageY : e.pageY)\n\r\n\t\t\t\tif (!this.widthTouched && tmpDeltaX) {\r\n\t\t\t\t\tthis.widthTouched = true\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.heightTouched && tmpDeltaY) {\r\n\t\t\t\t\tthis.heightTouched = true\r\n\t\t\t\t}\r\n\t\t\t\tconst [deltaX, deltaY] = snapToGrid(this.grid, tmpDeltaX, tmpDeltaY, this.scaleRatio)\r\n\r\n\t\t\t\tif (this.handle.includes('b')) {\r\n\t\t\t\t\tbottom = restrictToBounds(\r\n\t\t\t\t\t\tmouseClickPosition.bottom + deltaY,\r\n\t\t\t\t\t\tthis.bounds.minBottom,\r\n\t\t\t\t\t\tthis.bounds.maxBottom\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (this.lockAspectRatio && this.resizingOnY) {\r\n\t\t\t\t\t\tright = this.right - (this.bottom - bottom) * aspectFactor\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.handle.includes('t')) {\r\n\t\t\t\t\ttop = restrictToBounds(\r\n\t\t\t\t\t\tmouseClickPosition.top - deltaY,\r\n\t\t\t\t\t\tthis.bounds.minTop,\r\n\t\t\t\t\t\tthis.bounds.maxTop\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (this.lockAspectRatio && this.resizingOnY) {\r\n\t\t\t\t\t\tleft = this.left - (this.top - top) * aspectFactor\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.handle.includes('r')) {\r\n\t\t\t\t\tright = restrictToBounds(\r\n\t\t\t\t\t\tmouseClickPosition.right + deltaX,\r\n\t\t\t\t\t\tthis.bounds.minRight,\r\n\t\t\t\t\t\tthis.bounds.maxRight\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (this.lockAspectRatio && this.resizingOnX) {\r\n\t\t\t\t\t\tbottom = this.bottom - (this.right - right) / aspectFactor\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.handle.includes('l')) {\r\n\t\t\t\t\tleft = restrictToBounds(\r\n\t\t\t\t\t\tmouseClickPosition.left - deltaX,\r\n\t\t\t\t\t\tthis.bounds.minLeft,\r\n\t\t\t\t\t\tthis.bounds.maxLeft\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (this.lockAspectRatio && this.resizingOnX) {\r\n\t\t\t\t\t\ttop = this.top - (this.left - left) / aspectFactor\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst width = computeWidth(this.parentWidth, left, right)\r\n\t\t\t\tconst height = computeHeight(this.parentHeight, top, bottom)\r\n\t\t\t\tif (this.onResize(this.handle, left, top, width, height) === false) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.left = left\r\n\t\t\t\tthis.top = top\r\n\t\t\t\tthis.right = right\r\n\t\t\t\tthis.bottom = bottom\r\n\t\t\t\tthis.width = width\r\n\t\t\t\tthis.height = height\n\t\t\t\t// resizingFn\r\n\t\t\t\tthis.$emit('resizing', this.left, this.top, this.width, this.height)\r\n\t\t\t},\r\n\t\t\tchangeWidth(val) {\r\n\t\t\t\tconst [newWidth, _] = snapToGrid(this.grid, val, 0, this.scale)\r\n\t\t\t\tlet right = restrictToBounds(\r\n\t\t\t\t\t(this.parentWidth - newWidth - this.left),\r\n\t\t\t\t\tthis.bounds.minRight,\r\n\t\t\t\t\tthis.bounds.maxRight\r\n\t\t\t\t)\r\n\t\t\t\tlet bottom = this.bottom\r\n\t\t\t\tif (this.lockAspectRatio) {\r\n\t\t\t\t\tbottom = this.bottom - (this.right - right) / this.aspectFactor\r\n\t\t\t\t}\r\n\t\t\t\tconst width = computeWidth(this.parentWidth, this.left, right)\r\n\t\t\t\tconst height = computeHeight(this.parentHeight, this.top, bottom)\r\n\t\t\t\tthis.right = right\r\n\t\t\t\tthis.bottom = bottom\r\n\t\t\t\tthis.width = width\r\n\t\t\t\tthis.height = height\r\n\t\t\t},\r\n\t\t\tchangeHeight(val) {\r\n\t\t\t\tconst [_, newHeight] = snapToGrid(this.grid, 0, val, this.scale)\r\n\t\t\t\tlet bottom = restrictToBounds(\r\n\t\t\t\t\t(this.parentHeight - newHeight - this.top),\r\n\t\t\t\t\tthis.bounds.minBottom,\r\n\t\t\t\t\tthis.bounds.maxBottom\r\n\t\t\t\t)\r\n\t\t\t\tlet right = this.right\r\n\t\t\t\tif (this.lockAspectRatio) {\r\n\t\t\t\t\tright = this.right - (this.bottom - bottom) * this.aspectFactor\r\n\t\t\t\t}\r\n\t\t\t\tconst width = computeWidth(this.parentWidth, this.left, right)\r\n\t\t\t\tconst height = computeHeight(this.parentHeight, this.top, bottom)\r\n\t\t\t\tthis.right = right\r\n\t\t\t\tthis.bottom = bottom\r\n\t\t\t\tthis.width = width\r\n\t\t\t\tthis.height = height\r\n\t\t\t},\r\n\t\t\t// 从控制柄松开\r\n\t\t\tasync handleUp(e) {\r\n\t\t\t\tthis.handle = null\r\n\r\n\t\t\t\t// 初始化辅助线数据\r\n\t\t\t\tconst temArr = new Array(3).fill({\r\n\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\tposition: '',\r\n\t\t\t\t\torigin: '',\r\n\t\t\t\t\tlineLength: ''\r\n\t\t\t\t})\r\n\t\t\t\tconst refLine = {\r\n\t\t\t\t\tvLine: [],\r\n\t\t\t\t\thLine: []\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i in refLine) {\r\n\t\t\t\t\trefLine[i] = JSON.parse(JSON.stringify(temArr))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.resizing) {\r\n\t\t\t\t\tthis.resizing = false\r\n\t\t\t\t\tawait this.conflictCheck()\r\n\t\t\t\t\tthis.$emit('refLineParams', refLine)\r\n\t\t\t\t\tthis.$emit('resizestop', this.left, this.top, this.width, this.height)\r\n\t\t\t\t}\r\n\t\t\t\tif (this.dragging) {\r\n\t\t\t\t\tthis.dragging = false\r\n\t\t\t\t\tawait this.conflictCheck()\r\n\t\t\t\t\tthis.$emit('refLineParams', refLine)\r\n\t\t\t\t\tthis.$emit('dragstop', this.left, this.top)\r\n\t\t\t\t}\r\n\t\t\t\tthis.resetBoundsAndMouseState()\r\n\t\t\t\tremoveEvent(document.documentElement, eventsFor.move, this.handleResize)\r\n\t\t\t},\r\n\t\t\t// 新增方法 ↓↓↓\r\n\t\t\t// 设置属性\r\n\t\t\tsettingAttribute() {\r\n\t\t\t\t// 设置冲突检测\r\n\t\t\t\tthis.$el.setAttribute('data-is-check', `${this.isConflictCheck}`)\r\n\t\t\t\t// 设置对齐元素\r\n\t\t\t\tthis.$el.setAttribute('data-is-snap', `${this.snap}`)\r\n\t\t\t},\r\n\t\t\t// 冲突检测\r\n\t\t\tconflictCheck() {\r\n\t\t\t\tconst top = this.top\r\n\t\t\t\tconst left = this.left\r\n\t\t\t\tconst width = this.width\r\n\t\t\t\tconst height = this.height\r\n\r\n\t\t\t\tif (this.isConflictCheck) {\r\n\t\t\t\t\tconst nodes = this.$el.parentNode.childNodes // 获取当前父节点下所有子节点\r\n\t\t\t\t\tfor (let item of nodes) {\r\n\t\t\t\t\t\tif (item.className !== undefined && !item.className.includes(this.classNameActive) && item.getAttribute(\r\n\t\t\t\t\t\t\t\t'data-is-check') !== null && item.getAttribute('data-is-check') !== 'false') {\r\n\t\t\t\t\t\t\tconst tw = item.offsetWidth\r\n\t\t\t\t\t\t\tconst th = item.offsetHeight\r\n\t\t\t\t\t\t\t// 正则获取left与right\r\n\t\t\t\t\t\t\tlet [tl, tt] = this.formatTransformVal(item.style.transform)\r\n\r\n\t\t\t\t\t\t\t// 左上角与右下角重叠\r\n\t\t\t\t\t\t\tconst tfAndBr = (top >= tt && left >= tl && tt + th > top && tl + tw > left) || (top <= tt && left < tl && top +\r\n\t\t\t\t\t\t\t\theight > tt && left + width > tl)\r\n\t\t\t\t\t\t\t// 右上角与左下角重叠\r\n\t\t\t\t\t\t\tconst brAndTf = (left <= tl && top >= tt && left + width > tl && top < tt + th) || (top < tt && left > tl && top +\r\n\t\t\t\t\t\t\t\theight > tt && left < tl + tw)\r\n\t\t\t\t\t\t\t// 下边与上边重叠\r\n\t\t\t\t\t\t\tconst bAndT = (top <= tt && left >= tl && top + height > tt && left < tl + tw) || (top >= tt && left <= tl &&\r\n\t\t\t\t\t\t\t\ttop < tt + th && left > tl + tw)\r\n\t\t\t\t\t\t\t// 上边与下边重叠（宽度不一样）\r\n\t\t\t\t\t\t\tconst tAndB = (top <= tt && left >= tl && top + height > tt && left < tl + tw) || (top >= tt && left <= tl &&\r\n\t\t\t\t\t\t\t\ttop < tt + th && left > tl + tw)\r\n\t\t\t\t\t\t\t// 左边与右边重叠\r\n\t\t\t\t\t\t\tconst lAndR = (left >= tl && top >= tt && left < tl + tw && top < tt + th) || (top > tt && left <= tl && left +\r\n\t\t\t\t\t\t\t\twidth > tl && top < tt + th)\r\n\t\t\t\t\t\t\t// 左边与右边重叠（高度不一样）\r\n\t\t\t\t\t\t\tconst rAndL = (top <= tt && left >= tl && top + height > tt && left < tl + tw) || (top >= tt && left <= tl &&\r\n\t\t\t\t\t\t\t\ttop < tt + th && left + width > tl)\r\n\r\n\t\t\t\t\t\t\t// 如果冲突，就将回退到移动前的位置\r\n\t\t\t\t\t\t\tif (tfAndBr || brAndTf || bAndT || tAndB || lAndR || rAndL) {\r\n\t\t\t\t\t\t\t\tthis.top = this.mouseClickPosition.top\r\n\t\t\t\t\t\t\t\tthis.left = this.mouseClickPosition.left\r\n\t\t\t\t\t\t\t\tthis.right = this.mouseClickPosition.right\r\n\t\t\t\t\t\t\t\tthis.bottom = this.mouseClickPosition.bottom\r\n\t\t\t\t\t\t\t\tthis.width = this.mouseClickPosition.w\r\n\t\t\t\t\t\t\t\tthis.height = this.mouseClickPosition.h\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 检测对齐元素\r\n\t\t\tasync snapCheck() {\r\n\t\t\t\tlet width = this.width\r\n\t\t\t\tlet height = this.height\r\n\t\t\t\tif (this.snap) {\r\n\t\t\t\t\tlet activeLeft = this.left\r\n\t\t\t\t\tlet activeRight = this.left + width\r\n\t\t\t\t\tlet activeTop = this.top\r\n\t\t\t\t\tlet activeBottom = this.top + height\r\n\r\n\t\t\t\t\t// 初始化辅助线数据\r\n\t\t\t\t\tconst temArr = new Array(3).fill({\r\n\t\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\t\tposition: '',\r\n\t\t\t\t\t\torigin: '',\r\n\t\t\t\t\t\tlineLength: ''\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconst refLine = {\r\n\t\t\t\t\t\tvLine: [],\r\n\t\t\t\t\t\thLine: []\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let i in refLine) {\r\n\t\t\t\t\t\trefLine[i] = JSON.parse(JSON.stringify(temArr))\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 获取当前父节点下所有子节点\r\n\t\t\t\t\tconst nodes = this.$el.parentNode.childNodes\r\n\r\n\t\t\t\t\tlet tem = {\r\n\t\t\t\t\t\tvalue: {\r\n\t\t\t\t\t\t\tx: [\r\n\t\t\t\t\t\t\t\t[],\r\n\t\t\t\t\t\t\t\t[],\r\n\t\t\t\t\t\t\t\t[]\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\ty: [\r\n\t\t\t\t\t\t\t\t[],\r\n\t\t\t\t\t\t\t\t[],\r\n\t\t\t\t\t\t\t\t[]\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdisplay: [],\r\n\t\t\t\t\t\tposition: []\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tgroupWidth,\r\n\t\t\t\t\t\tgroupHeight,\r\n\t\t\t\t\t\tgroupLeft,\r\n\t\t\t\t\t\tgroupTop,\r\n\t\t\t\t\t\tbln\r\n\t\t\t\t\t} = await this.getActiveAll(nodes)\r\n\t\t\t\t\tif (!bln) {\r\n\t\t\t\t\t\twidth = groupWidth\r\n\t\t\t\t\t\theight = groupHeight\r\n\t\t\t\t\t\tactiveLeft = groupLeft\r\n\t\t\t\t\t\tactiveRight = groupLeft + groupWidth\r\n\t\t\t\t\t\tactiveTop = groupTop\r\n\t\t\t\t\t\tactiveBottom = groupTop + groupHeight\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let item of nodes) {\r\n\t\t\t\t\t\tif (item.className !== undefined && !item.className.includes(this.classNameActive) && item.getAttribute(\r\n\t\t\t\t\t\t\t\t'data-is-snap') !== null && item.getAttribute('data-is-snap') !== 'false') {\r\n\t\t\t\t\t\t\tconst w = item.offsetWidth\r\n\t\t\t\t\t\t\tconst h = item.offsetHeight\r\n\t\t\t\t\t\t\tconst [l, t] = this.formatTransformVal(item.style.transform)\r\n\t\t\t\t\t\t\tconst r = l + w // 对齐目标right\r\n\t\t\t\t\t\t\tconst b = t + h // 对齐目标的bottom\r\n\r\n\t\t\t\t\t\t\tconst hc = Math.abs((activeTop + height / 2) - (t + h / 2)) <= this.snapTolerance // 水平中线\r\n\t\t\t\t\t\t\tconst vc = Math.abs((activeLeft + width / 2) - (l + w / 2)) <= this.snapTolerance // 垂直中线\r\n\r\n\t\t\t\t\t\t\tconst ts = Math.abs(t - activeBottom) <= this.snapTolerance // 从上到下\r\n\t\t\t\t\t\t\tconst TS = Math.abs(b - activeBottom) <= this.snapTolerance // 从上到下\r\n\t\t\t\t\t\t\tconst bs = Math.abs(t - activeTop) <= this.snapTolerance // 从下到上\r\n\t\t\t\t\t\t\tconst BS = Math.abs(b - activeTop) <= this.snapTolerance // 从下到上\r\n\r\n\t\t\t\t\t\t\tconst ls = Math.abs(l - activeRight) <= this.snapTolerance // 外左\r\n\t\t\t\t\t\t\tconst LS = Math.abs(r - activeRight) <= this.snapTolerance // 外左\r\n\t\t\t\t\t\t\tconst rs = Math.abs(l - activeLeft) <= this.snapTolerance // 外右\r\n\t\t\t\t\t\t\tconst RS = Math.abs(r - activeLeft) <= this.snapTolerance // 外右\r\n\r\n\t\t\t\t\t\t\ttem['display'] = [ts, TS, bs, BS, hc, hc, ls, LS, rs, RS, vc, vc]\r\n\t\t\t\t\t\t\ttem['position'] = [t, b, t, b, t + h / 2, t + h / 2, l, r, l, r, l + w / 2, l + w / 2]\r\n\r\n\t\t\t\t\t\t\tif (ts) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.top = t - height\r\n\t\t\t\t\t\t\t\t\tthis.bottom = this.parentHeight - this.top - height\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.y[0].push(l, r, activeLeft, activeRight)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (bs) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.top = t\r\n\t\t\t\t\t\t\t\t\tthis.bottom = this.parentHeight - this.top - height\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.y[0].push(l, r, activeLeft, activeRight)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (TS) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.top = b - height\r\n\t\t\t\t\t\t\t\t\tthis.bottom = this.parentHeight - this.top - height\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.y[1].push(l, r, activeLeft, activeRight)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (BS) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.top = b\r\n\t\t\t\t\t\t\t\t\tthis.bottom = this.parentHeight - this.top - height\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.y[1].push(l, r, activeLeft, activeRight)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (ls) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.left = l - width\r\n\t\t\t\t\t\t\t\t\tthis.right = this.parentWidth - this.left - width\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.x[0].push(t, b, activeTop, activeBottom)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (rs) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.left = l\r\n\t\t\t\t\t\t\t\t\tthis.right = this.parentWidth - this.left - width\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.x[0].push(t, b, activeTop, activeBottom)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (LS) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.left = r - width\r\n\t\t\t\t\t\t\t\t\tthis.right = this.parentWidth - this.left - width\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.x[1].push(t, b, activeTop, activeBottom)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (RS) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.left = r\r\n\t\t\t\t\t\t\t\t\tthis.right = this.parentWidth - this.left - width\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.x[1].push(t, b, activeTop, activeBottom)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (hc) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.top = t + h / 2 - height / 2\r\n\t\t\t\t\t\t\t\t\tthis.bottom = this.parentHeight - this.top - height\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.y[2].push(l, r, activeLeft, activeRight)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (vc) {\r\n\t\t\t\t\t\t\t\tif (bln) {\r\n\t\t\t\t\t\t\t\t\tthis.left = l + w / 2 - width / 2\r\n\t\t\t\t\t\t\t\t\tthis.right = this.parentWidth - this.left - width\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttem.value.x[2].push(t, b, activeTop, activeBottom)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// 辅助线坐标与是否显示(display)对应的数组,易于循环遍历\r\n\t\t\t\t\t\t\tconst arrTem = [0, 1, 0, 1, 2, 2, 0, 1, 0, 1, 2, 2]\r\n\t\t\t\t\t\t\tfor (let i = 0; i <= arrTem.length; i++) {\r\n\t\t\t\t\t\t\t\t// 前6为Y辅助线,后6为X辅助线\r\n\t\t\t\t\t\t\t\tconst xory = i < 6 ? 'y' : 'x'\r\n\t\t\t\t\t\t\t\tconst horv = i < 6 ? 'hLine' : 'vLine'\r\n\t\t\t\t\t\t\t\tif (tem.display[i]) {\r\n\t\t\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\t\t\torigin,\r\n\t\t\t\t\t\t\t\t\t\tlength\r\n\t\t\t\t\t\t\t\t\t} = this.calcLineValues(tem.value[xory][arrTem[i]])\r\n\t\t\t\t\t\t\t\t\trefLine[horv][arrTem[i]].display = tem.display[i]\r\n\t\t\t\t\t\t\t\t\trefLine[horv][arrTem[i]].position = tem.position[i] + 'px'\r\n\t\t\t\t\t\t\t\t\trefLine[horv][arrTem[i]].origin = origin\r\n\t\t\t\t\t\t\t\t\trefLine[horv][arrTem[i]].lineLength = length\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$emit('refLineParams', refLine)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcalcLineValues(arr) {\r\n\t\t\t\tconst length = Math.max(...arr) - Math.min(...arr) + 'px'\r\n\t\t\t\tconst origin = Math.min(...arr) + 'px'\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlength,\r\n\t\t\t\t\torigin\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getActiveAll(nodes) {\r\n\t\t\t\tconst activeAll = []\r\n\t\t\t\tconst XArray = []\r\n\t\t\t\tconst YArray = []\r\n\t\t\t\tlet groupWidth = 0\r\n\t\t\t\tlet groupHeight = 0\r\n\t\t\t\tlet groupLeft = 0\r\n\t\t\t\tlet groupTop = 0\r\n\t\t\t\tfor (let item of nodes) {\r\n\t\t\t\t\tif (item.className !== undefined && item.className.includes(this.classNameActive)) {\r\n\t\t\t\t\t\tactiveAll.push(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst AllLength = activeAll.length\r\n\t\t\t\tif (AllLength > 1) {\r\n\t\t\t\t\tfor (let i of activeAll) {\r\n\t\t\t\t\t\tconst l = i.offsetLeft\r\n\t\t\t\t\t\tconst r = l + i.offsetWidth\r\n\t\t\t\t\t\tconst t = i.offsetTop\r\n\t\t\t\t\t\tconst b = t + i.offsetHeight\r\n\t\t\t\t\t\tXArray.push(t, b)\r\n\t\t\t\t\t\tYArray.push(l, r)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgroupWidth = Math.max(...YArray) - Math.min(...YArray)\r\n\t\t\t\t\tgroupHeight = Math.max(...XArray) - Math.min(...XArray)\r\n\t\t\t\t\tgroupLeft = Math.min(...YArray)\r\n\t\t\t\t\tgroupTop = Math.min(...XArray)\r\n\t\t\t\t}\r\n\t\t\t\tconst bln = AllLength === 1\r\n\t\t\t\treturn {\r\n\t\t\t\t\tgroupWidth,\r\n\t\t\t\t\tgroupHeight,\r\n\t\t\t\t\tgroupLeft,\r\n\t\t\t\t\tgroupTop,\r\n\t\t\t\t\tbln\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 正则获取left与top\r\n\t\t\tformatTransformVal(string) {\r\n\t\t\t\tlet [left, top] = string.replace(/[^0-9\\-,]/g, '').split(',')\r\n\t\t\t\tif (top === undefined) top = 0\r\n\t\t\t\treturn [+left, +top]\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\thandleStyle() {\r\n\t\t\t\treturn (stick) => {\r\n\t\t\t\t\tif (!this.handleInfo.switch) return {\r\n\t\t\t\t\t\tdisplay: this.enabled ? 'block' : 'none'\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst size = (this.handleInfo.size / this.scaleRatio).toFixed(2)\r\n\t\t\t\t\tconst offset = (this.handleInfo.offset / this.scaleRatio).toFixed(2)\r\n\t\t\t\t\tconst center = (size / 2).toFixed(2)\r\n\r\n\t\t\t\t\tconst styleMap = {\r\n\t\t\t\t\t\ttl: {\r\n\t\t\t\t\t\t\ttop: `${offset}px`,\r\n\t\t\t\t\t\t\tleft: `${offset}px`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttm: {\r\n\t\t\t\t\t\t\ttop: `${offset}px`,\r\n\t\t\t\t\t\t\tleft: `calc(50% - ${center}px)`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttr: {\r\n\t\t\t\t\t\t\ttop: `${offset}px`,\r\n\t\t\t\t\t\t\tright: `${offset}px`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmr: {\r\n\t\t\t\t\t\t\ttop: `calc(50% - ${center}px)`,\r\n\t\t\t\t\t\t\tright: `${offset}px`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbr: {\r\n\t\t\t\t\t\t\tbottom: `${offset}px`,\r\n\t\t\t\t\t\t\tright: `${offset}px`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbm: {\r\n\t\t\t\t\t\t\tbottom: `${offset}px`,\r\n\t\t\t\t\t\t\tright: `calc(50% - ${center}px)`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbl: {\r\n\t\t\t\t\t\t\tbottom: `${offset}px`,\r\n\t\t\t\t\t\t\tleft: `${offset}px`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tml: {\r\n\t\t\t\t\t\t\ttop: `calc(50% - ${center}px)`,\r\n\t\t\t\t\t\t\tleft: `${offset}px`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst stickStyle = {\r\n\t\t\t\t\t\twidth: `${size}px`,\r\n\t\t\t\t\t\theight: `${size}px`,\r\n\t\t\t\t\t\ttop: styleMap[stick].top,\r\n\t\t\t\t\t\tleft: styleMap[stick].left,\r\n\t\t\t\t\t\tright: styleMap[stick].right,\r\n\t\t\t\t\t\tbottom: styleMap[stick].bottom\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstickStyle.display = this.enabled ? 'block' : 'none'\r\n\t\t\t\t\treturn stickStyle\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstyle() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttransform: `translate(${this.left}px, ${this.top}px)`,\r\n\t\t\t\t\twidth: this.computedWidth,\r\n\t\t\t\t\theight: this.computedHeight,\r\n\t\t\t\t\tzIndex: this.zIndex,\r\n\t\t\t\t\t...(this.dragging && this.disableUserSelect ? userSelectNone : userSelectAuto)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 控制柄显示与否\r\n\t\t\tactualHandles() {\r\n\t\t\t\tif (!this.resizable) return []\r\n\r\n\t\t\t\treturn this.handles\r\n\t\t\t},\r\n\t\t\tcomputedWidth() {\r\n\t\t\t\tif (this.w === 'auto') {\r\n\t\t\t\t\tif (!this.widthTouched) {\r\n\t\t\t\t\t\treturn 'auto'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this.width + 'px'\r\n\t\t\t},\r\n\t\t\tcomputedHeight() {\r\n\t\t\t\tif (this.h === 'auto') {\r\n\t\t\t\t\tif (!this.heightTouched) {\r\n\t\t\t\t\t\treturn 'auto'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this.height + 'px'\r\n\t\t\t},\r\n\t\t\tresizingOnX() {\r\n\t\t\t\treturn (Boolean(this.handle) && (this.handle.includes('l') || this.handle.includes('r')))\r\n\t\t\t},\r\n\t\t\tresizingOnY() {\r\n\t\t\t\treturn (Boolean(this.handle) && (this.handle.includes('t') || this.handle.includes('b')))\r\n\t\t\t},\r\n\t\t\tisCornerHandle() {\r\n\t\t\t\treturn (Boolean(this.handle) && ['tl', 'tr', 'br', 'bl'].includes(this.handle))\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\t\t\tactive(val) {\r\n\t\t\t\tthis.enabled = val\r\n\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tthis.$emit('activated')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$emit('deactivated')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tz(val) {\r\n\t\t\t\tif (val >= 0 || val === 'auto') {\r\n\t\t\t\t\tthis.zIndex = val\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tx(val) {\r\n\t\t\t\tif (this.resizing || this.dragging) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.parent) {\r\n\t\t\t\t\tthis.bounds = this.calcDragLimits()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.moveHorizontally(val)\r\n\t\t\t},\r\n\t\t\ty(val) {\r\n\t\t\t\tif (this.resizing || this.dragging) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.parent) {\r\n\t\t\t\t\tthis.bounds = this.calcDragLimits()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.moveVertically(val)\r\n\t\t\t},\r\n\t\t\tlockAspectRatio(val) {\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tthis.aspectFactor = this.width / this.height\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.aspectFactor = undefined\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tminWidth(val) {\r\n\t\t\t\tif (val > 0 && val <= this.width) {\r\n\t\t\t\t\tthis.minW = val\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tminHeight(val) {\r\n\t\t\t\tif (val > 0 && val <= this.height) {\r\n\t\t\t\t\tthis.minH = val\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmaxWidth(val) {\r\n\t\t\t\tthis.maxW = val\r\n\t\t\t},\r\n\t\t\tmaxHeight(val) {\r\n\t\t\t\tthis.maxH = val\r\n\t\t\t},\r\n\t\t\tw(val) {\r\n\t\t\t\tif (this.resizing || this.dragging) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.parent) {\r\n\t\t\t\t\tthis.bounds = this.calcResizeLimits()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.changeWidth(val)\r\n\t\t\t},\r\n\t\t\th(val) {\r\n\t\t\t\tif (this.resizing || this.dragging) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.parent) {\r\n\t\t\t\t\tthis.bounds = this.calcResizeLimits()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.changeHeight(val)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.vdr {\r\n\t\ttouch-action: none;\r\n\t\tposition: absolute;\r\n\t\tbox-sizing: border-box;\r\n\t\tborder: 1px dashed #d6d6d6;\r\n\t}\r\n\r\n\t.handle {\r\n\t\tbox-sizing: border-box;\r\n\t\tposition: absolute;\r\n\t\twidth: 8px;\r\n\t\theight: 8px;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: #ffffff;\r\n\t\tborder: 1px solid rgb(240, 18, 18);\r\n\t\tbox-shadow: 0 0 2px #bbb;\r\n\t}\r\n\r\n\t.handle-tl {\r\n\t\ttop: -5px;\r\n\t\tleft: -5px;\r\n\t\tcursor: nw-resize;\r\n\t}\r\n\r\n\t.handle-tm {\r\n\t\ttop: -5px;\r\n\t\tleft: calc(50% - 4px);\r\n\t\tcursor: n-resize;\r\n\t}\r\n\r\n\t.handle-tr {\r\n\t\ttop: -5px;\r\n\t\tright: -5px;\r\n\t\tcursor: ne-resize;\r\n\t}\r\n\r\n\t.handle-ml {\r\n\t\ttop: calc(50% - 4px);\r\n\t\tleft: -5px;\r\n\t\tcursor: w-resize;\r\n\t}\r\n\r\n\t.handle-mr {\r\n\t\ttop: calc(50% - 4px);\r\n\t\tright: -5px;\r\n\t\tcursor: e-resize;\r\n\t}\r\n\r\n\t.handle-bl {\r\n\t\tbottom: -5px;\r\n\t\tleft: -5px;\r\n\t\tcursor: sw-resize;\r\n\t}\r\n\r\n\t.handle-bm {\r\n\t\tbottom: -5px;\r\n\t\tleft: calc(50% - 4px);\r\n\t\t/*margin-left: -5px;*/\r\n\t\tcursor: s-resize;\r\n\t}\r\n\r\n\t.handle-br {\r\n\t\tbottom: -5px;\r\n\t\tright: -5px;\r\n\t\tcursor: se-resize;\r\n\t}\r\n\r\n\t.ref-line {\r\n\t\tposition: absolute;\r\n\t\tbackground-color: rgb(255, 0, 204);\r\n\t\tz-index: 9999;\r\n\t}\r\n\r\n\t.v-line {\r\n\t\twidth: 1px;\r\n\t}\r\n\r\n\t.h-line {\r\n\t\theight: 1px;\r\n\t}\r\n\r\n\t@media only screen and (max-width: 768px) {\r\n\t\t[class*=\"handle-\"]:before {\r\n\t\t\tcontent: '';\r\n\t\t\tleft: -10px;\r\n\t\t\tright: -10px;\r\n\t\t\tbottom: -10px;\r\n\t\t\ttop: -10px;\r\n\t\t\tposition: absolute;\r\n\t\t}\r\n\t}\r\n</style>\n"]}]}