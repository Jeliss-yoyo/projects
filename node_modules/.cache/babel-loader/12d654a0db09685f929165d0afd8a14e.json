{"remainingRequest":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\thread-loader\\dist\\cjs.js!D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\babel-loader\\lib\\index.js!D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\resizable\\vue-resizable.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\resizable\\vue-resizable.vue","mtime":1611052298585},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1585119190579},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1585119193187},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\babel-loader\\lib\\index.js","mtime":1607477892317},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1585119190579},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js","mtime":1609899827306}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L3dvcmtzcGFjZS9IQnVpbGRlclgvU0YtVGVhbS9ua3BsYXQtZGVzaWduL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJEOi93b3Jrc3BhY2UvSEJ1aWxkZXJYL1NGLVRlYW0vbmtwbGF0LWRlc2lnbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiRDovd29ya3NwYWNlL0hCdWlsZGVyWC9TRi1UZWFtL25rcGxhdC1kZXNpZ24vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi93b3Jrc3BhY2UvSEJ1aWxkZXJYL1NGLVRlYW0vbmtwbGF0LWRlc2lnbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJEOi93b3Jrc3BhY2UvSEJ1aWxkZXJYL1NGLVRlYW0vbmtwbGF0LWRlc2lnbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hdGNoZXNTZWxlY3RvclRvUGFyZW50RWxlbWVudHMsIGdldENvbXB1dGVkU2l6ZSwgYWRkRXZlbnQsIHJlbW92ZUV2ZW50IH0gZnJvbSAnQC91dGlscy9yZXNpemFibGUvZG9tJzsKaW1wb3J0IHsgY29tcHV0ZVdpZHRoLCBjb21wdXRlSGVpZ2h0LCByZXN0cmljdFRvQm91bmRzLCBzbmFwVG9HcmlkIH0gZnJvbSAnQC91dGlscy9yZXNpemFibGUvZm5zJzsKdmFyIGV2ZW50cyA9IHsKICBtb3VzZTogewogICAgc3RhcnQ6ICdtb3VzZWRvd24nLAogICAgbW92ZTogJ21vdXNlbW92ZScsCiAgICBzdG9wOiAnbW91c2V1cCcKICB9LAogIHRvdWNoOiB7CiAgICBzdGFydDogJ3RvdWNoc3RhcnQnLAogICAgbW92ZTogJ3RvdWNobW92ZScsCiAgICBzdG9wOiAndG91Y2hlbmQnCiAgfQp9OyAvLyDnpoHmraLnlKjmiLfpgInlj5YKCnZhciB1c2VyU2VsZWN0Tm9uZSA9IHsKICB1c2VyU2VsZWN0OiAnbm9uZScsCiAgTW96VXNlclNlbGVjdDogJ25vbmUnLAogIFdlYmtpdFVzZXJTZWxlY3Q6ICdub25lJywKICBNc1VzZXJTZWxlY3Q6ICdub25lJwp9OyAvLyDnlKjmiLfpgInkuK3oh6rliqgKCnZhciB1c2VyU2VsZWN0QXV0byA9IHsKICB1c2VyU2VsZWN0OiAnYXV0bycsCiAgTW96VXNlclNlbGVjdDogJ2F1dG8nLAogIFdlYmtpdFVzZXJTZWxlY3Q6ICdhdXRvJywKICBNc1VzZXJTZWxlY3Q6ICdhdXRvJwp9Owp2YXIgZXZlbnRzRm9yID0gZXZlbnRzLm1vdXNlOwpleHBvcnQgZGVmYXVsdCB7CiAgcmVwbGFjZTogdHJ1ZSwKICBuYW1lOiAndnVlLXJlc2l6YWJsZScsCiAgcHJvcHM6IHsKICAgIGNsYXNzTmFtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICd2ZHInCiAgICB9LAogICAgY2xhc3NOYW1lRHJhZ2dhYmxlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2RyYWdnYWJsZScKICAgIH0sCiAgICBjbGFzc05hbWVSZXNpemFibGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAncmVzaXphYmxlJwogICAgfSwKICAgIGNsYXNzTmFtZURyYWdnaW5nOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2RyYWdnaW5nJwogICAgfSwKICAgIGNsYXNzTmFtZVJlc2l6aW5nOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ3Jlc2l6aW5nJwogICAgfSwKICAgIGNsYXNzTmFtZUFjdGl2ZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdhY3RpdmUnCiAgICB9LAogICAgY2xhc3NOYW1lSGFuZGxlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2hhbmRsZScKICAgIH0sCiAgICBkaXNhYmxlVXNlclNlbGVjdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgZW5hYmxlTmF0aXZlRHJhZzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIHByZXZlbnREZWFjdGl2YXRpb246IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBhY3RpdmU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBkcmFnZ2FibGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHJlc2l6YWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgLy8g6ZSB5a6a5a696auY5q+UCiAgICBsb2NrQXNwZWN0UmF0aW86IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICB3OiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IDIwMCwKICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbiB2YWxpZGF0b3IodmFsKSB7CiAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7CiAgICAgICAgICByZXR1cm4gdmFsID4gMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiB2YWwgPT09ICdhdXRvJzsKICAgICAgfQogICAgfSwKICAgIGg6IHsKICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwKICAgICAgZGVmYXVsdDogMjAwLAogICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uIHZhbGlkYXRvcih2YWwpIHsKICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgIHJldHVybiB2YWwgPiAwOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHZhbCA9PT0gJ2F1dG8nOwogICAgICB9CiAgICB9LAogICAgbWluV2lkdGg6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxMCwKICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbiB2YWxpZGF0b3IodmFsKSB7CiAgICAgICAgcmV0dXJuIHZhbCA+PSAwOwogICAgICB9CiAgICB9LAogICAgbWluSGVpZ2h0OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMTAsCiAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24gdmFsaWRhdG9yKHZhbCkgewogICAgICAgIHJldHVybiB2YWwgPj0gMDsKICAgICAgfQogICAgfSwKICAgIG1heFdpZHRoOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogbnVsbCwKICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbiB2YWxpZGF0b3IodmFsKSB7CiAgICAgICAgcmV0dXJuIHZhbCA+PSAwOwogICAgICB9CiAgICB9LAogICAgbWF4SGVpZ2h0OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogbnVsbCwKICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbiB2YWxpZGF0b3IodmFsKSB7CiAgICAgICAgcmV0dXJuIHZhbCA+PSAwOwogICAgICB9CiAgICB9LAogICAgeDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDAKICAgIH0sCiAgICB5OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMAogICAgfSwKICAgIHo6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgZGVmYXVsdDogJ2F1dG8nLAogICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uIHZhbGlkYXRvcih2YWwpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyB2YWwgPT09ICdhdXRvJyA6IHZhbCA+PSAwOwogICAgICB9CiAgICB9LAogICAgYmdDbHI6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAncmdiYSgwLCAwLCAwLCAwKScKICAgIH0sCiAgICBiZ0ltYWdlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICBiZ1NpemU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIC8vIOe7hOS7tuWGheWuue+8iOe7hOS7tklE77yJCiAgICBlbGVJZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgaGFuZGxlczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFsndGwnLCAndG0nLCAndHInLCAnbXInLCAnYnInLCAnYm0nLCAnYmwnLCAnbWwnXTsKICAgICAgfSwKICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbiB2YWxpZGF0b3IodmFsKSB7CiAgICAgICAgdmFyIHMgPSBuZXcgU2V0KFsndGwnLCAndG0nLCAndHInLCAnbXInLCAnYnInLCAnYm0nLCAnYmwnLCAnbWwnXSk7CiAgICAgICAgcmV0dXJuIG5ldyBTZXQodmFsLmZpbHRlcihmdW5jdGlvbiAoaCkgewogICAgICAgICAgcmV0dXJuIHMuaGFzKGgpOwogICAgICAgIH0pKS5zaXplID09PSB2YWwubGVuZ3RoOwogICAgICB9CiAgICB9LAogICAgZHJhZ0hhbmRsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBkcmFnQ2FuY2VsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGF4aXM6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnYm90aCcsCiAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24gdmFsaWRhdG9yKHZhbCkgewogICAgICAgIHJldHVybiBbJ3gnLCAneScsICdib3RoJ10uaW5jbHVkZXModmFsKTsKICAgICAgfQogICAgfSwKICAgIGdyaWQ6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbMSwgMV07CiAgICAgIH0KICAgIH0sCiAgICBwYXJlbnQ6IHsKICAgICAgdHlwZTogW0Jvb2xlYW4sIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgb25EcmFnU3RhcnQ6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9LAogICAgb25EcmFnOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIG9uUmVzaXplU3RhcnQ6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9LAogICAgb25SZXNpemU6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9LAogICAgLy8g5Yay56qB5qOA5rWLCiAgICBpc0NvbmZsaWN0Q2hlY2s6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICAvLyDlhYPntKDlr7npvZAKICAgIHNuYXA6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICAvLyDlvZPosIPnlKjlr7npvZDml7bvvIznlKjmnaXorr7nva7nu4Tku7bkuI7nu4Tku7bkuYvpl7TnmoTlr7npvZDot53nprvvvIzku6Xlg4/ntKDkuLrljZXkvY0KICAgIHNuYXBUb2xlcmFuY2U6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA1LAogICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uIHZhbGlkYXRvcih2YWwpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcic7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnvKnmlL7mr5TkvosKICAgIHNjYWxlUmF0aW86IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxLAogICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uIHZhbGlkYXRvcih2YWwpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcic7CiAgICAgIH0KICAgIH0sCiAgICAvLyBoYW5kbGXmmK/lkKbnvKnmlL4KICAgIGhhbmRsZUluZm86IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgc2l6ZTogNiwKICAgICAgICAgIG9mZnNldDogLTUsCiAgICAgICAgICBzd2l0Y2g6IHRydWUKICAgICAgICB9OwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGVmdDogdGhpcy54LAogICAgICB0b3A6IHRoaXMueSwKICAgICAgcmlnaHQ6IG51bGwsCiAgICAgIGJvdHRvbTogbnVsbCwKICAgICAgd2lkdGg6IG51bGwsCiAgICAgIGhlaWdodDogbnVsbCwKICAgICAgd2lkdGhUb3VjaGVkOiBmYWxzZSwKICAgICAgaGVpZ2h0VG91Y2hlZDogZmFsc2UsCiAgICAgIGFzcGVjdEZhY3RvcjogbnVsbCwKICAgICAgcGFyZW50V2lkdGg6IG51bGwsCiAgICAgIHBhcmVudEhlaWdodDogbnVsbCwKICAgICAgbWluVzogdGhpcy5taW5XaWR0aCwKICAgICAgbWluSDogdGhpcy5taW5IZWlnaHQsCiAgICAgIG1heFc6IHRoaXMubWF4V2lkdGgsCiAgICAgIG1heEg6IHRoaXMubWF4SGVpZ2h0LAogICAgICBoYW5kbGU6IG51bGwsCiAgICAgIGVuYWJsZWQ6IHRoaXMuYWN0aXZlLAogICAgICByZXNpemluZzogZmFsc2UsCiAgICAgIGRyYWdnaW5nOiBmYWxzZSwKICAgICAgekluZGV4OiB0aGlzLnoKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIOaXoOaViOeahHByb3DvvJptaW5XaWR0aOS4jeiDveWkp+S6jm1heFdpZHRoCiAgICBpZiAodGhpcy5tYXhXaWR0aCAmJiB0aGlzLm1pbldpZHRoID4gdGhpcy5tYXhXaWR0aCkgY29uc29sZS53YXJuKCdbVmRyIHdhcm5dOiBJbnZhbGlkIHByb3A6IG1pbldpZHRoIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gbWF4V2lkdGgnKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIOaXoOaViHByb3DvvJptaW5IZWlnaHTkuI3og73lpKfkuo5tYXhIZWlnaHQnCgogICAgaWYgKHRoaXMubWF4V2lkdGggJiYgdGhpcy5taW5IZWlnaHQgPiB0aGlzLm1heEhlaWdodCkgY29uc29sZS53YXJuKCdbVmRyIHdhcm5dOiBJbnZhbGlkIHByb3A6IG1pbkhlaWdodCBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIG1heEhlaWdodCcpOwogICAgdGhpcy5yZXNldEJvdW5kc0FuZE1vdXNlU3RhdGUoKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBpZiAoIXRoaXMuZW5hYmxlTmF0aXZlRHJhZykgewogICAgICB0aGlzLiRlbC5vbmRyYWdzdGFydCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH07CiAgICB9CgogICAgdmFyIF90aGlzJGdldFBhcmVudFNpemUgPSB0aGlzLmdldFBhcmVudFNpemUoKSwKICAgICAgICBfdGhpcyRnZXRQYXJlbnRTaXplMiA9IF9zbGljZWRUb0FycmF5KF90aGlzJGdldFBhcmVudFNpemUsIDIpLAogICAgICAgIHBhcmVudFdpZHRoID0gX3RoaXMkZ2V0UGFyZW50U2l6ZTJbMF0sCiAgICAgICAgcGFyZW50SGVpZ2h0ID0gX3RoaXMkZ2V0UGFyZW50U2l6ZTJbMV07CgogICAgdGhpcy5wYXJlbnRXaWR0aCA9IHBhcmVudFdpZHRoOwogICAgdGhpcy5wYXJlbnRIZWlnaHQgPSBwYXJlbnRIZWlnaHQ7CgogICAgdmFyIF9nZXRDb21wdXRlZFNpemUgPSBnZXRDb21wdXRlZFNpemUodGhpcy4kZWwpLAogICAgICAgIF9nZXRDb21wdXRlZFNpemUyID0gX3NsaWNlZFRvQXJyYXkoX2dldENvbXB1dGVkU2l6ZSwgMiksCiAgICAgICAgd2lkdGggPSBfZ2V0Q29tcHV0ZWRTaXplMlswXSwKICAgICAgICBoZWlnaHQgPSBfZ2V0Q29tcHV0ZWRTaXplMlsxXTsKCiAgICB0aGlzLmFzcGVjdEZhY3RvciA9ICh0aGlzLncgIT09ICdhdXRvJyA/IHRoaXMudyA6IHdpZHRoKSAvICh0aGlzLmggIT09ICdhdXRvJyA/IHRoaXMuaCA6IGhlaWdodCk7CiAgICB0aGlzLndpZHRoID0gdGhpcy53ICE9PSAnYXV0bycgPyB0aGlzLncgOiB3aWR0aDsKICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5oICE9PSAnYXV0bycgPyB0aGlzLmggOiBoZWlnaHQ7CiAgICB0aGlzLnJpZ2h0ID0gdGhpcy5wYXJlbnRXaWR0aCAtIHRoaXMud2lkdGggLSB0aGlzLmxlZnQ7CiAgICB0aGlzLmJvdHRvbSA9IHRoaXMucGFyZW50SGVpZ2h0IC0gdGhpcy5oZWlnaHQgLSB0aGlzLnRvcDsKICAgIHRoaXMuc2V0dGluZ0F0dHJpYnV0ZSgpOwogICAgYWRkRXZlbnQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAnbW91c2Vkb3duJywgdGhpcy5kZXNlbGVjdCk7CiAgICBhZGRFdmVudChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsICd0b3VjaGVuZCB0b3VjaGNhbmNlbCcsIHRoaXMuZGVzZWxlY3QpOwogICAgYWRkRXZlbnQod2luZG93LCAncmVzaXplJywgdGhpcy5jaGVja1BhcmVudFNpemUpOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIHJlbW92ZUV2ZW50KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgJ21vdXNlZG93bicsIHRoaXMuZGVzZWxlY3QpOwogICAgcmVtb3ZlRXZlbnQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlVXApOwogICAgcmVtb3ZlRXZlbnQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAnbW91c2Vtb3ZlJywgdGhpcy5tb3ZlKTsKICAgIHJlbW92ZUV2ZW50KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgJ3RvdWNobW92ZScsIHRoaXMubW92ZSk7CiAgICByZW1vdmVFdmVudChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsICdtb3VzZXVwJywgdGhpcy5oYW5kbGVVcCk7CiAgICByZW1vdmVFdmVudChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsICd0b3VjaGVuZCB0b3VjaGNhbmNlbCcsIHRoaXMuZGVzZWxlY3QpOwogICAgcmVtb3ZlRXZlbnQod2luZG93LCAncmVzaXplJywgdGhpcy5jaGVja1BhcmVudFNpemUpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6YeN572u6L6555WM5ZKM6byg5qCH54q25oCBCiAgICByZXNldEJvdW5kc0FuZE1vdXNlU3RhdGU6IGZ1bmN0aW9uIHJlc2V0Qm91bmRzQW5kTW91c2VTdGF0ZSgpIHsKICAgICAgdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24gPSB7CiAgICAgICAgbW91c2VYOiAwLAogICAgICAgIG1vdXNlWTogMCwKICAgICAgICB4OiAwLAogICAgICAgIHk6IDAsCiAgICAgICAgdzogMCwKICAgICAgICBoOiAwCiAgICAgIH07CiAgICAgIHRoaXMuYm91bmRzID0gewogICAgICAgIG1pbkxlZnQ6IG51bGwsCiAgICAgICAgbWF4TGVmdDogbnVsbCwKICAgICAgICBtaW5SaWdodDogbnVsbCwKICAgICAgICBtYXhSaWdodDogbnVsbCwKICAgICAgICBtaW5Ub3A6IG51bGwsCiAgICAgICAgbWF4VG9wOiBudWxsLAogICAgICAgIG1pbkJvdHRvbTogbnVsbCwKICAgICAgICBtYXhCb3R0b206IG51bGwKICAgICAgfTsKICAgIH0sCiAgICAvLyDmo4Dmn6XniLblhYPntKDlpKflsI8KICAgIGNoZWNrUGFyZW50U2l6ZTogZnVuY3Rpb24gY2hlY2tQYXJlbnRTaXplKCkgewogICAgICBpZiAodGhpcy5wYXJlbnQpIHsKICAgICAgICB2YXIgX3RoaXMkZ2V0UGFyZW50U2l6ZTMgPSB0aGlzLmdldFBhcmVudFNpemUoKSwKICAgICAgICAgICAgX3RoaXMkZ2V0UGFyZW50U2l6ZTQgPSBfc2xpY2VkVG9BcnJheShfdGhpcyRnZXRQYXJlbnRTaXplMywgMiksCiAgICAgICAgICAgIG5ld1BhcmVudFdpZHRoID0gX3RoaXMkZ2V0UGFyZW50U2l6ZTRbMF0sCiAgICAgICAgICAgIG5ld1BhcmVudEhlaWdodCA9IF90aGlzJGdldFBhcmVudFNpemU0WzFdOyAvLyDkv67lpI3niLblhYPntKDmlLnlj5jlpKflsI/lkI7vvIznu4Tku7ZyZXNpemluZ+aXtua0u+WKqOW8guW4uAoKCiAgICAgICAgdGhpcy5yaWdodCA9IG5ld1BhcmVudFdpZHRoIC0gdGhpcy53aWR0aCAtIHRoaXMubGVmdDsKICAgICAgICB0aGlzLmJvdHRvbSA9IG5ld1BhcmVudEhlaWdodCAtIHRoaXMuaGVpZ2h0IC0gdGhpcy50b3A7CiAgICAgICAgdGhpcy5wYXJlbnRXaWR0aCA9IG5ld1BhcmVudFdpZHRoOwogICAgICAgIHRoaXMucGFyZW50SGVpZ2h0ID0gbmV3UGFyZW50SGVpZ2h0OwogICAgICB9CiAgICB9LAogICAgLy8g6I635Y+W54i25YWD57Sg5aSn5bCPCiAgICBnZXRQYXJlbnRTaXplOiBmdW5jdGlvbiBnZXRQYXJlbnRTaXplKCkgewogICAgICBpZiAodGhpcy5wYXJlbnQgPT09IHRydWUpIHsKICAgICAgICB2YXIgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLiRlbC5wYXJlbnROb2RlLCBudWxsKTsKICAgICAgICByZXR1cm4gW3BhcnNlSW50KHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3dpZHRoJyksIDEwKSwgcGFyc2VJbnQoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnaGVpZ2h0JyksIDEwKV07CiAgICAgIH0KCiAgICAgIGlmICh0eXBlb2YgdGhpcy5wYXJlbnQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMucGFyZW50KTsKCiAgICAgICAgaWYgKCEocGFyZW50Tm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJUaGUgc2VsZWN0b3IgIi5jb25jYXQodGhpcy5wYXJlbnQsICIgZG9lcyBub3QgbWF0Y2ggYW55IGVsZW1lbnQiKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gW3BhcmVudE5vZGUub2Zmc2V0V2lkdGgsIHBhcmVudE5vZGUub2Zmc2V0SGVpZ2h0XTsKICAgICAgfQoKICAgICAgcmV0dXJuIFtudWxsLCBudWxsXTsKICAgIH0sCiAgICAvLyDlhYPntKDop6bmkbjmjInkuIsKICAgIGVsZW1lbnRUb3VjaERvd246IGZ1bmN0aW9uIGVsZW1lbnRUb3VjaERvd24oZSkgewogICAgICBldmVudHNGb3IgPSBldmVudHMudG91Y2g7CiAgICAgIHRoaXMuZWxlbWVudERvd24oZSk7CiAgICB9LAogICAgZWxlbWVudE1vdXNlRG93bjogZnVuY3Rpb24gZWxlbWVudE1vdXNlRG93bihlKSB7CiAgICAgIC8vIG1vdXNlZG93bkZuCiAgICAgIHRoaXMuJGVtaXQoJ29uU2VsZWN0RWxlbWVudCcsIHRoaXMuZWxlSWQpOwogICAgICBldmVudHNGb3IgPSBldmVudHMubW91c2U7CiAgICAgIHRoaXMuZWxlbWVudERvd24oZSk7CiAgICB9LAogICAgLy8g5YWD57Sg5oyJ5LiLCiAgICBlbGVtZW50RG93bjogZnVuY3Rpb24gZWxlbWVudERvd24oZSkgewogICAgICBpZiAoZSBpbnN0YW5jZW9mIE1vdXNlRXZlbnQgJiYgZS53aGljaCAhPT0gMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKCiAgICAgIGlmICh0aGlzLiRlbC5jb250YWlucyh0YXJnZXQpKSB7CiAgICAgICAgaWYgKHRoaXMub25EcmFnU3RhcnQoZSkgPT09IGZhbHNlKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5kcmFnSGFuZGxlICYmICFtYXRjaGVzU2VsZWN0b3JUb1BhcmVudEVsZW1lbnRzKHRhcmdldCwgdGhpcy5kcmFnSGFuZGxlLCB0aGlzLiRlbCkgfHwgdGhpcy5kcmFnQ2FuY2VsICYmIG1hdGNoZXNTZWxlY3RvclRvUGFyZW50RWxlbWVudHModGFyZ2V0LCB0aGlzLmRyYWdDYW5jZWwsIHRoaXMuJGVsKSkgewogICAgICAgICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQpIHsKICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7CiAgICAgICAgICB0aGlzLiRlbWl0KCdhY3RpdmF0ZWQnKTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTphY3RpdmUnLCB0cnVlKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmRyYWdnYWJsZSkgewogICAgICAgICAgdGhpcy5kcmFnZ2luZyA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICB0aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbi5tb3VzZVggPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0ucGFnZVggOiBlLnBhZ2VYOwogICAgICAgIHRoaXMubW91c2VDbGlja1Bvc2l0aW9uLm1vdXNlWSA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXS5wYWdlWSA6IGUucGFnZVk7CiAgICAgICAgdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24ubGVmdCA9IHRoaXMubGVmdDsKICAgICAgICB0aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbi5yaWdodCA9IHRoaXMucmlnaHQ7CiAgICAgICAgdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24udG9wID0gdGhpcy50b3A7CiAgICAgICAgdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24uYm90dG9tID0gdGhpcy5ib3R0b207CiAgICAgICAgdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24udyA9IHRoaXMud2lkdGg7CiAgICAgICAgdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24uaCA9IHRoaXMuaGVpZ2h0OwoKICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHsKICAgICAgICAgIHRoaXMuYm91bmRzID0gdGhpcy5jYWxjRHJhZ0xpbWl0cygpOwogICAgICAgIH0KCiAgICAgICAgYWRkRXZlbnQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBldmVudHNGb3IubW92ZSwgdGhpcy5tb3ZlKTsKICAgICAgICBhZGRFdmVudChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGV2ZW50c0Zvci5zdG9wLCB0aGlzLmhhbmRsZVVwKTsKICAgICAgfQogICAgfSwKICAgIC8vIOiuoeeul+enu+WKqOiMg+WbtAogICAgY2FsY0RyYWdMaW1pdHM6IGZ1bmN0aW9uIGNhbGNEcmFnTGltaXRzKCkgewogICAgICByZXR1cm4gewogICAgICAgIG1pbkxlZnQ6IHRoaXMubGVmdCAlIHRoaXMuZ3JpZFswXSwKICAgICAgICBtYXhMZWZ0OiBNYXRoLmZsb29yKCh0aGlzLnBhcmVudFdpZHRoIC0gdGhpcy53aWR0aCAtIHRoaXMubGVmdCkgLyB0aGlzLmdyaWRbMF0pICogdGhpcy5ncmlkWzBdICsgdGhpcy5sZWZ0LAogICAgICAgIG1pblJpZ2h0OiB0aGlzLnJpZ2h0ICUgdGhpcy5ncmlkWzBdLAogICAgICAgIG1heFJpZ2h0OiBNYXRoLmZsb29yKCh0aGlzLnBhcmVudFdpZHRoIC0gdGhpcy53aWR0aCAtIHRoaXMucmlnaHQpIC8gdGhpcy5ncmlkWzBdKSAqIHRoaXMuZ3JpZFswXSArIHRoaXMucmlnaHQsCiAgICAgICAgbWluVG9wOiB0aGlzLnRvcCAlIHRoaXMuZ3JpZFsxXSwKICAgICAgICBtYXhUb3A6IE1hdGguZmxvb3IoKHRoaXMucGFyZW50SGVpZ2h0IC0gdGhpcy5oZWlnaHQgLSB0aGlzLnRvcCkgLyB0aGlzLmdyaWRbMV0pICogdGhpcy5ncmlkWzFdICsgdGhpcy50b3AsCiAgICAgICAgbWluQm90dG9tOiB0aGlzLmJvdHRvbSAlIHRoaXMuZ3JpZFsxXSwKICAgICAgICBtYXhCb3R0b206IE1hdGguZmxvb3IoKHRoaXMucGFyZW50SGVpZ2h0IC0gdGhpcy5oZWlnaHQgLSB0aGlzLmJvdHRvbSkgLyB0aGlzLmdyaWRbMV0pICogdGhpcy5ncmlkWzFdICsgdGhpcy5ib3R0b20KICAgICAgfTsKICAgIH0sCiAgICAvLyDlj5bmtogKICAgIGRlc2VsZWN0OiBmdW5jdGlvbiBkZXNlbGVjdChlKSB7CiAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7CiAgICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAodGhpcy5jbGFzc05hbWUgKyAnLShbdHJtYmxdezJ9KScsICcnKTsKCiAgICAgIGlmICghdGhpcy4kZWwuY29udGFpbnModGFyZ2V0KSAmJiAhcmVnZXgudGVzdCh0YXJnZXQuY2xhc3NOYW1lKSkgewogICAgICAgIGlmICh0aGlzLmVuYWJsZWQgJiYgIXRoaXMucHJldmVudERlYWN0aXZhdGlvbikgewogICAgICAgICAgdGhpcy5lbmFibGVkID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRlbWl0KCdkZWFjdGl2YXRlZCcpOwogICAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOmFjdGl2ZScsIGZhbHNlKTsKICAgICAgICB9CgogICAgICAgIHJlbW92ZUV2ZW50KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgZXZlbnRzRm9yLm1vdmUsIHRoaXMuaGFuZGxlUmVzaXplKTsKICAgICAgfQoKICAgICAgdGhpcy5yZXNldEJvdW5kc0FuZE1vdXNlU3RhdGUoKTsKICAgIH0sCiAgICAvLyDmjqfliLbmn4Top6bmkbjmjInkuIsKICAgIGhhbmRsZVRvdWNoRG93bjogZnVuY3Rpb24gaGFuZGxlVG91Y2hEb3duKGhhbmRsZSwgZSkgewogICAgICBldmVudHNGb3IgPSBldmVudHMudG91Y2g7CiAgICAgIHRoaXMuaGFuZGxlRG93bihoYW5kbGUsIGUpOwogICAgfSwKICAgIC8vIOaOp+WItuafhOaMieS4iwogICAgaGFuZGxlRG93bjogZnVuY3Rpb24gaGFuZGxlRG93bihoYW5kbGUsIGUpIHsKICAgICAgaWYgKGUgaW5zdGFuY2VvZiBNb3VzZUV2ZW50ICYmIGUud2hpY2ggIT09IDEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm9uUmVzaXplU3RhcnQoaGFuZGxlLCBlKSA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gSGVyZSB3ZSBhdm9pZCBhIGRhbmdlcm91cyByZWN1cnNpb24gYnkgZmFraW5nCiAgICAgIC8vIGNvcm5lciBoYW5kbGVzIGFzIG1pZGRsZSBoYW5kbGVzCgogICAgICBpZiAodGhpcy5sb2NrQXNwZWN0UmF0aW8gJiYgIWhhbmRsZS5pbmNsdWRlcygnbScpKSB7CiAgICAgICAgdGhpcy5oYW5kbGUgPSAnbScgKyBoYW5kbGUuc3Vic3RyaW5nKDEpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaGFuZGxlID0gaGFuZGxlOwogICAgICB9CgogICAgICB0aGlzLnJlc2l6aW5nID0gdHJ1ZTsKICAgICAgdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24ubW91c2VYID0gZS50b3VjaGVzID8gZS50b3VjaGVzWzBdLnBhZ2VYIDogZS5wYWdlWDsKICAgICAgdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24ubW91c2VZID0gZS50b3VjaGVzID8gZS50b3VjaGVzWzBdLnBhZ2VZIDogZS5wYWdlWTsKICAgICAgdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24ubGVmdCA9IHRoaXMubGVmdDsKICAgICAgdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24ucmlnaHQgPSB0aGlzLnJpZ2h0OwogICAgICB0aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbi50b3AgPSB0aGlzLnRvcDsKICAgICAgdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24uYm90dG9tID0gdGhpcy5ib3R0b207CiAgICAgIHRoaXMubW91c2VDbGlja1Bvc2l0aW9uLncgPSB0aGlzLndpZHRoOwogICAgICB0aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbi5oID0gdGhpcy5oZWlnaHQ7CiAgICAgIHRoaXMuYm91bmRzID0gdGhpcy5jYWxjUmVzaXplTGltaXRzKCk7CiAgICAgIGFkZEV2ZW50KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgZXZlbnRzRm9yLm1vdmUsIHRoaXMuaGFuZGxlUmVzaXplKTsKICAgICAgYWRkRXZlbnQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBldmVudHNGb3Iuc3RvcCwgdGhpcy5oYW5kbGVVcCk7CiAgICB9LAogICAgLy8g6K6h566X6LCD5pW05aSn5bCP6IyD5Zu0CiAgICBjYWxjUmVzaXplTGltaXRzOiBmdW5jdGlvbiBjYWxjUmVzaXplTGltaXRzKCkgewogICAgICB2YXIgbWluVyA9IHRoaXMubWluVzsKICAgICAgdmFyIG1pbkggPSB0aGlzLm1pbkg7CiAgICAgIHZhciBtYXhXID0gdGhpcy5tYXhXOwogICAgICB2YXIgbWF4SCA9IHRoaXMubWF4SDsKICAgICAgdmFyIGFzcGVjdEZhY3RvciA9IHRoaXMuYXNwZWN0RmFjdG9yOwoKICAgICAgdmFyIF90aGlzJGdyaWQgPSBfc2xpY2VkVG9BcnJheSh0aGlzLmdyaWQsIDIpLAogICAgICAgICAgZ3JpZFggPSBfdGhpcyRncmlkWzBdLAogICAgICAgICAgZ3JpZFkgPSBfdGhpcyRncmlkWzFdOwoKICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwogICAgICB2YXIgbGVmdCA9IHRoaXMubGVmdDsKICAgICAgdmFyIHRvcCA9IHRoaXMudG9wOwogICAgICB2YXIgcmlnaHQgPSB0aGlzLnJpZ2h0OwogICAgICB2YXIgYm90dG9tID0gdGhpcy5ib3R0b207CgogICAgICBpZiAodGhpcy5sb2NrQXNwZWN0UmF0aW8pIHsKICAgICAgICBpZiAobWluVyAvIG1pbkggPiBhc3BlY3RGYWN0b3IpIHsKICAgICAgICAgIG1pbkggPSBtaW5XIC8gYXNwZWN0RmFjdG9yOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtaW5XID0gYXNwZWN0RmFjdG9yICogbWluSDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXhXICYmIG1heEgpIHsKICAgICAgICAgIG1heFcgPSBNYXRoLm1pbihtYXhXLCBhc3BlY3RGYWN0b3IgKiBtYXhIKTsKICAgICAgICAgIG1heEggPSBNYXRoLm1pbihtYXhILCBtYXhXIC8gYXNwZWN0RmFjdG9yKTsKICAgICAgICB9IGVsc2UgaWYgKG1heFcpIHsKICAgICAgICAgIG1heEggPSBtYXhXIC8gYXNwZWN0RmFjdG9yOwogICAgICAgIH0gZWxzZSBpZiAobWF4SCkgewogICAgICAgICAgbWF4VyA9IGFzcGVjdEZhY3RvciAqIG1heEg7CiAgICAgICAgfQogICAgICB9CgogICAgICBtYXhXID0gbWF4VyAtIG1heFcgJSBncmlkWDsKICAgICAgbWF4SCA9IG1heEggLSBtYXhIICUgZ3JpZFk7CiAgICAgIHZhciBsaW1pdHMgPSB7CiAgICAgICAgbWluTGVmdDogbnVsbCwKICAgICAgICBtYXhMZWZ0OiBudWxsLAogICAgICAgIG1pblRvcDogbnVsbCwKICAgICAgICBtYXhUb3A6IG51bGwsCiAgICAgICAgbWluUmlnaHQ6IG51bGwsCiAgICAgICAgbWF4UmlnaHQ6IG51bGwsCiAgICAgICAgbWluQm90dG9tOiBudWxsLAogICAgICAgIG1heEJvdHRvbTogbnVsbAogICAgICB9OwoKICAgICAgaWYgKHRoaXMucGFyZW50KSB7CiAgICAgICAgbGltaXRzLm1pbkxlZnQgPSBsZWZ0ICUgZ3JpZFg7CiAgICAgICAgbGltaXRzLm1heExlZnQgPSBsZWZ0ICsgTWF0aC5mbG9vcigod2lkdGggLSBtaW5XKSAvIGdyaWRYKSAqIGdyaWRYOwogICAgICAgIGxpbWl0cy5taW5Ub3AgPSB0b3AgJSBncmlkWTsKICAgICAgICBsaW1pdHMubWF4VG9wID0gdG9wICsgTWF0aC5mbG9vcigoaGVpZ2h0IC0gbWluSCkgLyBncmlkWSkgKiBncmlkWTsKICAgICAgICBsaW1pdHMubWluUmlnaHQgPSByaWdodCAlIGdyaWRYOwogICAgICAgIGxpbWl0cy5tYXhSaWdodCA9IHJpZ2h0ICsgTWF0aC5mbG9vcigod2lkdGggLSBtaW5XKSAvIGdyaWRYKSAqIGdyaWRYOwogICAgICAgIGxpbWl0cy5taW5Cb3R0b20gPSBib3R0b20gJSBncmlkWTsKICAgICAgICBsaW1pdHMubWF4Qm90dG9tID0gYm90dG9tICsgTWF0aC5mbG9vcigoaGVpZ2h0IC0gbWluSCkgLyBncmlkWSkgKiBncmlkWTsKCiAgICAgICAgaWYgKG1heFcpIHsKICAgICAgICAgIGxpbWl0cy5taW5MZWZ0ID0gTWF0aC5tYXgobGltaXRzLm1pbkxlZnQsIHRoaXMucGFyZW50V2lkdGggLSByaWdodCAtIG1heFcpOwogICAgICAgICAgbGltaXRzLm1pblJpZ2h0ID0gTWF0aC5tYXgobGltaXRzLm1pblJpZ2h0LCB0aGlzLnBhcmVudFdpZHRoIC0gbGVmdCAtIG1heFcpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1heEgpIHsKICAgICAgICAgIGxpbWl0cy5taW5Ub3AgPSBNYXRoLm1heChsaW1pdHMubWluVG9wLCB0aGlzLnBhcmVudEhlaWdodCAtIGJvdHRvbSAtIG1heEgpOwogICAgICAgICAgbGltaXRzLm1pbkJvdHRvbSA9IE1hdGgubWF4KGxpbWl0cy5taW5Cb3R0b20sIHRoaXMucGFyZW50SGVpZ2h0IC0gdG9wIC0gbWF4SCk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5sb2NrQXNwZWN0UmF0aW8pIHsKICAgICAgICAgIGxpbWl0cy5taW5MZWZ0ID0gTWF0aC5tYXgobGltaXRzLm1pbkxlZnQsIGxlZnQgLSB0b3AgKiBhc3BlY3RGYWN0b3IpOwogICAgICAgICAgbGltaXRzLm1pblRvcCA9IE1hdGgubWF4KGxpbWl0cy5taW5Ub3AsIHRvcCAtIGxlZnQgLyBhc3BlY3RGYWN0b3IpOwogICAgICAgICAgbGltaXRzLm1pblJpZ2h0ID0gTWF0aC5tYXgobGltaXRzLm1pblJpZ2h0LCByaWdodCAtIGJvdHRvbSAqIGFzcGVjdEZhY3Rvcik7CiAgICAgICAgICBsaW1pdHMubWluQm90dG9tID0gTWF0aC5tYXgobGltaXRzLm1pbkJvdHRvbSwgYm90dG9tIC0gcmlnaHQgLyBhc3BlY3RGYWN0b3IpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBsaW1pdHMubWluTGVmdCA9IG51bGw7CiAgICAgICAgbGltaXRzLm1heExlZnQgPSBsZWZ0ICsgTWF0aC5mbG9vcigod2lkdGggLSBtaW5XKSAvIGdyaWRYKSAqIGdyaWRYOwogICAgICAgIGxpbWl0cy5taW5Ub3AgPSBudWxsOwogICAgICAgIGxpbWl0cy5tYXhUb3AgPSB0b3AgKyBNYXRoLmZsb29yKChoZWlnaHQgLSBtaW5IKSAvIGdyaWRZKSAqIGdyaWRZOwogICAgICAgIGxpbWl0cy5taW5SaWdodCA9IG51bGw7CiAgICAgICAgbGltaXRzLm1heFJpZ2h0ID0gcmlnaHQgKyBNYXRoLmZsb29yKCh3aWR0aCAtIG1pblcpIC8gZ3JpZFgpICogZ3JpZFg7CiAgICAgICAgbGltaXRzLm1pbkJvdHRvbSA9IG51bGw7CiAgICAgICAgbGltaXRzLm1heEJvdHRvbSA9IGJvdHRvbSArIE1hdGguZmxvb3IoKGhlaWdodCAtIG1pbkgpIC8gZ3JpZFkpICogZ3JpZFk7CgogICAgICAgIGlmIChtYXhXKSB7CiAgICAgICAgICBsaW1pdHMubWluTGVmdCA9IC0ocmlnaHQgKyBtYXhXKTsKICAgICAgICAgIGxpbWl0cy5taW5SaWdodCA9IC0obGVmdCArIG1heFcpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1heEgpIHsKICAgICAgICAgIGxpbWl0cy5taW5Ub3AgPSAtKGJvdHRvbSArIG1heEgpOwogICAgICAgICAgbGltaXRzLm1pbkJvdHRvbSA9IC0odG9wICsgbWF4SCk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5sb2NrQXNwZWN0UmF0aW8gJiYgbWF4VyAmJiBtYXhIKSB7CiAgICAgICAgICBsaW1pdHMubWluTGVmdCA9IE1hdGgubWluKGxpbWl0cy5taW5MZWZ0LCAtKHJpZ2h0ICsgbWF4VykpOwogICAgICAgICAgbGltaXRzLm1pblRvcCA9IE1hdGgubWluKGxpbWl0cy5taW5Ub3AsIC0obWF4SCArIGJvdHRvbSkpOwogICAgICAgICAgbGltaXRzLm1pblJpZ2h0ID0gTWF0aC5taW4obGltaXRzLm1pblJpZ2h0LCAtbGVmdCAtIG1heFcpOwogICAgICAgICAgbGltaXRzLm1pbkJvdHRvbSA9IE1hdGgubWluKGxpbWl0cy5taW5Cb3R0b20sIC10b3AgLSBtYXhIKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBsaW1pdHM7CiAgICB9LAogICAgLy8g56e75YqoCiAgICBtb3ZlOiBmdW5jdGlvbiBtb3ZlKGUpIHsKICAgICAgaWYgKHRoaXMucmVzaXppbmcpIHsKICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZShlKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmRyYWdnaW5nKSB7CiAgICAgICAgdGhpcy5oYW5kbGVEcmFnKGUpOwogICAgICB9CiAgICB9LAogICAgLy8g5YWD57Sg56e75YqoCiAgICBoYW5kbGVEcmFnOiBmdW5jdGlvbiBoYW5kbGVEcmFnKGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGF4aXMsIGdyaWQsIGJvdW5kcywgbW91c2VDbGlja1Bvc2l0aW9uLCB0bXBEZWx0YVgsIHRtcERlbHRhWSwgX3NuYXBUb0dyaWQsIF9zbmFwVG9HcmlkMiwgZGVsdGFYLCBkZWx0YVksIGxlZnQsIHRvcCwgcmlnaHQsIGJvdHRvbTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgYXhpcyA9IF90aGlzLmF4aXM7CiAgICAgICAgICAgICAgICBncmlkID0gX3RoaXMuZ3JpZDsKICAgICAgICAgICAgICAgIGJvdW5kcyA9IF90aGlzLmJvdW5kczsKICAgICAgICAgICAgICAgIG1vdXNlQ2xpY2tQb3NpdGlvbiA9IF90aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbjsKICAgICAgICAgICAgICAgIHRtcERlbHRhWCA9IGF4aXMgJiYgYXhpcyAhPT0gJ3knID8gbW91c2VDbGlja1Bvc2l0aW9uLm1vdXNlWCAtIChlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0ucGFnZVggOiBlLnBhZ2VYKSA6IDA7CiAgICAgICAgICAgICAgICB0bXBEZWx0YVkgPSBheGlzICYmIGF4aXMgIT09ICd4JyA/IG1vdXNlQ2xpY2tQb3NpdGlvbi5tb3VzZVkgLSAoZS50b3VjaGVzID8gZS50b3VjaGVzWzBdLnBhZ2VZIDogZS5wYWdlWSkgOiAwOwogICAgICAgICAgICAgICAgX3NuYXBUb0dyaWQgPSBzbmFwVG9HcmlkKGdyaWQsIHRtcERlbHRhWCwgdG1wRGVsdGFZLCBfdGhpcy5zY2FsZVJhdGlvKSwgX3NuYXBUb0dyaWQyID0gX3NsaWNlZFRvQXJyYXkoX3NuYXBUb0dyaWQsIDIpLCBkZWx0YVggPSBfc25hcFRvR3JpZDJbMF0sIGRlbHRhWSA9IF9zbmFwVG9HcmlkMlsxXTsKICAgICAgICAgICAgICAgIGxlZnQgPSByZXN0cmljdFRvQm91bmRzKG1vdXNlQ2xpY2tQb3NpdGlvbi5sZWZ0IC0gZGVsdGFYLCBib3VuZHMubWluTGVmdCwgYm91bmRzLm1heExlZnQpOwogICAgICAgICAgICAgICAgdG9wID0gcmVzdHJpY3RUb0JvdW5kcyhtb3VzZUNsaWNrUG9zaXRpb24udG9wIC0gZGVsdGFZLCBib3VuZHMubWluVG9wLCBib3VuZHMubWF4VG9wKTsKCiAgICAgICAgICAgICAgICBpZiAoIShfdGhpcy5vbkRyYWcobGVmdCwgdG9wKSA9PT0gZmFsc2UpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICByaWdodCA9IHJlc3RyaWN0VG9Cb3VuZHMobW91c2VDbGlja1Bvc2l0aW9uLnJpZ2h0ICsgZGVsdGFYLCBib3VuZHMubWluUmlnaHQsIGJvdW5kcy5tYXhSaWdodCk7CiAgICAgICAgICAgICAgICBib3R0b20gPSByZXN0cmljdFRvQm91bmRzKG1vdXNlQ2xpY2tQb3NpdGlvbi5ib3R0b20gKyBkZWx0YVksIGJvdW5kcy5taW5Cb3R0b20sIGJvdW5kcy5tYXhCb3R0b20pOwogICAgICAgICAgICAgICAgX3RoaXMubGVmdCA9IGxlZnQ7CiAgICAgICAgICAgICAgICBfdGhpcy50b3AgPSB0b3A7CiAgICAgICAgICAgICAgICBfdGhpcy5yaWdodCA9IHJpZ2h0OwogICAgICAgICAgICAgICAgX3RoaXMuYm90dG9tID0gYm90dG9tOyAvLyByZXNpemluZ0ZuCgogICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoJ3Jlc2l6aW5nJywgX3RoaXMubGVmdCwgX3RoaXMudG9wLCBfdGhpcy53aWR0aCwgX3RoaXMuaGVpZ2h0KTsKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc25hcENoZWNrKCk7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgnZHJhZ2dpbmcnLCBfdGhpcy5sZWZ0LCBfdGhpcy50b3ApOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG1vdmVIb3Jpem9udGFsbHk6IGZ1bmN0aW9uIG1vdmVIb3Jpem9udGFsbHkodmFsKSB7CiAgICAgIHZhciBfc25hcFRvR3JpZDMgPSBzbmFwVG9HcmlkKHRoaXMuZ3JpZCwgdmFsLCB0aGlzLnRvcCwgdGhpcy5zY2FsZSksCiAgICAgICAgICBfc25hcFRvR3JpZDQgPSBfc2xpY2VkVG9BcnJheShfc25hcFRvR3JpZDMsIDIpLAogICAgICAgICAgZGVsdGFYID0gX3NuYXBUb0dyaWQ0WzBdLAogICAgICAgICAgXyA9IF9zbmFwVG9HcmlkNFsxXTsKCiAgICAgIHZhciBsZWZ0ID0gcmVzdHJpY3RUb0JvdW5kcyhkZWx0YVgsIHRoaXMuYm91bmRzLm1pbkxlZnQsIHRoaXMuYm91bmRzLm1heExlZnQpOwogICAgICB0aGlzLmxlZnQgPSBsZWZ0OwogICAgICB0aGlzLnJpZ2h0ID0gdGhpcy5wYXJlbnRXaWR0aCAtIHRoaXMud2lkdGggLSBsZWZ0OwogICAgfSwKICAgIG1vdmVWZXJ0aWNhbGx5OiBmdW5jdGlvbiBtb3ZlVmVydGljYWxseSh2YWwpIHsKICAgICAgdmFyIF9zbmFwVG9HcmlkNSA9IHNuYXBUb0dyaWQodGhpcy5ncmlkLCB0aGlzLmxlZnQsIHZhbCwgdGhpcy5zY2FsZSksCiAgICAgICAgICBfc25hcFRvR3JpZDYgPSBfc2xpY2VkVG9BcnJheShfc25hcFRvR3JpZDUsIDIpLAogICAgICAgICAgXyA9IF9zbmFwVG9HcmlkNlswXSwKICAgICAgICAgIGRlbHRhWSA9IF9zbmFwVG9HcmlkNlsxXTsKCiAgICAgIHZhciB0b3AgPSByZXN0cmljdFRvQm91bmRzKGRlbHRhWSwgdGhpcy5ib3VuZHMubWluVG9wLCB0aGlzLmJvdW5kcy5tYXhUb3ApOwogICAgICB0aGlzLnRvcCA9IHRvcDsKICAgICAgdGhpcy5ib3R0b20gPSB0aGlzLnBhcmVudEhlaWdodCAtIHRoaXMuaGVpZ2h0IC0gdG9wOwogICAgfSwKICAgIC8vIOaOp+WItuafhOenu+WKqAogICAgaGFuZGxlUmVzaXplOiBmdW5jdGlvbiBoYW5kbGVSZXNpemUoZSkgewogICAgICB2YXIgbGVmdCA9IHRoaXMubGVmdDsKICAgICAgdmFyIHRvcCA9IHRoaXMudG9wOwogICAgICB2YXIgcmlnaHQgPSB0aGlzLnJpZ2h0OwogICAgICB2YXIgYm90dG9tID0gdGhpcy5ib3R0b207CiAgICAgIHZhciBtb3VzZUNsaWNrUG9zaXRpb24gPSB0aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbjsKICAgICAgdmFyIGxvY2tBc3BlY3RSYXRpbyA9IHRoaXMubG9ja0FzcGVjdFJhdGlvOwogICAgICB2YXIgYXNwZWN0RmFjdG9yID0gdGhpcy5hc3BlY3RGYWN0b3I7CiAgICAgIHZhciB0bXBEZWx0YVggPSBtb3VzZUNsaWNrUG9zaXRpb24ubW91c2VYIC0gKGUudG91Y2hlcyA/IGUudG91Y2hlc1swXS5wYWdlWCA6IGUucGFnZVgpOwogICAgICB2YXIgdG1wRGVsdGFZID0gbW91c2VDbGlja1Bvc2l0aW9uLm1vdXNlWSAtIChlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0ucGFnZVkgOiBlLnBhZ2VZKTsKCiAgICAgIGlmICghdGhpcy53aWR0aFRvdWNoZWQgJiYgdG1wRGVsdGFYKSB7CiAgICAgICAgdGhpcy53aWR0aFRvdWNoZWQgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuaGVpZ2h0VG91Y2hlZCAmJiB0bXBEZWx0YVkpIHsKICAgICAgICB0aGlzLmhlaWdodFRvdWNoZWQgPSB0cnVlOwogICAgICB9CgogICAgICB2YXIgX3NuYXBUb0dyaWQ3ID0gc25hcFRvR3JpZCh0aGlzLmdyaWQsIHRtcERlbHRhWCwgdG1wRGVsdGFZLCB0aGlzLnNjYWxlUmF0aW8pLAogICAgICAgICAgX3NuYXBUb0dyaWQ4ID0gX3NsaWNlZFRvQXJyYXkoX3NuYXBUb0dyaWQ3LCAyKSwKICAgICAgICAgIGRlbHRhWCA9IF9zbmFwVG9HcmlkOFswXSwKICAgICAgICAgIGRlbHRhWSA9IF9zbmFwVG9HcmlkOFsxXTsKCiAgICAgIGlmICh0aGlzLmhhbmRsZS5pbmNsdWRlcygnYicpKSB7CiAgICAgICAgYm90dG9tID0gcmVzdHJpY3RUb0JvdW5kcyhtb3VzZUNsaWNrUG9zaXRpb24uYm90dG9tICsgZGVsdGFZLCB0aGlzLmJvdW5kcy5taW5Cb3R0b20sIHRoaXMuYm91bmRzLm1heEJvdHRvbSk7CgogICAgICAgIGlmICh0aGlzLmxvY2tBc3BlY3RSYXRpbyAmJiB0aGlzLnJlc2l6aW5nT25ZKSB7CiAgICAgICAgICByaWdodCA9IHRoaXMucmlnaHQgLSAodGhpcy5ib3R0b20gLSBib3R0b20pICogYXNwZWN0RmFjdG9yOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aGlzLmhhbmRsZS5pbmNsdWRlcygndCcpKSB7CiAgICAgICAgdG9wID0gcmVzdHJpY3RUb0JvdW5kcyhtb3VzZUNsaWNrUG9zaXRpb24udG9wIC0gZGVsdGFZLCB0aGlzLmJvdW5kcy5taW5Ub3AsIHRoaXMuYm91bmRzLm1heFRvcCk7CgogICAgICAgIGlmICh0aGlzLmxvY2tBc3BlY3RSYXRpbyAmJiB0aGlzLnJlc2l6aW5nT25ZKSB7CiAgICAgICAgICBsZWZ0ID0gdGhpcy5sZWZ0IC0gKHRoaXMudG9wIC0gdG9wKSAqIGFzcGVjdEZhY3RvcjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmhhbmRsZS5pbmNsdWRlcygncicpKSB7CiAgICAgICAgcmlnaHQgPSByZXN0cmljdFRvQm91bmRzKG1vdXNlQ2xpY2tQb3NpdGlvbi5yaWdodCArIGRlbHRhWCwgdGhpcy5ib3VuZHMubWluUmlnaHQsIHRoaXMuYm91bmRzLm1heFJpZ2h0KTsKCiAgICAgICAgaWYgKHRoaXMubG9ja0FzcGVjdFJhdGlvICYmIHRoaXMucmVzaXppbmdPblgpIHsKICAgICAgICAgIGJvdHRvbSA9IHRoaXMuYm90dG9tIC0gKHRoaXMucmlnaHQgLSByaWdodCkgLyBhc3BlY3RGYWN0b3I7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHRoaXMuaGFuZGxlLmluY2x1ZGVzKCdsJykpIHsKICAgICAgICBsZWZ0ID0gcmVzdHJpY3RUb0JvdW5kcyhtb3VzZUNsaWNrUG9zaXRpb24ubGVmdCAtIGRlbHRhWCwgdGhpcy5ib3VuZHMubWluTGVmdCwgdGhpcy5ib3VuZHMubWF4TGVmdCk7CgogICAgICAgIGlmICh0aGlzLmxvY2tBc3BlY3RSYXRpbyAmJiB0aGlzLnJlc2l6aW5nT25YKSB7CiAgICAgICAgICB0b3AgPSB0aGlzLnRvcCAtICh0aGlzLmxlZnQgLSBsZWZ0KSAvIGFzcGVjdEZhY3RvcjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciB3aWR0aCA9IGNvbXB1dGVXaWR0aCh0aGlzLnBhcmVudFdpZHRoLCBsZWZ0LCByaWdodCk7CiAgICAgIHZhciBoZWlnaHQgPSBjb21wdXRlSGVpZ2h0KHRoaXMucGFyZW50SGVpZ2h0LCB0b3AsIGJvdHRvbSk7CgogICAgICBpZiAodGhpcy5vblJlc2l6ZSh0aGlzLmhhbmRsZSwgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KSA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMubGVmdCA9IGxlZnQ7CiAgICAgIHRoaXMudG9wID0gdG9wOwogICAgICB0aGlzLnJpZ2h0ID0gcmlnaHQ7CiAgICAgIHRoaXMuYm90dG9tID0gYm90dG9tOwogICAgICB0aGlzLndpZHRoID0gd2lkdGg7CiAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OyAvLyByZXNpemluZ0ZuCgogICAgICB0aGlzLiRlbWl0KCdyZXNpemluZycsIHRoaXMubGVmdCwgdGhpcy50b3AsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTsKICAgIH0sCiAgICBjaGFuZ2VXaWR0aDogZnVuY3Rpb24gY2hhbmdlV2lkdGgodmFsKSB7CiAgICAgIHZhciBfc25hcFRvR3JpZDkgPSBzbmFwVG9HcmlkKHRoaXMuZ3JpZCwgdmFsLCAwLCB0aGlzLnNjYWxlKSwKICAgICAgICAgIF9zbmFwVG9HcmlkMTAgPSBfc2xpY2VkVG9BcnJheShfc25hcFRvR3JpZDksIDIpLAogICAgICAgICAgbmV3V2lkdGggPSBfc25hcFRvR3JpZDEwWzBdLAogICAgICAgICAgXyA9IF9zbmFwVG9HcmlkMTBbMV07CgogICAgICB2YXIgcmlnaHQgPSByZXN0cmljdFRvQm91bmRzKHRoaXMucGFyZW50V2lkdGggLSBuZXdXaWR0aCAtIHRoaXMubGVmdCwgdGhpcy5ib3VuZHMubWluUmlnaHQsIHRoaXMuYm91bmRzLm1heFJpZ2h0KTsKICAgICAgdmFyIGJvdHRvbSA9IHRoaXMuYm90dG9tOwoKICAgICAgaWYgKHRoaXMubG9ja0FzcGVjdFJhdGlvKSB7CiAgICAgICAgYm90dG9tID0gdGhpcy5ib3R0b20gLSAodGhpcy5yaWdodCAtIHJpZ2h0KSAvIHRoaXMuYXNwZWN0RmFjdG9yOwogICAgICB9CgogICAgICB2YXIgd2lkdGggPSBjb21wdXRlV2lkdGgodGhpcy5wYXJlbnRXaWR0aCwgdGhpcy5sZWZ0LCByaWdodCk7CiAgICAgIHZhciBoZWlnaHQgPSBjb21wdXRlSGVpZ2h0KHRoaXMucGFyZW50SGVpZ2h0LCB0aGlzLnRvcCwgYm90dG9tKTsKICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0OwogICAgICB0aGlzLmJvdHRvbSA9IGJvdHRvbTsKICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwogICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKICAgIH0sCiAgICBjaGFuZ2VIZWlnaHQ6IGZ1bmN0aW9uIGNoYW5nZUhlaWdodCh2YWwpIHsKICAgICAgdmFyIF9zbmFwVG9HcmlkMTEgPSBzbmFwVG9HcmlkKHRoaXMuZ3JpZCwgMCwgdmFsLCB0aGlzLnNjYWxlKSwKICAgICAgICAgIF9zbmFwVG9HcmlkMTIgPSBfc2xpY2VkVG9BcnJheShfc25hcFRvR3JpZDExLCAyKSwKICAgICAgICAgIF8gPSBfc25hcFRvR3JpZDEyWzBdLAogICAgICAgICAgbmV3SGVpZ2h0ID0gX3NuYXBUb0dyaWQxMlsxXTsKCiAgICAgIHZhciBib3R0b20gPSByZXN0cmljdFRvQm91bmRzKHRoaXMucGFyZW50SGVpZ2h0IC0gbmV3SGVpZ2h0IC0gdGhpcy50b3AsIHRoaXMuYm91bmRzLm1pbkJvdHRvbSwgdGhpcy5ib3VuZHMubWF4Qm90dG9tKTsKICAgICAgdmFyIHJpZ2h0ID0gdGhpcy5yaWdodDsKCiAgICAgIGlmICh0aGlzLmxvY2tBc3BlY3RSYXRpbykgewogICAgICAgIHJpZ2h0ID0gdGhpcy5yaWdodCAtICh0aGlzLmJvdHRvbSAtIGJvdHRvbSkgKiB0aGlzLmFzcGVjdEZhY3RvcjsKICAgICAgfQoKICAgICAgdmFyIHdpZHRoID0gY29tcHV0ZVdpZHRoKHRoaXMucGFyZW50V2lkdGgsIHRoaXMubGVmdCwgcmlnaHQpOwogICAgICB2YXIgaGVpZ2h0ID0gY29tcHV0ZUhlaWdodCh0aGlzLnBhcmVudEhlaWdodCwgdGhpcy50b3AsIGJvdHRvbSk7CiAgICAgIHRoaXMucmlnaHQgPSByaWdodDsKICAgICAgdGhpcy5ib3R0b20gPSBib3R0b207CiAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICB9LAogICAgLy8g5LuO5o6n5Yi25p+E5p2+5byACiAgICBoYW5kbGVVcDogZnVuY3Rpb24gaGFuZGxlVXAoZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciB0ZW1BcnIsIHJlZkxpbmUsIGk7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMi5oYW5kbGUgPSBudWxsOyAvLyDliJ3lp4vljJbovoXliqnnur/mlbDmja4KCiAgICAgICAgICAgICAgICB0ZW1BcnIgPSBuZXcgQXJyYXkoMykuZmlsbCh7CiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZhbHNlLAogICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJycsCiAgICAgICAgICAgICAgICAgIG9yaWdpbjogJycsCiAgICAgICAgICAgICAgICAgIGxpbmVMZW5ndGg6ICcnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJlZkxpbmUgPSB7CiAgICAgICAgICAgICAgICAgIHZMaW5lOiBbXSwKICAgICAgICAgICAgICAgICAgaExpbmU6IFtdCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGZvciAoaSBpbiByZWZMaW5lKSB7CiAgICAgICAgICAgICAgICAgIHJlZkxpbmVbaV0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRlbUFycikpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMyLnJlc2l6aW5nKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMi5yZXNpemluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5jb25mbGljdENoZWNrKCk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF90aGlzMi4kZW1pdCgncmVmTGluZVBhcmFtcycsIHJlZkxpbmUpOwoKICAgICAgICAgICAgICAgIF90aGlzMi4kZW1pdCgncmVzaXplc3RvcCcsIF90aGlzMi5sZWZ0LCBfdGhpczIudG9wLCBfdGhpczIud2lkdGgsIF90aGlzMi5oZWlnaHQpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczIuZHJhZ2dpbmcpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMyLmRyYWdnaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5jb25mbGljdENoZWNrKCk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfdGhpczIuJGVtaXQoJ3JlZkxpbmVQYXJhbXMnLCByZWZMaW5lKTsKCiAgICAgICAgICAgICAgICBfdGhpczIuJGVtaXQoJ2RyYWdzdG9wJywgX3RoaXMyLmxlZnQsIF90aGlzMi50b3ApOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgX3RoaXMyLnJlc2V0Qm91bmRzQW5kTW91c2VTdGF0ZSgpOwoKICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgZXZlbnRzRm9yLm1vdmUsIF90aGlzMi5oYW5kbGVSZXNpemUpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5paw5aKe5pa55rOVIOKGk+KGk+KGkwogICAgLy8g6K6+572u5bGe5oCnCiAgICBzZXR0aW5nQXR0cmlidXRlOiBmdW5jdGlvbiBzZXR0aW5nQXR0cmlidXRlKCkgewogICAgICAvLyDorr7nva7lhrLnqoHmo4DmtYsKICAgICAgdGhpcy4kZWwuc2V0QXR0cmlidXRlKCdkYXRhLWlzLWNoZWNrJywgIiIuY29uY2F0KHRoaXMuaXNDb25mbGljdENoZWNrKSk7IC8vIOiuvue9ruWvuem9kOWFg+e0oAoKICAgICAgdGhpcy4kZWwuc2V0QXR0cmlidXRlKCdkYXRhLWlzLXNuYXAnLCAiIi5jb25jYXQodGhpcy5zbmFwKSk7CiAgICB9LAogICAgLy8g5Yay56qB5qOA5rWLCiAgICBjb25mbGljdENoZWNrOiBmdW5jdGlvbiBjb25mbGljdENoZWNrKCkgewogICAgICB2YXIgdG9wID0gdGhpcy50b3A7CiAgICAgIHZhciBsZWZ0ID0gdGhpcy5sZWZ0OwogICAgICB2YXIgd2lkdGggPSB0aGlzLndpZHRoOwogICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7CgogICAgICBpZiAodGhpcy5pc0NvbmZsaWN0Q2hlY2spIHsKICAgICAgICB2YXIgbm9kZXMgPSB0aGlzLiRlbC5wYXJlbnROb2RlLmNoaWxkTm9kZXM7IC8vIOiOt+WPluW9k+WJjeeItuiKgueCueS4i+aJgOacieWtkOiKgueCuQoKICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobm9kZXMpLAogICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgICBpZiAoaXRlbS5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCAmJiAhaXRlbS5jbGFzc05hbWUuaW5jbHVkZXModGhpcy5jbGFzc05hbWVBY3RpdmUpICYmIGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWlzLWNoZWNrJykgIT09IG51bGwgJiYgaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaXMtY2hlY2snKSAhPT0gJ2ZhbHNlJykgewogICAgICAgICAgICAgIHZhciB0dyA9IGl0ZW0ub2Zmc2V0V2lkdGg7CiAgICAgICAgICAgICAgdmFyIHRoID0gaXRlbS5vZmZzZXRIZWlnaHQ7IC8vIOato+WImeiOt+WPlmxlZnTkuI5yaWdodAoKICAgICAgICAgICAgICB2YXIgX3RoaXMkZm9ybWF0VHJhbnNmb3JtID0gdGhpcy5mb3JtYXRUcmFuc2Zvcm1WYWwoaXRlbS5zdHlsZS50cmFuc2Zvcm0pLAogICAgICAgICAgICAgICAgICBfdGhpcyRmb3JtYXRUcmFuc2Zvcm0yID0gX3NsaWNlZFRvQXJyYXkoX3RoaXMkZm9ybWF0VHJhbnNmb3JtLCAyKSwKICAgICAgICAgICAgICAgICAgdGwgPSBfdGhpcyRmb3JtYXRUcmFuc2Zvcm0yWzBdLAogICAgICAgICAgICAgICAgICB0dCA9IF90aGlzJGZvcm1hdFRyYW5zZm9ybTJbMV07IC8vIOW3puS4iuinkuS4juWPs+S4i+inkumHjeWPoAoKCiAgICAgICAgICAgICAgdmFyIHRmQW5kQnIgPSB0b3AgPj0gdHQgJiYgbGVmdCA+PSB0bCAmJiB0dCArIHRoID4gdG9wICYmIHRsICsgdHcgPiBsZWZ0IHx8IHRvcCA8PSB0dCAmJiBsZWZ0IDwgdGwgJiYgdG9wICsgaGVpZ2h0ID4gdHQgJiYgbGVmdCArIHdpZHRoID4gdGw7IC8vIOWPs+S4iuinkuS4juW3puS4i+inkumHjeWPoAoKICAgICAgICAgICAgICB2YXIgYnJBbmRUZiA9IGxlZnQgPD0gdGwgJiYgdG9wID49IHR0ICYmIGxlZnQgKyB3aWR0aCA+IHRsICYmIHRvcCA8IHR0ICsgdGggfHwgdG9wIDwgdHQgJiYgbGVmdCA+IHRsICYmIHRvcCArIGhlaWdodCA+IHR0ICYmIGxlZnQgPCB0bCArIHR3OyAvLyDkuIvovrnkuI7kuIrovrnph43lj6AKCiAgICAgICAgICAgICAgdmFyIGJBbmRUID0gdG9wIDw9IHR0ICYmIGxlZnQgPj0gdGwgJiYgdG9wICsgaGVpZ2h0ID4gdHQgJiYgbGVmdCA8IHRsICsgdHcgfHwgdG9wID49IHR0ICYmIGxlZnQgPD0gdGwgJiYgdG9wIDwgdHQgKyB0aCAmJiBsZWZ0ID4gdGwgKyB0dzsgLy8g5LiK6L655LiO5LiL6L656YeN5Y+g77yI5a695bqm5LiN5LiA5qC377yJCgogICAgICAgICAgICAgIHZhciB0QW5kQiA9IHRvcCA8PSB0dCAmJiBsZWZ0ID49IHRsICYmIHRvcCArIGhlaWdodCA+IHR0ICYmIGxlZnQgPCB0bCArIHR3IHx8IHRvcCA+PSB0dCAmJiBsZWZ0IDw9IHRsICYmIHRvcCA8IHR0ICsgdGggJiYgbGVmdCA+IHRsICsgdHc7IC8vIOW3pui+ueS4juWPs+i+uemHjeWPoAoKICAgICAgICAgICAgICB2YXIgbEFuZFIgPSBsZWZ0ID49IHRsICYmIHRvcCA+PSB0dCAmJiBsZWZ0IDwgdGwgKyB0dyAmJiB0b3AgPCB0dCArIHRoIHx8IHRvcCA+IHR0ICYmIGxlZnQgPD0gdGwgJiYgbGVmdCArIHdpZHRoID4gdGwgJiYgdG9wIDwgdHQgKyB0aDsgLy8g5bem6L655LiO5Y+z6L656YeN5Y+g77yI6auY5bqm5LiN5LiA5qC377yJCgogICAgICAgICAgICAgIHZhciByQW5kTCA9IHRvcCA8PSB0dCAmJiBsZWZ0ID49IHRsICYmIHRvcCArIGhlaWdodCA+IHR0ICYmIGxlZnQgPCB0bCArIHR3IHx8IHRvcCA+PSB0dCAmJiBsZWZ0IDw9IHRsICYmIHRvcCA8IHR0ICsgdGggJiYgbGVmdCArIHdpZHRoID4gdGw7IC8vIOWmguaenOWGsueqge+8jOWwseWwhuWbnumAgOWIsOenu+WKqOWJjeeahOS9jee9rgoKICAgICAgICAgICAgICBpZiAodGZBbmRCciB8fCBickFuZFRmIHx8IGJBbmRUIHx8IHRBbmRCIHx8IGxBbmRSIHx8IHJBbmRMKSB7CiAgICAgICAgICAgICAgICB0aGlzLnRvcCA9IHRoaXMubW91c2VDbGlja1Bvc2l0aW9uLnRvcDsKICAgICAgICAgICAgICAgIHRoaXMubGVmdCA9IHRoaXMubW91c2VDbGlja1Bvc2l0aW9uLmxlZnQ7CiAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0ID0gdGhpcy5tb3VzZUNsaWNrUG9zaXRpb24ucmlnaHQ7CiAgICAgICAgICAgICAgICB0aGlzLmJvdHRvbSA9IHRoaXMubW91c2VDbGlja1Bvc2l0aW9uLmJvdHRvbTsKICAgICAgICAgICAgICAgIHRoaXMud2lkdGggPSB0aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbi53OwogICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLm1vdXNlQ2xpY2tQb3NpdGlvbi5oOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDmo4DmtYvlr7npvZDlhYPntKAKICAgIHNuYXBDaGVjazogZnVuY3Rpb24gc25hcENoZWNrKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciB3aWR0aCwgaGVpZ2h0LCBhY3RpdmVMZWZ0LCBhY3RpdmVSaWdodCwgYWN0aXZlVG9wLCBhY3RpdmVCb3R0b20sIHRlbUFyciwgcmVmTGluZSwgaSwgbm9kZXMsIHRlbSwgX3lpZWxkJF90aGlzMyRnZXRBY3RpLCBncm91cFdpZHRoLCBncm91cEhlaWdodCwgZ3JvdXBMZWZ0LCBncm91cFRvcCwgYmxuLCBfaXRlcmF0b3IyLCBfc3RlcDIsIGl0ZW0sIHcsIGgsIF90aGlzMyRmb3JtYXRUcmFuc2ZvciwgX3RoaXMzJGZvcm1hdFRyYW5zZm9yMiwgbCwgdCwgciwgYiwgaGMsIHZjLCB0cywgVFMsIGJzLCBCUywgbHMsIExTLCBycywgUlMsIGFyclRlbSwgX2ksIHhvcnksIGhvcnYsIF90aGlzMyRjYWxjTGluZVZhbHVlcywgb3JpZ2luLCBsZW5ndGg7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB3aWR0aCA9IF90aGlzMy53aWR0aDsKICAgICAgICAgICAgICAgIGhlaWdodCA9IF90aGlzMy5oZWlnaHQ7CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczMuc25hcCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhY3RpdmVMZWZ0ID0gX3RoaXMzLmxlZnQ7CiAgICAgICAgICAgICAgICBhY3RpdmVSaWdodCA9IF90aGlzMy5sZWZ0ICsgd2lkdGg7CiAgICAgICAgICAgICAgICBhY3RpdmVUb3AgPSBfdGhpczMudG9wOwogICAgICAgICAgICAgICAgYWN0aXZlQm90dG9tID0gX3RoaXMzLnRvcCArIGhlaWdodDsgLy8g5Yid5aeL5YyW6L6F5Yqp57q/5pWw5o2uCgogICAgICAgICAgICAgICAgdGVtQXJyID0gbmV3IEFycmF5KDMpLmZpbGwoewogICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICcnLAogICAgICAgICAgICAgICAgICBvcmlnaW46ICcnLAogICAgICAgICAgICAgICAgICBsaW5lTGVuZ3RoOiAnJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZWZMaW5lID0gewogICAgICAgICAgICAgICAgICB2TGluZTogW10sCiAgICAgICAgICAgICAgICAgIGhMaW5lOiBbXQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBmb3IgKGkgaW4gcmVmTGluZSkgewogICAgICAgICAgICAgICAgICByZWZMaW5lW2ldID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0ZW1BcnIpKTsKICAgICAgICAgICAgICAgIH0gLy8g6I635Y+W5b2T5YmN54i26IqC54K55LiL5omA5pyJ5a2Q6IqC54K5CgoKICAgICAgICAgICAgICAgIG5vZGVzID0gX3RoaXMzLiRlbC5wYXJlbnROb2RlLmNoaWxkTm9kZXM7CiAgICAgICAgICAgICAgICB0ZW0gPSB7CiAgICAgICAgICAgICAgICAgIHZhbHVlOiB7CiAgICAgICAgICAgICAgICAgICAgeDogW1tdLCBbXSwgW11dLAogICAgICAgICAgICAgICAgICAgIHk6IFtbXSwgW10sIFtdXQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBkaXNwbGF5OiBbXSwKICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFtdCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuZ2V0QWN0aXZlQWxsKG5vZGVzKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF95aWVsZCRfdGhpczMkZ2V0QWN0aSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgZ3JvdXBXaWR0aCA9IF95aWVsZCRfdGhpczMkZ2V0QWN0aS5ncm91cFdpZHRoOwogICAgICAgICAgICAgICAgZ3JvdXBIZWlnaHQgPSBfeWllbGQkX3RoaXMzJGdldEFjdGkuZ3JvdXBIZWlnaHQ7CiAgICAgICAgICAgICAgICBncm91cExlZnQgPSBfeWllbGQkX3RoaXMzJGdldEFjdGkuZ3JvdXBMZWZ0OwogICAgICAgICAgICAgICAgZ3JvdXBUb3AgPSBfeWllbGQkX3RoaXMzJGdldEFjdGkuZ3JvdXBUb3A7CiAgICAgICAgICAgICAgICBibG4gPSBfeWllbGQkX3RoaXMzJGdldEFjdGkuYmxuOwoKICAgICAgICAgICAgICAgIGlmICghYmxuKSB7CiAgICAgICAgICAgICAgICAgIHdpZHRoID0gZ3JvdXBXaWR0aDsKICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gZ3JvdXBIZWlnaHQ7CiAgICAgICAgICAgICAgICAgIGFjdGl2ZUxlZnQgPSBncm91cExlZnQ7CiAgICAgICAgICAgICAgICAgIGFjdGl2ZVJpZ2h0ID0gZ3JvdXBMZWZ0ICsgZ3JvdXBXaWR0aDsKICAgICAgICAgICAgICAgICAgYWN0aXZlVG9wID0gZ3JvdXBUb3A7CiAgICAgICAgICAgICAgICAgIGFjdGl2ZUJvdHRvbSA9IGdyb3VwVG9wICsgZ3JvdXBIZWlnaHQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZGVzKTsKCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBfc3RlcDIudmFsdWU7CgogICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkICYmICFpdGVtLmNsYXNzTmFtZS5pbmNsdWRlcyhfdGhpczMuY2xhc3NOYW1lQWN0aXZlKSAmJiBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1pcy1zbmFwJykgIT09IG51bGwgJiYgaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaXMtc25hcCcpICE9PSAnZmFsc2UnKSB7CiAgICAgICAgICAgICAgICAgICAgICB3ID0gaXRlbS5vZmZzZXRXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgIGggPSBpdGVtLm9mZnNldEhlaWdodDsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMyRmb3JtYXRUcmFuc2ZvciA9IF90aGlzMy5mb3JtYXRUcmFuc2Zvcm1WYWwoaXRlbS5zdHlsZS50cmFuc2Zvcm0pLCBfdGhpczMkZm9ybWF0VHJhbnNmb3IyID0gX3NsaWNlZFRvQXJyYXkoX3RoaXMzJGZvcm1hdFRyYW5zZm9yLCAyKSwgbCA9IF90aGlzMyRmb3JtYXRUcmFuc2ZvcjJbMF0sIHQgPSBfdGhpczMkZm9ybWF0VHJhbnNmb3IyWzFdOwogICAgICAgICAgICAgICAgICAgICAgciA9IGwgKyB3OyAvLyDlr7npvZDnm67moIdyaWdodAoKICAgICAgICAgICAgICAgICAgICAgIGIgPSB0ICsgaDsgLy8g5a+56b2Q55uu5qCH55qEYm90dG9tCgogICAgICAgICAgICAgICAgICAgICAgaGMgPSBNYXRoLmFicyhhY3RpdmVUb3AgKyBoZWlnaHQgLyAyIC0gKHQgKyBoIC8gMikpIDw9IF90aGlzMy5zbmFwVG9sZXJhbmNlOyAvLyDmsLTlubPkuK3nur8KCiAgICAgICAgICAgICAgICAgICAgICB2YyA9IE1hdGguYWJzKGFjdGl2ZUxlZnQgKyB3aWR0aCAvIDIgLSAobCArIHcgLyAyKSkgPD0gX3RoaXMzLnNuYXBUb2xlcmFuY2U7IC8vIOWeguebtOS4ree6vwoKICAgICAgICAgICAgICAgICAgICAgIHRzID0gTWF0aC5hYnModCAtIGFjdGl2ZUJvdHRvbSkgPD0gX3RoaXMzLnNuYXBUb2xlcmFuY2U7IC8vIOS7juS4iuWIsOS4iwoKICAgICAgICAgICAgICAgICAgICAgIFRTID0gTWF0aC5hYnMoYiAtIGFjdGl2ZUJvdHRvbSkgPD0gX3RoaXMzLnNuYXBUb2xlcmFuY2U7IC8vIOS7juS4iuWIsOS4iwoKICAgICAgICAgICAgICAgICAgICAgIGJzID0gTWF0aC5hYnModCAtIGFjdGl2ZVRvcCkgPD0gX3RoaXMzLnNuYXBUb2xlcmFuY2U7IC8vIOS7juS4i+WIsOS4igoKICAgICAgICAgICAgICAgICAgICAgIEJTID0gTWF0aC5hYnMoYiAtIGFjdGl2ZVRvcCkgPD0gX3RoaXMzLnNuYXBUb2xlcmFuY2U7IC8vIOS7juS4i+WIsOS4igoKICAgICAgICAgICAgICAgICAgICAgIGxzID0gTWF0aC5hYnMobCAtIGFjdGl2ZVJpZ2h0KSA8PSBfdGhpczMuc25hcFRvbGVyYW5jZTsgLy8g5aSW5bemCgogICAgICAgICAgICAgICAgICAgICAgTFMgPSBNYXRoLmFicyhyIC0gYWN0aXZlUmlnaHQpIDw9IF90aGlzMy5zbmFwVG9sZXJhbmNlOyAvLyDlpJblt6YKCiAgICAgICAgICAgICAgICAgICAgICBycyA9IE1hdGguYWJzKGwgLSBhY3RpdmVMZWZ0KSA8PSBfdGhpczMuc25hcFRvbGVyYW5jZTsgLy8g5aSW5Y+zCgogICAgICAgICAgICAgICAgICAgICAgUlMgPSBNYXRoLmFicyhyIC0gYWN0aXZlTGVmdCkgPD0gX3RoaXMzLnNuYXBUb2xlcmFuY2U7IC8vIOWkluWPswoKICAgICAgICAgICAgICAgICAgICAgIHRlbVsnZGlzcGxheSddID0gW3RzLCBUUywgYnMsIEJTLCBoYywgaGMsIGxzLCBMUywgcnMsIFJTLCB2YywgdmNdOwogICAgICAgICAgICAgICAgICAgICAgdGVtWydwb3NpdGlvbiddID0gW3QsIGIsIHQsIGIsIHQgKyBoIC8gMiwgdCArIGggLyAyLCBsLCByLCBsLCByLCBsICsgdyAvIDIsIGwgKyB3IC8gMl07CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMudG9wID0gdCAtIGhlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuYm90dG9tID0gX3RoaXMzLnBhcmVudEhlaWdodCAtIF90aGlzMy50b3AgLSBoZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHRlbS52YWx1ZS55WzBdLnB1c2gobCwgciwgYWN0aXZlTGVmdCwgYWN0aXZlUmlnaHQpOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmIChicykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmxuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnRvcCA9IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmJvdHRvbSA9IF90aGlzMy5wYXJlbnRIZWlnaHQgLSBfdGhpczMudG9wIC0gaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB0ZW0udmFsdWUueVswXS5wdXNoKGwsIHIsIGFjdGl2ZUxlZnQsIGFjdGl2ZVJpZ2h0KTsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAoVFMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsbikgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy50b3AgPSBiIC0gaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5ib3R0b20gPSBfdGhpczMucGFyZW50SGVpZ2h0IC0gX3RoaXMzLnRvcCAtIGhlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdGVtLnZhbHVlLnlbMV0ucHVzaChsLCByLCBhY3RpdmVMZWZ0LCBhY3RpdmVSaWdodCk7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgaWYgKEJTKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMudG9wID0gYjsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuYm90dG9tID0gX3RoaXMzLnBhcmVudEhlaWdodCAtIF90aGlzMy50b3AgLSBoZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHRlbS52YWx1ZS55WzFdLnB1c2gobCwgciwgYWN0aXZlTGVmdCwgYWN0aXZlUmlnaHQpOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmIChscykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmxuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmxlZnQgPSBsIC0gd2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnJpZ2h0ID0gX3RoaXMzLnBhcmVudFdpZHRoIC0gX3RoaXMzLmxlZnQgLSB3aWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdGVtLnZhbHVlLnhbMF0ucHVzaCh0LCBiLCBhY3RpdmVUb3AsIGFjdGl2ZUJvdHRvbSk7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHJzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMubGVmdCA9IGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnJpZ2h0ID0gX3RoaXMzLnBhcmVudFdpZHRoIC0gX3RoaXMzLmxlZnQgLSB3aWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdGVtLnZhbHVlLnhbMF0ucHVzaCh0LCBiLCBhY3RpdmVUb3AsIGFjdGl2ZUJvdHRvbSk7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgaWYgKExTKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMubGVmdCA9IHIgLSB3aWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMucmlnaHQgPSBfdGhpczMucGFyZW50V2lkdGggLSBfdGhpczMubGVmdCAtIHdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB0ZW0udmFsdWUueFsxXS5wdXNoKHQsIGIsIGFjdGl2ZVRvcCwgYWN0aXZlQm90dG9tKTsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAoUlMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsbikgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5sZWZ0ID0gcjsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMucmlnaHQgPSBfdGhpczMucGFyZW50V2lkdGggLSBfdGhpczMubGVmdCAtIHdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB0ZW0udmFsdWUueFsxXS5wdXNoKHQsIGIsIGFjdGl2ZVRvcCwgYWN0aXZlQm90dG9tKTsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAoaGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsbikgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy50b3AgPSB0ICsgaCAvIDIgLSBoZWlnaHQgLyAyOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5ib3R0b20gPSBfdGhpczMucGFyZW50SGVpZ2h0IC0gX3RoaXMzLnRvcCAtIGhlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdGVtLnZhbHVlLnlbMl0ucHVzaChsLCByLCBhY3RpdmVMZWZ0LCBhY3RpdmVSaWdodCk7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHZjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMubGVmdCA9IGwgKyB3IC8gMiAtIHdpZHRoIC8gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMucmlnaHQgPSBfdGhpczMucGFyZW50V2lkdGggLSBfdGhpczMubGVmdCAtIHdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB0ZW0udmFsdWUueFsyXS5wdXNoKHQsIGIsIGFjdGl2ZVRvcCwgYWN0aXZlQm90dG9tKTsKICAgICAgICAgICAgICAgICAgICAgIH0gLy8g6L6F5Yqp57q/5Z2Q5qCH5LiO5piv5ZCm5pi+56S6KGRpc3BsYXkp5a+55bqU55qE5pWw57uELOaYk+S6juW+queOr+mBjeWOhgoKCiAgICAgICAgICAgICAgICAgICAgICBhcnJUZW0gPSBbMCwgMSwgMCwgMSwgMiwgMiwgMCwgMSwgMCwgMSwgMiwgMl07CgogICAgICAgICAgICAgICAgICAgICAgZm9yIChfaSA9IDA7IF9pIDw9IGFyclRlbS5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g5YmNNuS4ulnovoXliqnnur8s5ZCONuS4uljovoXliqnnur8KICAgICAgICAgICAgICAgICAgICAgICAgeG9yeSA9IF9pIDwgNiA/ICd5JyA6ICd4JzsKICAgICAgICAgICAgICAgICAgICAgICAgaG9ydiA9IF9pIDwgNiA/ICdoTGluZScgOiAndkxpbmUnOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbS5kaXNwbGF5W19pXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMyRjYWxjTGluZVZhbHVlcyA9IF90aGlzMy5jYWxjTGluZVZhbHVlcyh0ZW0udmFsdWVbeG9yeV1bYXJyVGVtW19pXV0pLCBvcmlnaW4gPSBfdGhpczMkY2FsY0xpbmVWYWx1ZXMub3JpZ2luLCBsZW5ndGggPSBfdGhpczMkY2FsY0xpbmVWYWx1ZXMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJlZkxpbmVbaG9ydl1bYXJyVGVtW19pXV0uZGlzcGxheSA9IHRlbS5kaXNwbGF5W19pXTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZWZMaW5lW2hvcnZdW2FyclRlbVtfaV1dLnBvc2l0aW9uID0gdGVtLnBvc2l0aW9uW19pXSArICdweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmTGluZVtob3J2XVthcnJUZW1bX2ldXS5vcmlnaW4gPSBvcmlnaW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmTGluZVtob3J2XVthcnJUZW1bX2ldXS5saW5lTGVuZ3RoID0gbGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczMuJGVtaXQoJ3JlZkxpbmVQYXJhbXMnLCByZWZMaW5lKTsKCiAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNhbGNMaW5lVmFsdWVzOiBmdW5jdGlvbiBjYWxjTGluZVZhbHVlcyhhcnIpIHsKICAgICAgdmFyIGxlbmd0aCA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIF90b0NvbnN1bWFibGVBcnJheShhcnIpKSAtIE1hdGgubWluLmFwcGx5KE1hdGgsIF90b0NvbnN1bWFibGVBcnJheShhcnIpKSArICdweCc7CiAgICAgIHZhciBvcmlnaW4gPSBNYXRoLm1pbi5hcHBseShNYXRoLCBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSkgKyAncHgnOwogICAgICByZXR1cm4gewogICAgICAgIGxlbmd0aDogbGVuZ3RoLAogICAgICAgIG9yaWdpbjogb3JpZ2luCiAgICAgIH07CiAgICB9LAogICAgZ2V0QWN0aXZlQWxsOiBmdW5jdGlvbiBnZXRBY3RpdmVBbGwobm9kZXMpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgYWN0aXZlQWxsLCBYQXJyYXksIFlBcnJheSwgZ3JvdXBXaWR0aCwgZ3JvdXBIZWlnaHQsIGdyb3VwTGVmdCwgZ3JvdXBUb3AsIF9pdGVyYXRvcjMsIF9zdGVwMywgaXRlbSwgQWxsTGVuZ3RoLCBfaXRlcmF0b3I0LCBfc3RlcDQsIGksIGwsIHIsIHQsIGIsIGJsbjsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGFjdGl2ZUFsbCA9IFtdOwogICAgICAgICAgICAgICAgWEFycmF5ID0gW107CiAgICAgICAgICAgICAgICBZQXJyYXkgPSBbXTsKICAgICAgICAgICAgICAgIGdyb3VwV2lkdGggPSAwOwogICAgICAgICAgICAgICAgZ3JvdXBIZWlnaHQgPSAwOwogICAgICAgICAgICAgICAgZ3JvdXBMZWZ0ID0gMDsKICAgICAgICAgICAgICAgIGdyb3VwVG9wID0gMDsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2Rlcyk7CgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgICAgICBpdGVtID0gX3N0ZXAzLnZhbHVlOwoKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCAmJiBpdGVtLmNsYXNzTmFtZS5pbmNsdWRlcyhfdGhpczQuY2xhc3NOYW1lQWN0aXZlKSkgewogICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQWxsLnB1c2goaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBBbGxMZW5ndGggPSBhY3RpdmVBbGwubGVuZ3RoOwoKICAgICAgICAgICAgICAgIGlmIChBbGxMZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihhY3RpdmVBbGwpOwoKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICAgICAgaSA9IF9zdGVwNC52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgIGwgPSBpLm9mZnNldExlZnQ7CiAgICAgICAgICAgICAgICAgICAgICByID0gbCArIGkub2Zmc2V0V2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICB0ID0gaS5vZmZzZXRUb3A7CiAgICAgICAgICAgICAgICAgICAgICBiID0gdCArIGkub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgWEFycmF5LnB1c2godCwgYik7CiAgICAgICAgICAgICAgICAgICAgICBZQXJyYXkucHVzaChsLCByKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjQuZShlcnIpOwogICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBncm91cFdpZHRoID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgWUFycmF5KSAtIE1hdGgubWluLmFwcGx5KE1hdGgsIFlBcnJheSk7CiAgICAgICAgICAgICAgICAgIGdyb3VwSGVpZ2h0ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgWEFycmF5KSAtIE1hdGgubWluLmFwcGx5KE1hdGgsIFhBcnJheSk7CiAgICAgICAgICAgICAgICAgIGdyb3VwTGVmdCA9IE1hdGgubWluLmFwcGx5KE1hdGgsIFlBcnJheSk7CiAgICAgICAgICAgICAgICAgIGdyb3VwVG9wID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgWEFycmF5KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBibG4gPSBBbGxMZW5ndGggPT09IDE7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgICBncm91cFdpZHRoOiBncm91cFdpZHRoLAogICAgICAgICAgICAgICAgICBncm91cEhlaWdodDogZ3JvdXBIZWlnaHQsCiAgICAgICAgICAgICAgICAgIGdyb3VwTGVmdDogZ3JvdXBMZWZ0LAogICAgICAgICAgICAgICAgICBncm91cFRvcDogZ3JvdXBUb3AsCiAgICAgICAgICAgICAgICAgIGJsbjogYmxuCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOato+WImeiOt+WPlmxlZnTkuI50b3AKICAgIGZvcm1hdFRyYW5zZm9ybVZhbDogZnVuY3Rpb24gZm9ybWF0VHJhbnNmb3JtVmFsKHN0cmluZykgewogICAgICB2YXIgX3N0cmluZyRyZXBsYWNlJHNwbGl0ID0gc3RyaW5nLnJlcGxhY2UoL1teMC05XC0sXS9nLCAnJykuc3BsaXQoJywnKSwKICAgICAgICAgIF9zdHJpbmckcmVwbGFjZSRzcGxpdDIgPSBfc2xpY2VkVG9BcnJheShfc3RyaW5nJHJlcGxhY2Ukc3BsaXQsIDIpLAogICAgICAgICAgbGVmdCA9IF9zdHJpbmckcmVwbGFjZSRzcGxpdDJbMF0sCiAgICAgICAgICB0b3AgPSBfc3RyaW5nJHJlcGxhY2Ukc3BsaXQyWzFdOwoKICAgICAgaWYgKHRvcCA9PT0gdW5kZWZpbmVkKSB0b3AgPSAwOwogICAgICByZXR1cm4gWytsZWZ0LCArdG9wXTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBoYW5kbGVTdHlsZTogZnVuY3Rpb24gaGFuZGxlU3R5bGUoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdGljaykgewogICAgICAgIGlmICghX3RoaXM1LmhhbmRsZUluZm8uc3dpdGNoKSByZXR1cm4gewogICAgICAgICAgZGlzcGxheTogX3RoaXM1LmVuYWJsZWQgPyAnYmxvY2snIDogJ25vbmUnCiAgICAgICAgfTsKCiAgICAgICAgdmFyIHNpemUgPSAoX3RoaXM1LmhhbmRsZUluZm8uc2l6ZSAvIF90aGlzNS5zY2FsZVJhdGlvKS50b0ZpeGVkKDIpOwoKICAgICAgICB2YXIgb2Zmc2V0ID0gKF90aGlzNS5oYW5kbGVJbmZvLm9mZnNldCAvIF90aGlzNS5zY2FsZVJhdGlvKS50b0ZpeGVkKDIpOwoKICAgICAgICB2YXIgY2VudGVyID0gKHNpemUgLyAyKS50b0ZpeGVkKDIpOwogICAgICAgIHZhciBzdHlsZU1hcCA9IHsKICAgICAgICAgIHRsOiB7CiAgICAgICAgICAgIHRvcDogIiIuY29uY2F0KG9mZnNldCwgInB4IiksCiAgICAgICAgICAgIGxlZnQ6ICIiLmNvbmNhdChvZmZzZXQsICJweCIpCiAgICAgICAgICB9LAogICAgICAgICAgdG06IHsKICAgICAgICAgICAgdG9wOiAiIi5jb25jYXQob2Zmc2V0LCAicHgiKSwKICAgICAgICAgICAgbGVmdDogImNhbGMoNTAlIC0gIi5jb25jYXQoY2VudGVyLCAicHgpIikKICAgICAgICAgIH0sCiAgICAgICAgICB0cjogewogICAgICAgICAgICB0b3A6ICIiLmNvbmNhdChvZmZzZXQsICJweCIpLAogICAgICAgICAgICByaWdodDogIiIuY29uY2F0KG9mZnNldCwgInB4IikKICAgICAgICAgIH0sCiAgICAgICAgICBtcjogewogICAgICAgICAgICB0b3A6ICJjYWxjKDUwJSAtICIuY29uY2F0KGNlbnRlciwgInB4KSIpLAogICAgICAgICAgICByaWdodDogIiIuY29uY2F0KG9mZnNldCwgInB4IikKICAgICAgICAgIH0sCiAgICAgICAgICBicjogewogICAgICAgICAgICBib3R0b206ICIiLmNvbmNhdChvZmZzZXQsICJweCIpLAogICAgICAgICAgICByaWdodDogIiIuY29uY2F0KG9mZnNldCwgInB4IikKICAgICAgICAgIH0sCiAgICAgICAgICBibTogewogICAgICAgICAgICBib3R0b206ICIiLmNvbmNhdChvZmZzZXQsICJweCIpLAogICAgICAgICAgICByaWdodDogImNhbGMoNTAlIC0gIi5jb25jYXQoY2VudGVyLCAicHgpIikKICAgICAgICAgIH0sCiAgICAgICAgICBibDogewogICAgICAgICAgICBib3R0b206ICIiLmNvbmNhdChvZmZzZXQsICJweCIpLAogICAgICAgICAgICBsZWZ0OiAiIi5jb25jYXQob2Zmc2V0LCAicHgiKQogICAgICAgICAgfSwKICAgICAgICAgIG1sOiB7CiAgICAgICAgICAgIHRvcDogImNhbGMoNTAlIC0gIi5jb25jYXQoY2VudGVyLCAicHgpIiksCiAgICAgICAgICAgIGxlZnQ6ICIiLmNvbmNhdChvZmZzZXQsICJweCIpCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB2YXIgc3RpY2tTdHlsZSA9IHsKICAgICAgICAgIHdpZHRoOiAiIi5jb25jYXQoc2l6ZSwgInB4IiksCiAgICAgICAgICBoZWlnaHQ6ICIiLmNvbmNhdChzaXplLCAicHgiKSwKICAgICAgICAgIHRvcDogc3R5bGVNYXBbc3RpY2tdLnRvcCwKICAgICAgICAgIGxlZnQ6IHN0eWxlTWFwW3N0aWNrXS5sZWZ0LAogICAgICAgICAgcmlnaHQ6IHN0eWxlTWFwW3N0aWNrXS5yaWdodCwKICAgICAgICAgIGJvdHRvbTogc3R5bGVNYXBbc3RpY2tdLmJvdHRvbQogICAgICAgIH07CiAgICAgICAgc3RpY2tTdHlsZS5kaXNwbGF5ID0gX3RoaXM1LmVuYWJsZWQgPyAnYmxvY2snIDogJ25vbmUnOwogICAgICAgIHJldHVybiBzdGlja1N0eWxlOwogICAgICB9OwogICAgfSwKICAgIHN0eWxlOiBmdW5jdGlvbiBzdHlsZSgpIHsKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoewogICAgICAgIHRyYW5zZm9ybTogInRyYW5zbGF0ZSgiLmNvbmNhdCh0aGlzLmxlZnQsICJweCwgIikuY29uY2F0KHRoaXMudG9wLCAicHgpIiksCiAgICAgICAgd2lkdGg6IHRoaXMuY29tcHV0ZWRXaWR0aCwKICAgICAgICBoZWlnaHQ6IHRoaXMuY29tcHV0ZWRIZWlnaHQsCiAgICAgICAgJ2JhY2tncm91bmQtY29sb3InOiB0aGlzLmJnQ2xyLAogICAgICAgICdiYWNrZ3JvdW5kLWltYWdlJzogInVybCgiLmNvbmNhdCh0aGlzLmJnSW1hZ2UsICIpIiksCiAgICAgICAgJ2JhY2tncm91bmQtc2l6ZSc6IHRoaXMuYmdTaXplIHx8ICcxMDAlIDEwMCUnLAogICAgICAgIHpJbmRleDogdGhpcy56SW5kZXgKICAgICAgfSwgdGhpcy5kcmFnZ2luZyAmJiB0aGlzLmRpc2FibGVVc2VyU2VsZWN0ID8gdXNlclNlbGVjdE5vbmUgOiB1c2VyU2VsZWN0QXV0byk7CiAgICB9LAogICAgLy8g5o6n5Yi25p+E5pi+56S65LiO5ZCmCiAgICBhY3R1YWxIYW5kbGVzOiBmdW5jdGlvbiBhY3R1YWxIYW5kbGVzKCkgewogICAgICBpZiAoIXRoaXMucmVzaXphYmxlKSByZXR1cm4gW107CiAgICAgIHJldHVybiB0aGlzLmhhbmRsZXM7CiAgICB9LAogICAgY29tcHV0ZWRXaWR0aDogZnVuY3Rpb24gY29tcHV0ZWRXaWR0aCgpIHsKICAgICAgaWYgKHRoaXMudyA9PT0gJ2F1dG8nKSB7CiAgICAgICAgaWYgKCF0aGlzLndpZHRoVG91Y2hlZCkgewogICAgICAgICAgcmV0dXJuICdhdXRvJzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLndpZHRoICsgJ3B4JzsKICAgIH0sCiAgICBjb21wdXRlZEhlaWdodDogZnVuY3Rpb24gY29tcHV0ZWRIZWlnaHQoKSB7CiAgICAgIGlmICh0aGlzLmggPT09ICdhdXRvJykgewogICAgICAgIGlmICghdGhpcy5oZWlnaHRUb3VjaGVkKSB7CiAgICAgICAgICByZXR1cm4gJ2F1dG8nOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0ICsgJ3B4JzsKICAgIH0sCiAgICByZXNpemluZ09uWDogZnVuY3Rpb24gcmVzaXppbmdPblgoKSB7CiAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuaGFuZGxlKSAmJiAodGhpcy5oYW5kbGUuaW5jbHVkZXMoJ2wnKSB8fCB0aGlzLmhhbmRsZS5pbmNsdWRlcygncicpKTsKICAgIH0sCiAgICByZXNpemluZ09uWTogZnVuY3Rpb24gcmVzaXppbmdPblkoKSB7CiAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuaGFuZGxlKSAmJiAodGhpcy5oYW5kbGUuaW5jbHVkZXMoJ3QnKSB8fCB0aGlzLmhhbmRsZS5pbmNsdWRlcygnYicpKTsKICAgIH0sCiAgICBpc0Nvcm5lckhhbmRsZTogZnVuY3Rpb24gaXNDb3JuZXJIYW5kbGUoKSB7CiAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuaGFuZGxlKSAmJiBbJ3RsJywgJ3RyJywgJ2JyJywgJ2JsJ10uaW5jbHVkZXModGhpcy5oYW5kbGUpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGFjdGl2ZTogZnVuY3Rpb24gYWN0aXZlKHZhbCkgewogICAgICB0aGlzLmVuYWJsZWQgPSB2YWw7CgogICAgICBpZiAodmFsKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnYWN0aXZhdGVkJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kZW1pdCgnZGVhY3RpdmF0ZWQnKTsKICAgICAgfQogICAgfSwKICAgIHo6IGZ1bmN0aW9uIHoodmFsKSB7CiAgICAgIGlmICh2YWwgPj0gMCB8fCB2YWwgPT09ICdhdXRvJykgewogICAgICAgIHRoaXMuekluZGV4ID0gdmFsOwogICAgICB9CiAgICB9LAogICAgeDogZnVuY3Rpb24geCh2YWwpIHsKICAgICAgaWYgKHRoaXMucmVzaXppbmcgfHwgdGhpcy5kcmFnZ2luZykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucGFyZW50KSB7CiAgICAgICAgdGhpcy5ib3VuZHMgPSB0aGlzLmNhbGNEcmFnTGltaXRzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMubW92ZUhvcml6b250YWxseSh2YWwpOwogICAgfSwKICAgIHk6IGZ1bmN0aW9uIHkodmFsKSB7CiAgICAgIGlmICh0aGlzLnJlc2l6aW5nIHx8IHRoaXMuZHJhZ2dpbmcpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnBhcmVudCkgewogICAgICAgIHRoaXMuYm91bmRzID0gdGhpcy5jYWxjRHJhZ0xpbWl0cygpOwogICAgICB9CgogICAgICB0aGlzLm1vdmVWZXJ0aWNhbGx5KHZhbCk7CiAgICB9LAogICAgbG9ja0FzcGVjdFJhdGlvOiBmdW5jdGlvbiBsb2NrQXNwZWN0UmF0aW8odmFsKSB7CiAgICAgIGlmICh2YWwpIHsKICAgICAgICB0aGlzLmFzcGVjdEZhY3RvciA9IHRoaXMud2lkdGggLyB0aGlzLmhlaWdodDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFzcGVjdEZhY3RvciA9IHVuZGVmaW5lZDsKICAgICAgfQogICAgfSwKICAgIG1pbldpZHRoOiBmdW5jdGlvbiBtaW5XaWR0aCh2YWwpIHsKICAgICAgaWYgKHZhbCA+IDAgJiYgdmFsIDw9IHRoaXMud2lkdGgpIHsKICAgICAgICB0aGlzLm1pblcgPSB2YWw7CiAgICAgIH0KICAgIH0sCiAgICBtaW5IZWlnaHQ6IGZ1bmN0aW9uIG1pbkhlaWdodCh2YWwpIHsKICAgICAgaWYgKHZhbCA+IDAgJiYgdmFsIDw9IHRoaXMuaGVpZ2h0KSB7CiAgICAgICAgdGhpcy5taW5IID0gdmFsOwogICAgICB9CiAgICB9LAogICAgbWF4V2lkdGg6IGZ1bmN0aW9uIG1heFdpZHRoKHZhbCkgewogICAgICB0aGlzLm1heFcgPSB2YWw7CiAgICB9LAogICAgbWF4SGVpZ2h0OiBmdW5jdGlvbiBtYXhIZWlnaHQodmFsKSB7CiAgICAgIHRoaXMubWF4SCA9IHZhbDsKICAgIH0sCiAgICB3OiBmdW5jdGlvbiB3KHZhbCkgewogICAgICBpZiAodGhpcy5yZXNpemluZyB8fCB0aGlzLmRyYWdnaW5nKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5wYXJlbnQpIHsKICAgICAgICB0aGlzLmJvdW5kcyA9IHRoaXMuY2FsY1Jlc2l6ZUxpbWl0cygpOwogICAgICB9CgogICAgICB0aGlzLmNoYW5nZVdpZHRoKHZhbCk7CiAgICB9LAogICAgaDogZnVuY3Rpb24gaCh2YWwpIHsKICAgICAgaWYgKHRoaXMucmVzaXppbmcgfHwgdGhpcy5kcmFnZ2luZykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucGFyZW50KSB7CiAgICAgICAgdGhpcy5ib3VuZHMgPSB0aGlzLmNhbGNSZXNpemVMaW1pdHMoKTsKICAgICAgfQoKICAgICAgdGhpcy5jaGFuZ2VIZWlnaHQodmFsKTsKICAgIH0KICB9Cn07"},null]}