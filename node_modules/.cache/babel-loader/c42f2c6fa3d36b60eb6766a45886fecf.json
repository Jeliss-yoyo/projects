{"remainingRequest":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\babel-loader\\lib\\index.js!D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\layout\\custom-made.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\src\\components\\layout\\custom-made.vue","mtime":1610602211234},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\HBuilderX\\SF-Team\\nkplat-design\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkQ6L3dvcmtzcGFjZS9IQnVpbGRlclgvU0YtVGVhbS9ua3BsYXQtZGVzaWduL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHZ1ZVJlc2lhYmxlIGZyb20gJ0AvY29tcG9uZW50cy9yZXNpemFibGUvdnVlLXJlc2l6YWJsZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnY3VzdG9tLW1hZGUnLAogIGNvbXBvbmVudHM6IHsKICAgIHZ1ZVJlc2lhYmxlOiB2dWVSZXNpYWJsZQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOW9k+WJjemhueebruS/oeaBrwogICAgICBwcm9qZWN0OiB0aGlzLiRzdG9yZS5zdGF0ZS5wcm9qZWN0LAogICAgICAvLyBjdXN0b20tbWFkZSDlrrnlmajlsLrlr7gKICAgICAgd3JhcFNpemU6IFtdLAogICAgICAvLyDomZrmi5/lpKflsY/nmoTlsLrlr7gKICAgICAgdlNjcmVlblNpemU6IFtdLAogICAgICAvLyDlvZPliY3nvKnmlL7mr5TkvosKICAgICAgdlNjYWxlOiAxCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0V3JhcFNpemUoKTsKICAgIHRoaXMuc2V0VmlydHVhbFNjcmVlbigpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+WIGN1c3RvbS1tYWRlIOWuueWZqOWwuuWvuAogICAgZ2V0V3JhcFNpemU6IGZ1bmN0aW9uIGdldFdyYXBTaXplKCkgewogICAgICB2YXIgd3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjdXN0b20tbWFkZScpOwogICAgICB2YXIgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh3cmFwLCBudWxsKTsKICAgICAgdGhpcy53cmFwU2l6ZSA9IFtwYXJzZUZsb2F0KHN0eWxlLndpZHRoKSwgcGFyc2VGbG9hdChzdHlsZS5oZWlnaHQpXTsKICAgIH0sCiAgICAvLyDorr7nva7omZrmi5/lpKflsY/vvIjmoLnmja7pobnnm67liIbovqjnjofvvIzku6XkuIDlrprnmoTns7vmlbDov5vooYznrYnmr5TnvKnmlL7vvIkKICAgIHNldFZpcnR1YWxTY3JlZW46IGZ1bmN0aW9uIHNldFZpcnR1YWxTY3JlZW4oKSB7CiAgICAgIHZhciBfdGhpcyRwcm9qZWN0JHJlc29sdXQgPSBfc2xpY2VkVG9BcnJheSh0aGlzLnByb2plY3QucmVzb2x1dGlvbiwgMiksCiAgICAgICAgICBwdyA9IF90aGlzJHByb2plY3QkcmVzb2x1dFswXSwKICAgICAgICAgIHBoID0gX3RoaXMkcHJvamVjdCRyZXNvbHV0WzFdOwoKICAgICAgdmFyIF90aGlzJHdyYXBTaXplID0gX3NsaWNlZFRvQXJyYXkodGhpcy53cmFwU2l6ZSwgMiksCiAgICAgICAgICBydyA9IF90aGlzJHdyYXBTaXplWzBdLAogICAgICAgICAgcmggPSBfdGhpcyR3cmFwU2l6ZVsxXTsKCiAgICAgIHZhciB2c3csIHZzaCwgc2NhbGU7IC8vIOiuoeeul+acgOS9s+eahOiZmuaLn+Wkp+Wxj+WwuuWvuOS7peWPiue8qeaUvuezu+aVsAoKICAgICAgaWYgKHJ3IC8gcmggPD0gcHcgLyBwaCkgewogICAgICAgIHZzdyA9IHJ3OwogICAgICAgIHZzaCA9IHZzdyAqIHBoIC8gcHc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdnNoID0gcmg7CiAgICAgICAgdnN3ID0gdnNoICogcHcgLyBwaDsKICAgICAgfQoKICAgICAgc2NhbGUgPSB2c3cgLyBwdzsKICAgICAgdGhpcy52U2NhbGUgPSBzY2FsZTsKICAgICAgdmFyIHZTY3JlZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdmlydHVhbC1zY3JlZW4nKTsKICAgICAgdlNjcmVlbi5zdHlsZS5jc3NUZXh0ID0gIlxuXHRcdFx0XHR3aWR0aDogIi5jb25jYXQodnN3IC8gc2NhbGUsICJweDsgXG5cdFx0XHRcdGhlaWdodDogIikuY29uY2F0KHZzaCAvIHNjYWxlLCAicHg7XG5cdFx0XHRcdHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpIHNjYWxlKCIpLmNvbmNhdChzY2FsZSwgIik7XG5cdFx0XHQiKTsKICAgIH0sCiAgICBnZXRCb3hpbmZvOiBmdW5jdGlvbiBnZXRCb3hpbmZvKGwsIHQsIHcsIGgpIHsKICAgICAgY29uc29sZS5sb2coJ2JveDonLCBsLCB0LCB3LCBoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["custom-made.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAYA,OAAA,WAAA,MAAA,sCAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,WAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA;AACA,MAAA,OAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,OAFA;AAGA;AACA,MAAA,QAAA,EAAA,EAJA;AAKA;AACA,MAAA,WAAA,EAAA,EANA;AAOA;AACA,MAAA,MAAA,EAAA;AARA,KAAA;AAUA,GAhBA;AAiBA,EAAA,OAjBA,qBAiBA;AACA,SAAA,WAAA;AACA,SAAA,gBAAA;AACA,GApBA;AAqBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,WAFA,yBAEA;AACA,UAAA,IAAA,GAAA,QAAA,CAAA,aAAA,CAAA,cAAA,CAAA;AACA,UAAA,KAAA,GAAA,MAAA,CAAA,gBAAA,CAAA,IAAA,EAAA,IAAA,CAAA;AACA,WAAA,QAAA,GAAA,CAAA,UAAA,CAAA,KAAA,CAAA,KAAA,CAAA,EAAA,UAAA,CAAA,KAAA,CAAA,MAAA,CAAA,CAAA;AACA,KANA;AAOA;AACA,IAAA,gBARA,8BAQA;AAAA,iDACA,KAAA,OAAA,CAAA,UADA;AAAA,UACA,EADA;AAAA,UACA,EADA;;AAAA,0CAEA,KAAA,QAFA;AAAA,UAEA,EAFA;AAAA,UAEA,EAFA;;AAGA,UAAA,GAAA,EAAA,GAAA,EAAA,KAAA,CAHA,CAIA;;AACA,UAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAAA,EAAA;AACA,QAAA,GAAA,GAAA,EAAA;AACA,QAAA,GAAA,GAAA,GAAA,GAAA,EAAA,GAAA,EAAA;AACA,OAHA,MAGA;AACA,QAAA,GAAA,GAAA,EAAA;AACA,QAAA,GAAA,GAAA,GAAA,GAAA,EAAA,GAAA,EAAA;AACA;;AACA,MAAA,KAAA,GAAA,GAAA,GAAA,EAAA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,UAAA,OAAA,GAAA,QAAA,CAAA,aAAA,CAAA,iBAAA,CAAA;AACA,MAAA,OAAA,CAAA,KAAA,CAAA,OAAA,8BACA,GAAA,GAAA,KADA,mCAEA,GAAA,GAAA,KAFA,iEAGA,KAHA;AAKA,KA5BA;AA6BA,IAAA,UA7BA,sBA6BA,CA7BA,EA6BA,CA7BA,EA6BA,CA7BA,EA6BA,CA7BA,EA6BA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,MAAA,EAAA,CAAA,EAAA,CAAA,EAAA,CAAA,EAAA,CAAA;AACA;AA/BA;AArBA,CAAA","sourcesContent":["<template>\n\t<!-- 可视化定制区域 -->\n\t<div id=\"custom-made\">\n\t\t<!-- 虚拟大屏 -->\n\t\t<div id=\"virtual-screen\">\n\t\t\t<vueResiable></vueResiable>\n\t\t\t<vueResiable :scaleRatio=\"vScale\" @resizing=\"getBoxinfo\"></vueResiable>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport vueResiable from '@/components/resizable/vue-resizable';\n\texport default {\n\t\tname: 'custom-made',\n\t\tcomponents: {\n\t\t\tvueResiable\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t// 当前项目信息\n\t\t\t\tproject: this.$store.state.project,\n\t\t\t\t// custom-made 容器尺寸\n\t\t\t\twrapSize: [],\n\t\t\t\t// 虚拟大屏的尺寸\n\t\t\t\tvScreenSize: [],\n\t\t\t\t// 当前缩放比例\n\t\t\t\tvScale: 1\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tthis.getWrapSize();\n\t\t\tthis.setVirtualScreen();\n\t\t},\n\t\tmethods: {\n\t\t\t// 获取 custom-made 容器尺寸\n\t\t\tgetWrapSize() {\n\t\t\t\tconst wrap = document.querySelector('#custom-made');\n\t\t\t\tconst style = window.getComputedStyle(wrap, null);\n\t\t\t\tthis.wrapSize = [parseFloat(style.width), parseFloat(style.height)];\n\t\t\t},\n\t\t\t// 设置虚拟大屏（根据项目分辨率，以一定的系数进行等比缩放）\n\t\t\tsetVirtualScreen() {\n\t\t\t\tconst [pw, ph] = this.project.resolution;\n\t\t\t\tconst [rw, rh] = this.wrapSize;\n\t\t\t\tlet vsw, vsh, scale;\n\t\t\t\t// 计算最佳的虚拟大屏尺寸以及缩放系数\n\t\t\t\tif (rw / rh <= pw / ph) {\n\t\t\t\t\tvsw = rw;\n\t\t\t\t\tvsh = vsw * ph / pw;\n\t\t\t\t} else {\n\t\t\t\t\tvsh = rh;\n\t\t\t\t\tvsw = vsh * pw / ph;\n\t\t\t\t}\n\t\t\t\tscale = vsw / pw;\n\t\t\t\tthis.vScale = scale;\n\t\t\t\tconst vScreen = document.querySelector('#virtual-screen');\n\t\t\t\tvScreen.style.cssText = `\n\t\t\t\t\twidth: ${ vsw / scale }px; \n\t\t\t\t\theight: ${ vsh / scale }px;\n\t\t\t\t\ttransform: translate(-50%, -50%) scale(${ scale });\n\t\t\t\t`;\n\t\t\t},\n\t\t\tgetBoxinfo(l, t, w, h) {\n\t\t\t\tconsole.log('box:', l, t, w, h);\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t#custom-made {\n\t\tposition: relative;\n\t\theight: 100%;\n\t\toverflow: hidden;\n\t\tborder: 1px solid yellow;\n\t}\n\t#virtual-screen {\n\t\tbackground-color: rgba(255, 255, 255, 0.2);\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t}\n</style>\n"],"sourceRoot":"src/components/layout"}]}